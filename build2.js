this._x=c||0,this._y=d||0,this.cb=a,this.scope=b}d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{x:{get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))}},y:{get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))}}}),d.prototype.set=function(a,b){var c=a||0,d=b||(0!==b?c:0);this._x===c&&this._y===d||(this._x=c,this._y=d,this.cb.call(this.scope))},d.prototype.copy=function(a){this._x===a.x&&this._y===a.y||(this._x=a.x,this._y=a.y,this.cb.call(this.scope))}},{}],101:[function(a,b,c){function d(a,b){this.x=a||0,this.y=b||0}d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y)},d.prototype.copy=function(a){this.set(a.x,a.y)},d.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},d.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)}},{}],102:[function(a,b,c){b.exports={Point:a("./Point"),ObservablePoint:a("./ObservablePoint"),Matrix:a("./Matrix"),GroupD8:a("./GroupD8"),Circle:a("./shapes/Circle"),Ellipse:a("./shapes/Ellipse"),Polygon:a("./shapes/Polygon"),Rectangle:a("./shapes/Rectangle"),RoundedRectangle:a("./shapes/RoundedRectangle")}},{"./GroupD8":98,"./Matrix":99,"./ObservablePoint":100,"./Point":101,"./shapes/Circle":103,"./shapes/Ellipse":104,"./shapes/Polygon":105,"./shapes/Rectangle":106,"./shapes/RoundedRectangle":107}],103:[function(a,b,c){function d(a,b,c){this.x=a||0,this.y=b||0,this.radius=c||0,this.type=f.SHAPES.CIRC}var e=a("./Rectangle"),f=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.radius)},d.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.x-a,d=this.y-b,e=this.radius*this.radius;return c*=c,d*=d,e>=c+d},d.prototype.getBounds=function(){return new e(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":78,"./Rectangle":106}],104:[function(a,b,c){function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.type=f.SHAPES.ELIP}var e=a("./Rectangle"),f=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,1>=c+d},d.prototype.getBounds=function(){return new e(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":78,"./Rectangle":106}],105:[function(a,b,c){function d(a){var b=a;if(!Array.isArray(b)){b=new Array(arguments.length);for(var c=0;c<b.length;++c)b[c]=arguments[c]}if(b[0]instanceof e){for(var d=[],g=0,h=b.length;h>g;g++)d.push(b[g].x,b[g].y);b=d}this.closed=!0,this.points=b,this.type=f.SHAPES.POLY}var e=a("../Point"),f=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.points.slice())},d.prototype.close=function(){var a=this.points;a[0]===a[a.length-2]&&a[1]===a[a.length-1]||a.push(a[0],a[1])},d.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,e=0,f=d-1;d>e;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1],k=h>b!=j>b&&(i-g)*(b-h)/(j-h)+g>a;k&&(c=!c)}return c}},{"../../const":78,"../Point":101}],106:[function(a,b,c){function d(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.type=e.SHAPES.RECT}var e=a("../../const");d.prototype.constructor=d,b.exports=d,d.EMPTY=new d(0,0,0,0),d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},d.prototype.contains=function(a,b){return!(this.width<=0||this.height<=0)&&(a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height)},d.prototype.pad=function(a,b){a=a||0,b=b||(0!==b?a:0),this.x-=a,this.y-=b,this.width+=2*a,this.height+=2*b},d.prototype.fit=function(a){this.x<a.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=a.x),this.y<a.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=a.y),this.x+this.width>a.x+a.width&&(this.width=a.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>a.y+a.height&&(this.height=a.height-this.y,this.height<0&&(this.height=0))},d.prototype.enlarge=function(a){if(a!==d.EMPTY){var b=Math.min(this.x,a.x),c=Math.max(this.x+this.width,a.x+a.width),e=Math.min(this.y,a.y),f=Math.max(this.y+this.height,a.y+a.height);this.x=b,this.width=c-b,this.y=e,this.height=f-e}}},{"../../const":78}],107:[function(a,b,c){function d(a,b,c,d,f){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this.radius=f||20,this.type=e.SHAPES.RREC}var e=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.radius)},d.prototype.contains=function(a,b){return!(this.width<=0||this.height<=0)&&(a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height)}},{"../../const":78}],108:[function(a,b,c){function d(a,b,c,d){if(j.call(this),e.sayHello(a),d)for(var f in g.DEFAULT_RENDER_OPTIONS)"undefined"==typeof d[f]&&(d[f]=g.DEFAULT_RENDER_OPTIONS[f]);else d=g.DEFAULT_RENDER_OPTIONS;this.type=g.RENDERER_TYPE.UNKNOWN,this.width=b||800,this.height=c||600,this.view=d.view||document.createElement("canvas"),this.resolution=d.resolution,this.transparent=d.transparent,this.autoResize=d.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=d.preserveDrawingBuffer,this.clearBeforeRender=d.clearBeforeRender,this.roundPixels=d.roundPixels,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=d.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new h,this._lastObjectRendered=this._tempDisplayObjectParent}var e=a("../utils"),f=a("../math"),g=a("../const"),h=a("../display/Container"),i=a("../textures/RenderTexture"),j=a("eventemitter3"),k=new f.Matrix;d.prototype=Object.create(j.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=e.hex2string(a),e.hex2rgb(a,this._backgroundColorRgba)}}}),d.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},d.prototype.generateTexture=function(a,b,c){var d=a.getLocalBounds(),e=i.create(0|d.width,0|d.height,b,c);return k.tx=-d.x,k.ty=-d.y,this.render(a,e,!1,k,!0),e},d.prototype.destroy=function(a){a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=g.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null}},{"../const":78,"../display/Container":80,"../math":102,"../textures/RenderTexture":143,"../utils":151,eventemitter3:3}],109:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,"Canvas",a,b,c),this.type=j.RENDERER_TYPE.CANVAS,this.rootContext=this.view.getContext("2d",{alpha:this.transparent}),this.rootResolution=this.resolution,this.refresh=!0,this.maskManager=new f(this),this.smoothProperty="imageSmoothingEnabled",this.rootContext.imageSmoothingEnabled||(this.rootContext.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.rootContext.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.rootContext.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.rootContext.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this.blendModes=h(),this._activeBlendMode=null,this.context=null,this.renderingToScreen=!1,this.resize(a,b)}var e=a("../SystemRenderer"),f=a("./utils/CanvasMaskManager"),g=a("./utils/CanvasRenderTarget"),h=a("./utils/mapCanvasBlendModesToPixi"),i=a("../../utils"),j=a("../../const");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,i.pluginTarget.mixin(d),d.prototype.render=function(a,b,c,d,e){if(this.view){this.renderingToScreen=!b,this.emit("prerender"),b?(b=b.baseTexture||b,b._canvasRenderTarget||(b._canvasRenderTarget=new g(b.width,b.height,b.resolution),b.source=b._canvasRenderTarget.canvas,b.valid=!0),this.context=b._canvasRenderTarget.context,this.resolution=b._canvasRenderTarget.resolution):(this.context=this.rootContext,this.resolution=this.rootResolution);var f=this.context;if(b||(this._lastObjectRendered=a),!e){var h=a.parent,i=this._tempDisplayObjectParent.transform.worldTransform;d?d.copy(i):i.identity(),a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=h}f.setTransform(1,0,0,1,0,0),f.globalAlpha=1,f.globalCompositeOperation=this.blendModes[j.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(f.fillStyle="black",f.clear()),(void 0!==c?c:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?f.clearRect(0,0,this.width,this.height):(f.fillStyle=this._backgroundColorString,f.fillRect(0,0,this.width,this.height)));var k=this.context;this.context=f,a.renderCanvas(this),this.context=k,this.emit("postrender")}},d.prototype.setBlendMode=function(a){this._activeBlendMode!==a&&(this.context.globalCompositeOperation=this.blendModes[a])},d.prototype.destroy=function(a){this.destroyPlugins(),e.prototype.destroy.call(this,a),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},d.prototype.resize=function(a,b){e.prototype.resize.call(this,a,b),this.smoothProperty&&(this.rootContext[this.smoothProperty]=j.SCALE_MODES.DEFAULT===j.SCALE_MODES.LINEAR)}},{"../../const":78,"../../utils":151,"../SystemRenderer":108,"./utils/CanvasMaskManager":110,"./utils/CanvasRenderTarget":111,"./utils/mapCanvasBlendModesToPixi":113}],110:[function(a,b,c){function d(a){this.renderer=a}var e=a("../../../const");d.prototype.constructor=d,b.exports=d,d.prototype.pushMask=function(a){var b=this.renderer;b.context.save();var c=a.alpha,d=a.transform.worldTransform,e=b.resolution;b.context.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),a._texture||(this.renderGraphicsShape(a),b.context.clip()),a.worldAlpha=c},d.prototype.renderGraphicsShape=function(a){var b=this.renderer.context,c=a.graphicsData.length;if(0!==c){b.beginPath();for(var d=0;c>d;d++){var f=a.graphicsData[d],g=f.shape;if(f.type===e.SHAPES.POLY){var h=g.points;b.moveTo(h[0],h[1]);for(var i=1;i<h.length/2;i++)b.lineTo(h[2*i],h[2*i+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&b.closePath()}else if(f.type===e.SHAPES.RECT)b.rect(g.x,g.y,g.width,g.height),b.closePath();else if(f.type===e.SHAPES.CIRC)b.arc(g.x,g.y,g.radius,0,2*Math.PI),b.closePath();else if(f.type===e.SHAPES.ELIP){var j=2*g.width,k=2*g.height,l=g.x-j/2,m=g.y-k/2,n=.5522848,o=j/2*n,p=k/2*n,q=l+j,r=m+k,s=l+j/2,t=m+k/2;b.moveTo(l,t),b.bezierCurveTo(l,t-p,s-o,m,s,m),b.bezierCurveTo(s+o,m,q,t-p,q,t),b.bezierCurveTo(q,t+p,s+o,r,s,r),b.bezierCurveTo(s-o,r,l,t+p,l,t),b.closePath()}else if(f.type===e.SHAPES.RREC){var u=g.x,v=g.y,w=g.width,x=g.height,y=g.radius,z=Math.min(w,x)/2|0;y=y>z?z:y,b.moveTo(u,v+y),b.lineTo(u,v+x-y),b.quadraticCurveTo(u,v+x,u+y,v+x),b.lineTo(u+w-y,v+x),b.quadraticCurveTo(u+w,v+x,u+w,v+x-y),b.lineTo(u+w,v+y),b.quadraticCurveTo(u+w,v,u+w-y,v),b.lineTo(u+y,v),b.quadraticCurveTo(u,v,u,v+y),b.closePath()}}}},d.prototype.popMask=function(a){a.context.restore()},d.prototype.destroy=function(){}},{"../../../const":78}],111:[function(a,b,c){function d(a,b,c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=c||e.RESOLUTION,this.resize(a,b)}var e=a("../../../const");d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},height:{get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}}),d.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},d.prototype.resize=function(a,b){this.canvas.width=a*this.resolution,this.canvas.height=b*this.resolution},d.prototype.destroy=function(){this.context=null,this.canvas=null}},{"../../../const":78}],112:[function(a,b,c){var d=function(){if("undefined"==typeof document)return!1;var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",b="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",c=new Image;c.src=a+"AP804Oa6"+b;var d=new Image;d.src=a+"/wCKxvRF"+b;var e=document.createElement("canvas");e.width=6,e.height=1;var f=e.getContext("2d");f.globalCompositeOperation="multiply",f.drawImage(c,0,0),f.drawImage(d,2,0);var g=f.getImageData(2,0,1,1);if(!g)return!1;var h=g.data;return 255===h[0]&&0===h[1]&&0===h[2]};b.exports=d},{}],113:[function(a,b,c){function d(a){return a=a||[],f()?(a[e.BLEND_MODES.NORMAL]="source-over",a[e.BLEND_MODES.ADD]="lighter",a[e.BLEND_MODES.MULTIPLY]="multiply",a[e.BLEND_MODES.SCREEN]="screen",a[e.BLEND_MODES.OVERLAY]="overlay",a[e.BLEND_MODES.DARKEN]="darken",a[e.BLEND_MODES.LIGHTEN]="lighten",a[e.BLEND_MODES.COLOR_DODGE]="color-dodge",a[e.BLEND_MODES.COLOR_BURN]="color-burn",a[e.BLEND_MODES.HARD_LIGHT]="hard-light",a[e.BLEND_MODES.SOFT_LIGHT]="soft-light",a[e.BLEND_MODES.DIFFERENCE]="difference",a[e.BLEND_MODES.EXCLUSION]="exclusion",a[e.BLEND_MODES.HUE]="hue",a[e.BLEND_MODES.SATURATION]="saturate",a[e.BLEND_MODES.COLOR]="color",a[e.BLEND_MODES.LUMINOSITY]="luminosity"):(a[e.BLEND_MODES.NORMAL]="source-over",a[e.BLEND_MODES.ADD]="lighter",a[e.BLEND_MODES.MULTIPLY]="source-over",a[e.BLEND_MODES.SCREEN]="source-over",a[e.BLEND_MODES.OVERLAY]="source-over",a[e.BLEND_MODES.DARKEN]="source-over",a[e.BLEND_MODES.LIGHTEN]="source-over",a[e.BLEND_MODES.COLOR_DODGE]="source-over",a[e.BLEND_MODES.COLOR_BURN]="source-over",a[e.BLEND_MODES.HARD_LIGHT]="source-over",a[e.BLEND_MODES.SOFT_LIGHT]="source-over",a[e.BLEND_MODES.DIFFERENCE]="source-over",a[e.BLEND_MODES.EXCLUSION]="source-over",a[e.BLEND_MODES.HUE]="source-over",a[e.BLEND_MODES.SATURATION]="source-over",a[e.BLEND_MODES.COLOR]="source-over",a[e.BLEND_MODES.LUMINOSITY]="source-over"),a}var e=a("../../../const"),f=a("./canUseNewCanvasBlendModes");b.exports=d},{"../../../const":78,"./canUseNewCanvasBlendModes":112}],114:[function(a,b,c){function d(a){this.renderer=a,this.count=0,this.checkCount=0,this.maxIdle=3600,this.checkCountMax=600,this.mode=e.GC_MODES.DEFAULT}var e=a("../../const");d.prototype.constructor=d,b.exports=d,d.prototype.update=function(){this.count++,this.mode!==e.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},d.prototype.run=function(){var a,b,c=this.renderer.textureManager,d=c._managedTextures,e=!1;for(a=0;a<d.length;a++){var f=d[a];!f._glRenderTargets&&this.count-f.touched>this.maxIdle&&(c.destroyTexture(f,!0),d[a]=null,e=!0)}if(e){for(b=0,a=0;a<d.length;a++)null!==d[a]&&(d[b++]=d[a]);d.length=b}},d.prototype.unload=function(a){var b=this.renderer.textureManager;a._texture&&b.destroyTexture(a._texture,!0);for(var c=a.children.length-1;c>=0;c--)this.unload(a.children[c])}},{"../../const":78}],115:[function(a,b,c){var d=a("pixi-gl-core").GLTexture,e=a("../../const"),f=a("./utils/RenderTarget"),g=a("../../utils"),h=function(a){this.renderer=a,this.gl=a.gl,this._managedTextures=[]};h.prototype.bindTexture=function(){},h.prototype.getTexture=function(){},h.prototype.updateTexture=function(a){a=a.baseTexture||a;var b=!!a._glRenderTargets;if(a.hasLoaded){var c=a._glTextures[this.renderer.CONTEXT_UID];if(c)b?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):c.upload(a.source);else{if(b){var g=new f(this.gl,a.width,a.height,a.scaleMode,a.resolution);g.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=g,c=g.texture}else c=new d(this.gl),c.premultiplyAlpha=!0,c.upload(a.source);a._glTextures[this.renderer.CONTEXT_UID]=c,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&c.enableMipmap(),a.wrapMode===e.WRAP_MODES.CLAMP?c.enableWrapClamp():a.wrapMode===e.WRAP_MODES.REPEAT?c.enableWrapRepeat():c.enableWrapMirrorRepeat()):c.enableWrapClamp(),a.scaleMode===e.SCALE_MODES.NEAREST?c.enableNearestScaling():c.enableLinearScaling()}return c}},h.prototype.destroyTexture=function(a,b){if(a=a.baseTexture||a,a.hasLoaded&&a._glTextures[this.renderer.CONTEXT_UID]&&(a._glTextures[this.renderer.CONTEXT_UID].destroy(),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this),delete a._glTextures[this.renderer.CONTEXT_UID],!b)){var c=this._managedTextures.indexOf(a);-1!==c&&g.removeItems(this._managedTextures,c,1)}},h.prototype.removeAll=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];b._glTextures[this.renderer.CONTEXT_UID]&&delete b._glTextures[this.renderer.CONTEXT_UID]}},h.prototype.destroy=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];this.destroyTexture(b,!0),b.off("update",this.updateTexture,this),b.off("dispose",this.destroyTexture,this)}this._managedTextures=null},b.exports=h},{"../../const":78,"../../utils":151,"./utils/RenderTarget":128,"pixi-gl-core":12}],116:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,"WebGL",a,b,c),this.type=s.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._contextOptions={alpha:this.transparent,antialias:c.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:c.preserveDrawingBuffer},this._backgroundColorRgba[3]=this.transparent?0:1,this.maskManager=new f(this),this.stencilManager=new g(this),this.emptyRenderer=new j(this),this.currentRenderer=this.emptyRenderer,this.initPlugins(),c.context&&p(c.context),this.gl=c.context||n(this.view,this._contextOptions),this.CONTEXT_UID=t++,this.state=new m(this.gl),this.renderingToScreen=!0,this._initContext(),this.filterManager=new h(this),this.drawModes=o(this.gl),this._activeShader=null,this._activeRenderTarget=null,this._activeTextureLocation=999,this._activeTexture=null,this.setBlendMode(0)}var e=a("../SystemRenderer"),f=a("./managers/MaskManager"),g=a("./managers/StencilManager"),h=a("./managers/FilterManager"),i=a("./utils/RenderTarget"),j=a("./utils/ObjectRenderer"),k=a("./TextureManager"),l=a("./TextureGarbageCollector"),m=a("./WebGLState"),n=a("pixi-gl-core").createContext,o=a("./utils/mapWebGLDrawModesToPixi"),p=a("./utils/validateContext"),q=a("../../utils"),r=a("pixi-gl-core"),s=a("../../const"),t=0;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,q.pluginTarget.mixin(d),d.prototype._initContext=function(){var a=this.gl;this.textureManager=new k(this),this.textureGC=new l(this),this.state.resetToDefault(),this.rootRenderTarget=new i(a,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget),this.emit("context",a),this.resize(this.width,this.height)},d.prototype.render=function(a,b,c,d,e){if(this.renderingToScreen=!b,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(b||(this._lastObjectRendered=a),!e){var f=a.parent;a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=f}this.bindRenderTexture(b,d),this.currentRenderer.start(),(void 0!==c?c:this.clearBeforeRender)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},d.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},d.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},d.prototype.resize=function(a,b){e.prototype.resize.call(this,a,b),this.rootRenderTarget.resize(a,b),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},d.prototype.setBlendMode=function(a){this.state.setBlendMode(a)},d.prototype.clear=function(a){this._activeRenderTarget.clear(a)},d.prototype.setTransform=function(a){this._activeRenderTarget.transform=a},d.prototype.bindRenderTexture=function(a,b){var c;if(a){var d=a.baseTexture,e=this.gl;d._glRenderTargets[this.CONTEXT_UID]?(this._activeTextureLocation=d._id,e.activeTexture(e.TEXTURE0+d._id),e.bindTexture(e.TEXTURE_2D,null)):(this.textureManager.updateTexture(d),e.bindTexture(e.TEXTURE_2D,null)),c=d._glRenderTargets[this.CONTEXT_UID],c.setFrame(a.frame)}else c=this.rootRenderTarget;return c.transform=b,this.bindRenderTarget(c),this},d.prototype.bindRenderTarget=function(a){return a!==this._activeRenderTarget&&(this._activeRenderTarget=a,a.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=a.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(a.stencilMaskStack)),this},d.prototype.bindShader=function(a){return this._activeShader!==a&&(this._activeShader=a,a.bind(),a.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},d.prototype.bindTexture=function(a,b){a=a.baseTexture||a;var c=this.gl;return b=b||0,this._activeTextureLocation!==b&&(this._activeTextureLocation=b,c.activeTexture(c.TEXTURE0+b)),this._activeTexture=a,a._glTextures[this.CONTEXT_UID]?(a.touched=this.textureGC.count,a._glTextures[this.CONTEXT_UID].bind()):this.textureManager.updateTexture(a),this},d.prototype.createVao=function(){return new r.VertexArrayObject(this.gl,this.state.attribState)},d.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._activeTextureLocation=999,this._activeTexture=null,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},d.prototype.handleContextLost=function(a){a.preventDefault()},d.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},d.prototype.destroy=function(a){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,a),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null}},{"../../const":78,"../../utils":151,"../SystemRenderer":108,"./TextureGarbageCollector":114,"./TextureManager":115,"./WebGLState":117,"./managers/FilterManager":122,"./managers/MaskManager":123,"./managers/StencilManager":124,"./utils/ObjectRenderer":126,"./utils/RenderTarget":128,"./utils/mapWebGLDrawModesToPixi":131,"./utils/validateContext":132,"pixi-gl-core":12}],117:[function(a,b,c){function d(a){this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=a,this.maxAttribs=a.getParameter(a.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=e(a),this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object")}var e=a("./utils/mapWebGLBlendModesToPixi");d.prototype.push=function(){var a=this.stack[++this.stackIndex];a||(a=this.stack[this.stackIndex]=new Uint8Array(16));for(var b=0;b<this.activeState.length;b++)this.activeState[b]=a[b]};var f=0,g=1,h=2,i=3,j=4;d.prototype.pop=function(){var a=this.stack[--this.stackIndex];this.setState(a)},d.prototype.setState=function(a){this.setBlend(a[f]),this.setDepthTest(a[g]),this.setFrontFace(a[h]),this.setCullFace(a[i]),this.setBlendMode(a[j])},d.prototype.setBlend=function(a){if(!(this.activeState[f]===a|0)){this.activeState[f]=0|a;var b=this.gl;a?b.enable(b.BLEND):b.disable(b.BLEND)}},d.prototype.setBlendMode=function(a){a!==this.activeState[j]&&(this.activeState[j]=a,this.gl.blendFunc(this.blendModes[a][0],this.blendModes[a][1]))},d.prototype.setDepthTest=function(a){if(!(this.activeState[g]===a|0)){this.activeState[g]=0|a;var b=this.gl;a?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST)}},d.prototype.setCullFace=function(a){if(!(this.activeState[i]===a|0)){this.activeState[i]=0|a;var b=this.gl;a?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE)}},d.prototype.setFrontFace=function(a){if(!(this.activeState[h]===a|0)){this.activeState[h]=0|a;var b=this.gl;a?b.frontFace(b.CW):b.frontFace(b.CCW)}},d.prototype.resetAttributes=function(){var a;for(a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=0;for(a=0;a<this.attribState.attribState.length;a++)this.attribState.attribState[a]=0;var b=this.gl;for(a=1;a<this.maxAttribs;a++)b.disableVertexAttribArray(a)},d.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var a=0;a<this.activeState.length;a++)this.activeState[a]=32;var b=this.gl;b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},b.exports=d},{"./utils/mapWebGLBlendModesToPixi":130}],118:[function(a,b,c){function d(a,b,c){this.vertexSrc=a||d.defaultVertexSrc,this.fragmentSrc=b||d.defaultFragmentSrc,this.blendMode=g.BLEND_MODES.NORMAL,this.uniformData=c||e(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var i in this.uniformData)this.uniforms[i]=this.uniformData[i].value;this.glShaders=[],h[this.vertexSrc+this.fragmentSrc]||(h[this.vertexSrc+this.fragmentSrc]=f.uid()),this.glShaderKey=h[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1,this.enabled=!0}var e=a("./extractUniformsFromSrc"),f=a("../../../utils"),g=a("../../../const"),h={};b.exports=d,d.prototype.apply=function(a,b,c,d){a.applyFilter(this,b,c,d)},d.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n"),d.defaultFragmentSrc=["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")},{"../../../const":78,"../../../utils":151,"./extractUniformsFromSrc":119}],119:[function(a,b,c){function d(a,b,c){var d=e(a,c),f=e(b,c);return Object.assign(d,f)}function e(a){for(var b,c=new RegExp("^(projectionMatrix|uSampler|filterArea)$"),d={},e=a.replace(/\s+/g," ").split(/\s*;\s*/),g=0;g<e.length;g++){var h=e[g].trim();if(h.indexOf("uniform")>-1){var i=h.split(" "),j=i[1],k=i[2],l=1;k.indexOf("[")>-1&&(b=k.split(/\[|\]/),k=b[0],l*=Number(b[1])),k.match(c)||(d[k]={value:f(j,l),name:k,type:j})}}return d}var f=a("pixi-gl-core").shader.defaultValue;b.exports=d},{"pixi-gl-core":12}],120:[function(a,b,c){var d=a("../../../math"),e=function(a,b,c){var d=a.identity();return d.translate(b.x/c.width,b.y/c.height),d.scale(c.width,c.height),d},f=function(a,b,c){var d=a.identity();d.translate(b.x/c.width,b.y/c.height);var e=c.width/b.width,f=c.height/b.height;return d.scale(e,f),d},g=function(a,b,c,e){var f=e.worldTransform.copy(d.Matrix.TEMP_MATRIX),g=e._texture.baseTexture,h=a.identity(),i=c.height/c.width;h.translate(b.x/c.width,b.y/c.height),h.scale(1,i);var j=c.width/g.width,k=c.height/g.height;return f.tx/=g.width*j,f.ty/=g.width*j,f.invert(),h.prepend(f),h.scale(1,1/i),h.scale(j,k),h.translate(e.anchor.x,e.anchor.y),h};b.exports={calculateScreenSpaceMatrix:e,calculateNormalizedScreenSpaceMatrix:f,calculateSpriteMatrix:g}},{"../../../math":102}],121:[function(a,b,c){function d(a){var b=new f.Matrix;e.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","#define GLSLIFY 1\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n"),a.renderable=!1,this.maskSprite=a,this.maskMatrix=b}var e=a("../Filter"),f=a("../../../../math");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c){var d=this.maskSprite;this.uniforms.mask=d._texture,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,d),this.uniforms.alpha=d.worldAlpha,a.applyFilter(this,b,c)}},{"../../../../math":102,"../Filter":118}],122:[function(a,b,c){function d(a){e.call(this,a),this.gl=this.renderer.gl,this.quad=new g(this.gl,a.state.attribState),this.shaderCache={},this.pool={},this.filterData=null}var e=a("./WebGLManager"),f=a("../utils/RenderTarget"),g=a("../utils/Quad"),h=a("../../../math"),i=a("../../../Shader"),j=a("../filters/filterTransforms"),k=a("bit-twiddle"),l=function(){this.renderTarget=null,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.filters=[],this.target=null,this.resolution=1};d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.pushFilter=function(a,b){
var c=this.renderer,d=this.filterData;if(!d){d=this.renderer._activeRenderTarget.filterStack;var e=new l;e.sourceFrame=e.destinationFrame=this.renderer._activeRenderTarget.size,e.renderTarget=c._activeRenderTarget,this.renderer._activeRenderTarget.filterData=d={index:0,stack:[e]},this.filterData=d}var f=d.stack[++d.index];f||(f=d.stack[d.index]=new l);var g=b[0].resolution,h=b[0].padding,i=a.filterArea||a.getBounds(!0),j=f.sourceFrame,k=f.destinationFrame;j.x=(i.x*g|0)/g,j.y=(i.y*g|0)/g,j.width=(i.width*g|0)/g,j.height=(i.height*g|0)/g,d.stack[0].renderTarget.transform||j.fit(d.stack[0].destinationFrame),j.pad(h),k.width=j.width,k.height=j.height;var m=this.getPotRenderTarget(c.gl,j.width,j.height,g);f.target=a,f.filters=b,f.resolution=g,f.renderTarget=m,m.setFrame(k,j),c.bindRenderTarget(m),c.clear()},d.prototype.popFilter=function(){var a=this.filterData,b=a.stack[a.index-1],c=a.stack[a.index];this.quad.map(c.renderTarget.size,c.sourceFrame).upload();var d=c.filters;if(1===d.length)d[0].apply(this,c.renderTarget,b.renderTarget,!1),this.freePotRenderTarget(c.renderTarget);else{var e=c.renderTarget,f=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,1);f.setFrame(c.destinationFrame,c.sourceFrame);for(var g=0;g<d.length-1;g++){d[g].apply(this,e,f,!0);var h=e;e=f,f=h}d[g].apply(this,e,b.renderTarget,!1),this.freePotRenderTarget(e),this.freePotRenderTarget(f)}a.index--,0===a.index&&(this.filterData=null)},d.prototype.applyFilter=function(a,b,c,d){var e=this.renderer,f=a.glShaders[e.CONTEXT_UID];if(f||(a.glShaderKey?(f=this.shaderCache[a.glShaderKey],f||(f=a.glShaders[e.CONTEXT_UID]=this.shaderCache[a.glShaderKey]=new i(this.gl,a.vertexSrc,a.fragmentSrc))):f=a.glShaders[e.CONTEXT_UID]=new i(this.gl,a.vertexSrc,a.fragmentSrc),this.quad.initVao(f)),e.bindRenderTarget(c),d){var g=e.gl;g.disable(g.SCISSOR_TEST),e.clear(),g.enable(g.SCISSOR_TEST)}c===e.maskManager.scissorRenderTarget&&e.maskManager.pushScissorMask(null,e.maskManager.scissorData),e.bindShader(f),this.syncUniforms(f,a),b.texture.bind(0),e._activeTextureLocation=0,e.state.setBlendMode(a.blendMode),this.quad.draw()},d.prototype.syncUniforms=function(a,b){var c,d=b.uniformData,e=b.uniforms,f=1;if(a.uniforms.data.filterArea){c=this.filterData.stack[this.filterData.index];var g=a.uniforms.filterArea;g[0]=c.renderTarget.size.width,g[1]=c.renderTarget.size.height,g[2]=c.sourceFrame.x,g[3]=c.sourceFrame.y,a.uniforms.filterArea=g}if(a.uniforms.data.filterClamp){c=this.filterData.stack[this.filterData.index];var h=a.uniforms.filterClamp;h[0]=.5/c.renderTarget.size.width,h[1]=.5/c.renderTarget.size.height,h[2]=(c.sourceFrame.width-.5)/c.renderTarget.size.width,h[3]=(c.sourceFrame.height-.5)/c.renderTarget.size.height,a.uniforms.filterClamp=h}var i;for(var j in d)if("sampler2D"===d[j].type){if(a.uniforms[j]=f,e[j].baseTexture)this.renderer.bindTexture(e[j].baseTexture,f);else{var k=this.renderer.gl;this.renderer._activeTextureLocation=k.TEXTURE0+f,k.activeTexture(k.TEXTURE0+f),e[j].texture.bind()}f++}else"mat3"===d[j].type?void 0!==e[j].a?a.uniforms[j]=e[j].toArray(!0):a.uniforms[j]=e[j]:"vec2"===d[j].type?void 0!==e[j].x?(i=a.uniforms[j]||new Float32Array(2),i[0]=e[j].x,i[1]=e[j].y,a.uniforms[j]=i):a.uniforms[j]=e[j]:"float"===d[j].type?a.uniforms.data[j].value!==d[j]&&(a.uniforms[j]=e[j]):a.uniforms[j]=e[j]},d.prototype.getRenderTarget=function(a,b){var c=this.filterData.stack[this.filterData.index],d=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,b||c.resolution);return d.setFrame(c.destinationFrame,c.sourceFrame),d},d.prototype.returnRenderTarget=function(a){return this.freePotRenderTarget(a)},d.prototype.calculateScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return j.calculateScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size)},d.prototype.calculateNormalizedScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return j.calculateNormalizedScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size,b.destinationFrame)},d.prototype.calculateSpriteMatrix=function(a,b){var c=this.filterData.stack[this.filterData.index];return j.calculateSpriteMatrix(a,c.sourceFrame,c.renderTarget.size,b)},d.prototype.destroy=function(){this.shaderCache=[],this.emptyPool()},d.prototype.getPotRenderTarget=function(a,b,c,d){b=k.nextPow2(b*d),c=k.nextPow2(c*d);var e=(65535&b)<<16|65535&c;this.pool[e]||(this.pool[e]=[]);var g=this.pool[e].pop()||new f(a,b,c,null,1);return g.resolution=d,g.defaultFrame.width=g.size.width=b/d,g.defaultFrame.height=g.size.height=c/d,g},d.prototype.emptyPool=function(){for(var a in this.pool){var b=this.pool[a];if(b)for(var c=0;c<b.length;c++)b[c].destroy(!0)}this.pool={}},d.prototype.freePotRenderTarget=function(a){var b=a.size.width*a.resolution,c=a.size.height*a.resolution,d=(65535&b)<<16|65535&c;this.pool[d].push(a)}},{"../../../Shader":77,"../../../math":102,"../filters/filterTransforms":120,"../utils/Quad":127,"../utils/RenderTarget":128,"./WebGLManager":125,"bit-twiddle":1}],123:[function(a,b,c){function d(a){e.call(this,a),this.scissor=!1,this.scissorData=null,this.scissorRenderTarget=null,this.enableScissor=!0,this.alphaMaskPool=[],this.alphaMaskIndex=0}var e=a("./WebGLManager"),f=a("../filters/spriteMask/SpriteMaskFilter");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.pushMask=function(a,b){if(b.texture)this.pushSpriteMask(a,b);else if(this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&b.isFastRect()){var c=b.worldTransform,d=Math.atan2(c.b,c.a);d=Math.round(d*(180/Math.PI)),d%90?this.pushStencilMask(b):this.pushScissorMask(a,b)}else this.pushStencilMask(b)},d.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(a,b):this.popStencilMask(a,b)},d.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool[this.alphaMaskIndex];c||(c=this.alphaMaskPool[this.alphaMaskIndex]=[new f(b)]),c[0].resolution=this.renderer.resolution,c[0].maskSprite=b,a.filterArea=b.getBounds(!0),this.renderer.filterManager.pushFilter(a,c),this.alphaMaskIndex++},d.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},d.prototype.pushStencilMask=function(a){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(a)},d.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},d.prototype.pushScissorMask=function(a,b){b.renderable=!0;var c=this.renderer._activeRenderTarget,d=b.getBounds();d.fit(c.size),b.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var e=this.renderer.resolution;this.renderer.gl.scissor(d.x*e,(c.root?c.size.height-d.y-d.height:d.y)*e,d.width*e,d.height*e),this.scissorRenderTarget=c,this.scissorData=b,this.scissor=!0},d.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var a=this.renderer.gl;a.disable(a.SCISSOR_TEST)}},{"../filters/spriteMask/SpriteMaskFilter":121,"./WebGLManager":125}],124:[function(a,b,c){function d(a){e.call(this,a),this.stencilMaskStack=null}var e=a("./WebGLManager");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)},d.prototype.pushStencil=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var b=this.renderer.gl,c=this.stencilMaskStack;0===c.length&&(b.enable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.stencilFunc(b.ALWAYS,1,1)),c.push(a),b.colorMask(!1,!1,!1,!1),b.stencilOp(b.KEEP,b.KEEP,b.INCR),this.renderer.plugins.graphics.render(a),b.colorMask(!0,!0,!0,!0),b.stencilFunc(b.NOTEQUAL,0,c.length),b.stencilOp(b.KEEP,b.KEEP,b.KEEP)},d.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var a=this.renderer.gl,b=this.stencilMaskStack,c=b.pop();0===b.length?a.disable(a.STENCIL_TEST):(a.colorMask(!1,!1,!1,!1),a.stencilOp(a.KEEP,a.KEEP,a.DECR),this.renderer.plugins.graphics.render(c),a.colorMask(!0,!0,!0,!0),a.stencilFunc(a.NOTEQUAL,0,b.length),a.stencilOp(a.KEEP,a.KEEP,a.KEEP))},d.prototype.destroy=function(){e.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null}},{"./WebGLManager":125}],125:[function(a,b,c){function d(a){this.renderer=a,this.renderer.on("context",this.onContextChange,this)}d.prototype.constructor=d,b.exports=d,d.prototype.onContextChange=function(){},d.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],126:[function(a,b,c){function d(a){e.call(this,a)}var e=a("../managers/WebGLManager");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.start=function(){},d.prototype.stop=function(){this.flush()},d.prototype.flush=function(){},d.prototype.render=function(a){}},{"../managers/WebGLManager":125}],127:[function(a,b,c){function d(a,b){this.gl=a,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var c=0;4>c;c++)this.interleaved[4*c]=this.vertices[2*c],this.interleaved[4*c+1]=this.vertices[2*c+1],this.interleaved[4*c+2]=this.uvs[2*c],this.interleaved[4*c+3]=this.uvs[2*c+1];this.indices=f(1),this.vertexBuffer=e.GLBuffer.createVertexBuffer(a,this.interleaved,a.STATIC_DRAW),this.indexBuffer=e.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.vao=new e.VertexArrayObject(a,b)}var e=a("pixi-gl-core"),f=a("../../../utils/createIndicesForQuads");d.prototype.constructor=d,d.prototype.initVao=function(a){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,a.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,a.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},d.prototype.map=function(a,b){var c=0,d=0;return this.uvs[0]=c,this.uvs[1]=d,this.uvs[2]=c+b.width/a.width,this.uvs[3]=d,this.uvs[4]=c+b.width/a.width,this.uvs[5]=d+b.height/a.height,this.uvs[6]=c,this.uvs[7]=d+b.height/a.height,c=b.x,d=b.y,this.vertices[0]=c,this.vertices[1]=d,this.vertices[2]=c+b.width,this.vertices[3]=d,this.vertices[4]=c+b.width,this.vertices[5]=d+b.height,this.vertices[6]=c,this.vertices[7]=d+b.height,this},d.prototype.draw=function(){return this.vao.bind().draw(this.gl.TRIANGLES,6,0).unbind(),this},d.prototype.upload=function(){for(var a=0;4>a;a++)this.interleaved[4*a]=this.vertices[2*a],this.interleaved[4*a+1]=this.vertices[2*a+1],this.interleaved[4*a+2]=this.uvs[2*a],this.interleaved[4*a+3]=this.uvs[2*a+1];return this.vertexBuffer.upload(this.interleaved),this},d.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.indexBuffer)},b.exports=d},{"../../../utils/createIndicesForQuads":149,"pixi-gl-core":12}],128:[function(a,b,c){var d=a("../../../math"),e=a("../../../const"),f=a("pixi-gl-core").GLFramebuffer,g=function(a,b,c,g,h,i){this.gl=a,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new d.Rectangle(0,0,1,1),this.resolution=h||e.RESOLUTION,this.projectionMatrix=new d.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new d.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=g||e.SCALE_MODES.DEFAULT,this.root=i,this.root?(this.frameBuffer=new f(a,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=f.createRGBA(a,100,100),this.scaleMode===e.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(b,c)};g.prototype.constructor=g,b.exports=g,g.prototype.clear=function(a){var b=a||this.clearColor;this.frameBuffer.clear(b[0],b[1],b[2],b[3])},g.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},g.prototype.setFrame=function(a,b){this.destinationFrame=a||this.destinationFrame||this.defaultFrame,this.sourceFrame=b||this.sourceFrame||a},g.prototype.activate=function(){var a=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(a.enable(a.SCISSOR_TEST),a.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):a.disable(a.SCISSOR_TEST),a.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},g.prototype.calculateProjection=function(a,b){var c=this.projectionMatrix;b=b||a,c.identity(),this.root?(c.a=1/a.width*2,c.d=-1/a.height*2,c.tx=-1-b.x*c.a,c.ty=1-b.y*c.d):(c.a=1/a.width*2,c.d=1/a.height*2,c.tx=-1-b.x*c.a,c.ty=-1-b.y*c.d)},g.prototype.resize=function(a,b){if(a|=0,b|=0,this.size.width!==a||this.size.height!==b){this.size.width=a,this.size.height=b,this.defaultFrame.width=a,this.defaultFrame.height=b,this.frameBuffer.resize(a*this.resolution,b*this.resolution);var c=this.frame||this.size;this.calculateProjection(c)}},g.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null}},{"../../../const":78,"../../../math":102,"pixi-gl-core":12}],129:[function(a,b,c){function d(a){for(var b="",c=0;a>c;c++)c>0&&(b+="\nelse "),a-1>c&&(b+="if(test == "+c+".0){}");return b}var e=a("pixi-gl-core"),f=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n"),g=function(a,b){var c=!b;if(c){var g=document.createElement("canvas");g.width=1,g.height=1,b=e.createContext(g)}for(var h=b.createShader(b.FRAGMENT_SHADER);;){var i=f.replace(/%forloop%/gi,d(a));if(b.shaderSource(h,i),b.compileShader(h),b.getShaderParameter(h,b.COMPILE_STATUS))break;a=a/2|0}return c&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").loseContext(),a};b.exports=g},{"pixi-gl-core":12}],130:[function(a,b,c){function d(a,b){return b=b||[],b[e.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA],b[e.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR],b[e.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b}var e=a("../../../const");b.exports=d},{"../../../const":78}],131:[function(a,b,c){function d(a,b){b=b||{},b[e.DRAW_MODES.POINTS]=a.POINTS,b[e.DRAW_MODES.LINES]=a.LINES,b[e.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,b[e.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,b[e.DRAW_MODES.TRIANGLES]=a.TRIANGLES,b[e.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,b[e.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN}var e=a("../../../const");b.exports=d},{"../../../const":78}],132:[function(a,b,c){function d(a){var b=a.getContextAttributes();b.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}b.exports=d},{}],133:[function(a,b,c){function d(a){g.call(this),this.anchor=new e.ObservablePoint(this.onAnchorUpdate,this),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=i.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=a||f.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1}var e=a("../math"),f=a("../textures/Texture"),g=a("../display/Container"),h=a("../utils"),i=a("../const"),j=new e.Point;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){var b=h.sign(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},height:{get:function(){return Math.abs(this.scale.y)*this.texture.orig.height},set:function(a){var b=h.sign(this.scale.y)||1;this.scale.y=b*a/this.texture.orig.height,this._height=a}},tint:{get:function(){return this._tint},set:function(a){this._tint=a,this._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}},texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,this.cachedTint=16777215,this._textureID=-1,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}}),d.prototype._onTextureUpdate=function(){this._textureID=-1,this._width&&(this.scale.x=h.sign(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=h.sign(this.scale.y)*this._height/this.texture.orig.height)},d.prototype.onAnchorUpdate=function(){this._transformID=-1},d.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var a,b,c,d,e=this._texture,f=this.transform.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=this.vertexData,n=e.trim,o=e.orig;n?(b=n.x-this.anchor._x*o.width,a=b+n.width,d=n.y-this.anchor._y*o.height,c=d+n.height):(a=o.width*(1-this.anchor._x),b=o.width*-this.anchor._x,c=o.height*(1-this.anchor._y),d=o.height*-this.anchor._y),m[0]=g*b+i*d+k,m[1]=j*d+h*b+l,m[2]=g*a+i*d+k,m[3]=j*d+h*a+l,m[4]=g*a+i*c+k,m[5]=j*c+h*a+l,m[6]=g*b+i*c+k,m[7]=j*c+h*b+l}},d.prototype.calculateTrimmedVertices=function(){this.vertexTrimmedData||(this.vertexTrimmedData=new Float32Array(8));var a,b,c,d,e=this._texture,f=this.vertexTrimmedData,g=e.orig,h=this.transform.worldTransform,i=h.a,j=h.b,k=h.c,l=h.d,m=h.tx,n=h.ty;a=g.width*(1-this.anchor._x),b=g.width*-this.anchor._x,c=g.height*(1-this.anchor._y),d=g.height*-this.anchor._y,f[0]=i*b+k*d+m,f[1]=l*d+j*b+n,f[2]=i*a+k*d+m,f[3]=l*d+j*a+n,f[4]=i*a+k*c+m,f[5]=l*c+j*a+n,f[6]=i*b+k*c+m,f[7]=l*c+j*b+n},d.prototype._renderWebGL=function(a){this.calculateVertices(),a.setObjectRenderer(a.plugins.sprite),a.plugins.sprite.render(this)},d.prototype._renderCanvas=function(a){a.plugins.sprite.render(this)},d.prototype._calculateBounds=function(){var a=this._texture.trim,b=this._texture.orig;!a||a.width===b.width&&a.height===b.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},d.prototype.getLocalBounds=function(a){return 0===this.children.length?(this._bounds.minX=-this._texture.orig.width*this.anchor._x,this._bounds.minY=-this._texture.orig.height*this.anchor._y,this._bounds.maxX=this._texture.orig.width,this._bounds.maxY=this._texture.orig.height,a||(this._localBoundsRect||(this._localBoundsRect=new e.Rectangle),a=this._localBoundsRect),this._bounds.getRectangle(a)):g.prototype.getLocalBounds.call(this,a)},d.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,j);var b,c=this._texture.orig.width,d=this._texture.orig.height,e=-c*this.anchor.x;return j.x>e&&j.x<e+c&&(b=-d*this.anchor.y,j.y>b&&j.y<b+d)},d.prototype.destroy=function(a){g.prototype.destroy.call(this,a),this.anchor=null;var b="boolean"==typeof a?a:a&&a.texture;if(b){var c="boolean"==typeof a?a:a&&a.baseTexture;this._texture.destroy(!!c)}this._texture=null,this.shader=null},d.from=function(a){return new d(f.from(a))},d.fromFrame=function(a){var b=h.TextureCache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return new d(b)},d.fromImage=function(a,b,c){return new d(f.fromImage(a,b,c))}},{"../const":78,"../display/Container":80,"../math":102,"../textures/Texture":144,"../utils":151}],134:[function(a,b,c){function d(a){this.renderer=a}var e=a("../../renderers/canvas/CanvasRenderer"),f=a("../../const"),g=a("../../math"),h=new g.Matrix,i=a("./CanvasTinter");d.prototype.constructor=d,b.exports=d,e.registerPlugin("sprite",d),d.prototype.render=function(a){var b,c,d=a._texture,e=this.renderer,j=a.transform.worldTransform,k=d._frame.width,l=d._frame.height;if(!(d.orig.width<=0||d.orig.height<=0)&&d.baseTexture.source&&(e.setBlendMode(a.blendMode),d.valid)){e.context.globalAlpha=a.worldAlpha;var m=d.baseTexture.scaleMode===f.SCALE_MODES.LINEAR;e.smoothProperty&&e.context[e.smoothProperty]!==m&&(e.context[e.smoothProperty]=m),d.trim?(b=d.trim.width/2+d.trim.x-a.anchor.x*d.orig.width,c=d.trim.height/2+d.trim.y-a.anchor.y*d.orig.height):(b=(.5-a.anchor.x)*d.orig.width,c=(.5-a.anchor.y)*d.orig.height),d.rotate&&(j.copy(h),j=h,g.GroupD8.matrixAppendRotationInv(j,d.rotate,b,c),b=0,c=0),b-=k/2,c-=l/2,e.roundPixels?(e.context.setTransform(j.a,j.b,j.c,j.d,j.tx*e.resolution|0,j.ty*e.resolution|0),b|=0,c|=0):e.context.setTransform(j.a,j.b,j.c,j.d,j.tx*e.resolution,j.ty*e.resolution);var n=d.baseTexture.resolution;16777215!==a.tint?(a.cachedTint!==a.tint&&(a.cachedTint=a.tint,a.tintedTexture=i.getTintedTexture(a,a.tint)),e.context.drawImage(a.tintedTexture,0,0,k*n,l*n,b*e.resolution,c*e.resolution,k*e.resolution,l*e.resolution)):e.context.drawImage(d.baseTexture.source,d._frame.x*n,d._frame.y*n,k*n,l*n,b*e.resolution,c*e.resolution,k*e.resolution,l*e.resolution)}},d.prototype.destroy=function(){this.renderer=null}},{"../../const":78,"../../math":102,"../../renderers/canvas/CanvasRenderer":109,"./CanvasTinter":135}],135:[function(a,b,c){var d=a("../../utils"),e=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),f=b.exports={getTintedTexture:function(a,b){var c=a.texture;b=f.roundColor(b);var d="#"+("00000"+(0|b).toString(16)).substr(-6);if(c.tintCache=c.tintCache||{},c.tintCache[d])return c.tintCache[d];var e=f.canvas||document.createElement("canvas");if(f.tintMethod(c,b,e),f.convertTintToImage){var g=new Image;g.src=e.toDataURL(),c.tintCache[d]=g}else c.tintCache[d]=e,f.canvas=null;return e},tintWithMultiply:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithOverlay:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithPerPixel:function(a,b,c){var e=c.getContext("2d"),f=a._frame.clone(),g=a.baseTexture.resolution;f.x*=g,f.y*=g,f.width*=g,f.height*=g,c.width=f.width,c.height=f.height,e.globalCompositeOperation="copy",e.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);for(var h=d.hex2rgb(b),i=h[0],j=h[1],k=h[2],l=e.getImageData(0,0,f.width,f.height),m=l.data,n=0;n<m.length;n+=4)m[n+0]*=i,m[n+1]*=j,m[n+2]*=k;e.putImageData(l,0,0)},roundColor:function(a){var b=f.cacheStepsPerColorChannel,c=d.hex2rgb(a);return c[0]=Math.min(255,c[0]/b*b),c[1]=Math.min(255,c[1]/b*b),c[2]=Math.min(255,c[2]/b*b),d.rgb2hex(c)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:e(),tintMethod:0};f.tintMethod=f.canUseMultiply?f.tintWithMultiply:f.tintWithPerPixel},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":112,"../../utils":151}],136:[function(a,b,c){var d=function(a){this.vertices=new ArrayBuffer(a),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)};b.exports=d,d.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null}},{}],137:[function(a,b,c){function d(a){e.call(this,a),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=k.SPRITE_BATCH_SIZE,this.buffers=[];for(var b=1;b<=m.nextPow2(this.size);b*=2){var c=4*b*this.vertByteSize;this.buffers.push(new j(c))}this.indices=g(this.size),this.shaders=null,this.currentIndex=0,n=0,this.groups=[];for(var d=0;d<this.size;d++)this.groups[d]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};this.sprites=[],this.vertexBuffers=[],this.vaos=[],this.vaoMax=2,this.vertexCount=0,this.renderer.on("prerender",this.onPrerender,this)}var e=a("../../renderers/webgl/utils/ObjectRenderer"),f=a("../../renderers/webgl/WebGLRenderer"),g=a("../../utils/createIndicesForQuads"),h=a("./generateMultiTextureShader"),i=a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),j=a("./BatchBuffer"),k=a("../../const"),l=a("pixi-gl-core"),m=a("bit-twiddle"),n=0;d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,f.registerPlugin("sprite",d),d.prototype.onContextChange=function(){var a=this.renderer.gl;this.MAX_TEXTURES=Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),k.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=i(this.MAX_TEXTURES,a),this.shaders=new Array(this.MAX_TEXTURES),this.shaders[0]=h(a,1),this.shaders[1]=h(a,2),this.indexBuffer=l.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW);for(var b=this.shaders[1],c=0;c<this.vaoMax;c++)this.vertexBuffers[c]=l.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),this.vaos[c]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[c],b.attributes.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[c],b.attributes.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[c],b.attributes.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[c],b.attributes.aTextureId,a.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999},d.prototype.onPrerender=function(){this.vertexCount=0},d.prototype.render=function(a){this.currentIndex>=this.size&&this.flush(),a.texture._uvs&&(this.sprites[this.currentIndex++]=a)},d.prototype.flush=function(){if(0!==this.currentIndex){var a,b,c,d,e,f,g,i=this.renderer.gl,j=m.nextPow2(this.currentIndex),k=m.log2(j),o=this.buffers[k],p=this.sprites,q=this.groups,r=o.float32View,s=o.uint32View,t=0,u=1,v=0,w=q[0],x=p[0].blendMode;w.textureCount=0,w.start=0,w.blend=x,n++;for(var y=0;y<this.currentIndex;y++){var z=p[y];if(a=z._texture.baseTexture,x!==z.blendMode&&(x=z.blendMode,b=null,v=this.MAX_TEXTURES,n++),b!==a&&(b=a,a._enabled!==n&&(v===this.MAX_TEXTURES&&(n++,v=0,w.size=y-w.start,w=q[u++],w.textureCount=0,w.blend=x,w.start=y),a._enabled=n,a._id=v,w.textures[w.textureCount++]=a,v++)),c=z.vertexData,d=z._tintRGB+(255*z.worldAlpha<<24),e=z._texture._uvs.uvsUint32,f=a._id,this.renderer.roundPixels){var A=this.renderer.resolution;r[t]=(c[0]*A|0)/A,r[t+1]=(c[1]*A|0)/A,r[t+5]=(c[2]*A|0)/A,r[t+6]=(c[3]*A|0)/A,r[t+10]=(c[4]*A|0)/A,r[t+11]=(c[5]*A|0)/A,r[t+15]=(c[6]*A|0)/A,r[t+16]=(c[7]*A|0)/A}else r[t]=c[0],r[t+1]=c[1],r[t+5]=c[2],r[t+6]=c[3],r[t+10]=c[4],r[t+11]=c[5],r[t+15]=c[6],r[t+16]=c[7];s[t+2]=e[0],s[t+7]=e[1],s[t+12]=e[2],s[t+17]=e[3],s[t+3]=s[t+8]=s[t+13]=s[t+18]=d,r[t+4]=r[t+9]=r[t+14]=r[t+19]=f,t+=20}for(w.size=y-w.start,this.vertexCount++,this.vaoMax<=this.vertexCount&&(this.vaoMax++,g=this.shaders[1],this.vertexBuffers[this.vertexCount]=l.GLBuffer.createVertexBuffer(i,null,i.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],g.attributes.aVertexPosition,i.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],g.attributes.aTextureCoord,i.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],g.attributes.aColor,i.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],g.attributes.aTextureId,i.FLOAT,!1,this.vertByteSize,16)),this.vertexBuffers[this.vertexCount].upload(o.vertices,0),this.vao=this.vaos[this.vertexCount].bind(),y=0;u>y;y++){var B=q[y],C=B.textureCount;g=this.shaders[C-1],g||(g=this.shaders[C-1]=h(i,C)),this.renderer.bindShader(g);for(var D=0;C>D;D++)this.renderer.bindTexture(B.textures[D],D);this.renderer.state.setBlendMode(B.blend),i.drawElements(i.TRIANGLES,6*B.size,i.UNSIGNED_SHORT,6*B.start*2)}this.currentIndex=0}},d.prototype.start=function(){},d.prototype.stop=function(){this.flush(),this.vao.unbind()},d.prototype.destroy=function(){for(var a=0;a<this.vaoMax;a++)this.vertexBuffers[a].destroy(),this.vaos[a].destroy();for(this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),a=0;a<this.shaders.length;a++)this.shaders[a]&&this.shaders[a].destroy();for(this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null,a=0;a<this.buffers.length;a++)this.buffers[a].destroy()}},{"../../const":78,"../../renderers/webgl/WebGLRenderer":116,"../../renderers/webgl/utils/ObjectRenderer":126,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":129,"../../utils/createIndicesForQuads":149,"./BatchBuffer":136,"./generateMultiTextureShader":138,"bit-twiddle":1,"pixi-gl-core":12}],138:[function(a,b,c){function d(a,b){var c="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vTextureId = aTextureId;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",d=g;d=d.replace(/%count%/gi,b),d=d.replace(/%forloop%/gi,e(b));for(var h=new f(a,c,d),i=[],j=0;b>j;j++)i[j]=j;return h.bind(),h.uniforms.uSamplers=i,h}function e(a){var b="";b+="\n",b+="\n";for(var c=0;a>c;c++)c>0&&(b+="\nelse "),a-1>c&&(b+="if(textureId == "+c+".0)"),b+="\n{",b+="\n\tcolor = texture2D(uSamplers["+c+"], vTextureCoord);",b+="\n}";return b+="\n",b+="\n"}var f=a("../../Shader"),g=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");b.exports=d},{"../../Shader":77}],139:[function(a,b,c){function d(a,b){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i.RESOLUTION,this._text=null,this._style=null,this._styleListener=null,this._font="";var c=f.fromCanvas(this.canvas);c.orig=new g.Rectangle,c.trim=new g.Rectangle,e.call(this,c),this.text=a,this.style=b,this.localStyleID=-1}var e=a("../sprites/Sprite"),f=a("../textures/Texture"),g=a("../math"),h=a("../utils"),i=a("../const"),j=a("./TextStyle"),k={texture:!0,children:!1,baseTexture:!0};d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.fontPropertiesCache={},d.fontPropertiesCanvas=document.createElement("canvas"),d.fontPropertiesContext=d.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(d.prototype,{
width:{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){this.updateText(!0);var b=h.sign(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},height:{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var b=h.sign(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},style:{get:function(){return this._style},set:function(a){a=a||{},a instanceof j?this._style=a:this._style=new j(a),this.localStyleID=-1,this.dirty=!0}},text:{get:function(){return this._text},set:function(a){a=a||" ",a=a.toString(),this._text!==a&&(this._text=a,this.dirty=!0)}}}),d.prototype.updateText=function(a){var b=this._style;if(this.localStyleID!==b.styleID&&(this.dirty=!0,this.localStyleID=b.styleID),this.dirty||!a){var c="number"==typeof b.fontSize?b.fontSize+"px":b.fontSize;this._font=b.fontStyle+" "+b.fontVariant+" "+b.fontWeight+" "+c+" "+b.fontFamily,this.context.font=this._font;var d,e=b.wordWrap?this.wordWrap(this._text):this._text,f=e.split(/(?:\r\n|\r|\n)/),g=new Array(f.length),h=0,i=this.determineFontProperties(this._font);for(d=0;d<f.length;d++){var j=this.context.measureText(f[d]).width+(f[d].length-1)*b.letterSpacing;g[d]=j,h=Math.max(h,j)}var k=h+b.strokeThickness;b.dropShadow&&(k+=b.dropShadowDistance),k+=2*b.padding,this.canvas.width=Math.ceil((k+this.context.lineWidth)*this.resolution);var l=this.style.lineHeight||i.fontSize+b.strokeThickness,m=Math.max(l,i.fontSize+b.strokeThickness)+(f.length-1)*l;b.dropShadow&&(m+=b.dropShadowDistance),this.canvas.height=Math.ceil((m+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=b.stroke,this.context.lineWidth=b.strokeThickness,this.context.textBaseline=b.textBaseline,this.context.lineJoin=b.lineJoin,this.context.miterLimit=b.miterLimit;var n,o;if(b.dropShadow){b.dropShadowBlur>0?(this.context.shadowColor=b.dropShadowColor,this.context.shadowBlur=b.dropShadowBlur):this.context.fillStyle=b.dropShadowColor;var p=Math.cos(b.dropShadowAngle)*b.dropShadowDistance,q=Math.sin(b.dropShadowAngle)*b.dropShadowDistance;for(d=0;d<f.length;d++)n=b.strokeThickness/2,o=b.strokeThickness/2+d*l+i.ascent,"right"===b.align?n+=h-g[d]:"center"===b.align&&(n+=(h-g[d])/2),b.fill&&(this.drawLetterSpacing(f[d],n+p+b.padding,o+q+b.padding),b.stroke&&b.strokeThickness&&(this.context.strokeStyle=b.dropShadowColor,this.drawLetterSpacing(f[d],n+p+b.padding,o+q+b.padding,!0),this.context.strokeStyle=b.stroke))}for(this.context.fillStyle=this._generateFillStyle(b,f),d=0;d<f.length;d++)n=b.strokeThickness/2,o=b.strokeThickness/2+d*l+i.ascent,"right"===b.align?n+=h-g[d]:"center"===b.align&&(n+=(h-g[d])/2),b.stroke&&b.strokeThickness&&this.drawLetterSpacing(f[d],n+b.padding,o+b.padding,!0),b.fill&&this.drawLetterSpacing(f[d],n+b.padding,o+b.padding);this.updateTexture()}},d.prototype.drawLetterSpacing=function(a,b,c,d){var e=this._style,f=e.letterSpacing;if(0===f)return void(d?this.context.strokeText(a,b,c):this.context.fillText(a,b,c));for(var g,h=String.prototype.split.call(a,""),i=0,j=b;i<a.length;)g=h[i++],d?this.context.strokeText(g,j,c):this.context.fillText(g,j,c),j+=this.context.measureText(g).width+f},d.prototype.updateTexture=function(){var a=this._texture,b=this._style;a.baseTexture.hasLoaded=!0,a.baseTexture.resolution=this.resolution,a.baseTexture.realWidth=this.canvas.width,a.baseTexture.realHeight=this.canvas.height,a.baseTexture.width=this.canvas.width/this.resolution,a.baseTexture.height=this.canvas.height/this.resolution,a.trim.width=a._frame.width=this.canvas.width/this.resolution,a.trim.height=a._frame.height=this.canvas.height/this.resolution,a.trim.x=-b.padding,a.trim.y=-b.padding,a.orig.width=a._frame.width,a.orig.height=a._frame.height-2*b.padding,this._onTextureUpdate(),a.baseTexture.emit("update",a.baseTexture),this.dirty=!1},d.prototype.renderWebGL=function(a){this.resolution!==a.resolution&&(this.resolution=a.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,a)},d.prototype._renderCanvas=function(a){this.resolution!==a.resolution&&(this.resolution=a.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,a)},d.prototype.determineFontProperties=function(a){var b=d.fontPropertiesCache[a];if(!b){b={};var c=d.fontPropertiesCanvas,e=d.fontPropertiesContext;e.font=a;var f=Math.ceil(e.measureText("|Mq").width),g=Math.ceil(e.measureText("M").width),h=2*g;g=1.4*g|0,c.width=f,c.height=h,e.fillStyle="#f00",e.fillRect(0,0,f,h),e.font=a,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText("|Mq",0,g);var i,j,k=e.getImageData(0,0,f,h).data,l=k.length,m=4*f,n=0,o=!1;for(i=0;g>i;i++){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n+=m}for(b.ascent=g-i,n=l-m,o=!1,i=h;i>g;i--){for(j=0;m>j;j+=4)if(255!==k[n+j]){o=!0;break}if(o)break;n-=m}b.descent=i-g,b.fontSize=b.ascent+b.descent,d.fontPropertiesCache[a]=b}return b},d.prototype.wordWrap=function(a){for(var b="",c=a.split("\n"),d=this._style.wordWrapWidth,e=0;e<c.length;e++){for(var f=d,g=c[e].split(" "),h=0;h<g.length;h++){var i=this.context.measureText(g[h]).width;if(this._style.breakWords&&i>d)for(var j=g[h].split(""),k=0;k<j.length;k++){var l=this.context.measureText(j[k]).width;l>f?(b+="\n"+j[k],f=d-l):(0===k&&(b+=" "),b+=j[k],f-=l)}else{var m=i+this.context.measureText(" ").width;0===h||m>f?(h>0&&(b+="\n"),b+=g[h],f=d-i):(f-=m,b+=" "+g[h])}}e<c.length-1&&(b+="\n")}return b},d.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},d.prototype._onStyleChange=function(){this.dirty=!0},d.prototype._generateFillStyle=function(a,b){if(Array.isArray(a.fill)){var c,d,e,f,g,h=this.canvas.width/this.resolution,j=this.canvas.height/this.resolution;if(a.fillGradientType===i.TEXT_GRADIENT.LINEAR_VERTICAL)for(d=this.context.createLinearGradient(h/2,0,h/2,j),e=(a.fill.length+1)*b.length,f=0,c=0;c<b.length;c++){f+=1;for(var k=0;k<a.fill.length;k++)g=f/e,d.addColorStop(g,a.fill[k]),f++}else for(d=this.context.createLinearGradient(0,j/2,h,j/2),e=a.fill.length+1,f=1,c=0;c<a.fill.length;c++)g=f/e,d.addColorStop(g,a.fill[c]),f++;return d}return a.fill},d.prototype.destroy=function(a){"boolean"==typeof a&&(a={children:a}),a=Object.assign({},k,a),e.prototype.destroy.call(this,a),this.context=null,this.canvas=null,this._style=null}},{"../const":78,"../math":102,"../sprites/Sprite":133,"../textures/Texture":144,"../utils":151,"./TextStyle":140}],140:[function(a,b,c){function d(a){this.styleID=0,Object.assign(this,this._defaults,a)}function e(a){if("number"==typeof a)return g.hex2string(a);if(Array.isArray(a))for(var b=0;b<a.length;++b)"number"==typeof a[b]&&(a[b]=g.hex2string(a[b]));return a}var f=a("../const"),g=a("../utils");d.prototype.constructor=d,b.exports=d,d.prototype._defaults={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:f.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",wordWrap:!1,wordWrapWidth:100},d.prototype.clone=function(){var a={};for(var b in this._defaults)a[b]=this[b];return new d(a)},d.prototype.reset=function(){Object.assign(this,this._defaults)},Object.defineProperties(d.prototype,{align:{get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)}},breakWords:{get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)}},dropShadow:{get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)}},dropShadowAngle:{get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)}},dropShadowBlur:{get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)}},dropShadowColor:{get:function(){return this._dropShadowColor},set:function(a){var b=e(a);this._dropShadowColor!==b&&(this._dropShadowColor=b,this.styleID++)}},dropShadowDistance:{get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)}},fill:{get:function(){return this._fill},set:function(a){var b=e(a);this._fill!==b&&(this._fill=b,this.styleID++)}},fillGradientType:{get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)}},fontFamily:{get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)}},fontSize:{get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)}},fontStyle:{get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)}},fontVariant:{get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)}},fontWeight:{get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)}},letterSpacing:{get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)}},lineHeight:{get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)}},lineJoin:{get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)}},miterLimit:{get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)}},padding:{get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)}},stroke:{get:function(){return this._stroke},set:function(a){var b=e(a);this._stroke!==b&&(this._stroke=b,this.styleID++)}},strokeThickness:{get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)}},textBaseline:{get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)}},wordWrap:{get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.styleID++)}},wordWrapWidth:{get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)}}})},{"../const":78,"../utils":151}],141:[function(a,b,c){function d(a,b,c,d){e.call(this,null,c),this.resolution=d||f.RESOLUTION,this.width=a||100,this.height=b||100,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.scaleMode=c||f.SCALE_MODES.DEFAULT,this.hasLoaded=!0,this._glRenderTargets=[],this._canvasRenderTarget=null,this.valid=!1}var e=a("./BaseTexture"),f=a("../const");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.resize=function(a,b){a===this.width&&b===this.height||(this.valid=a>0&&b>0,this.width=a,this.height=b,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},d.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null}},{"../const":78,"./BaseTexture":142}],142:[function(a,b,c){function d(a,b,c){g.call(this),this.uid=e.uid(),this.touched=0,this.resolution=c||f.RESOLUTION,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=b||f.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=f.MIPMAP_TEXTURES,this.wrapMode=f.WRAP_MODES.DEFAULT,this._glTextures=[],this._enabled=0,this._id=0,a&&this.loadSource(a)}var e=a("../utils"),f=a("../const"),g=a("eventemitter3"),h=a("../utils/determineCrossOrigin"),i=a("bit-twiddle");d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=i.isPow2(this.realWidth)&&i.isPow2(this.realHeight),this.emit("update",this)},d.prototype.loadSource=function(a){var b=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,b&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=a,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!a.getContext){this.isLoading=!0;var c=this;a.onload=function(){a.onload=null,a.onerror=null,c.isLoading&&(c.isLoading=!1,c._sourceLoaded(),c.emit("loaded",c))},a.onerror=function(){a.onload=null,a.onerror=null,c.isLoading&&(c.isLoading=!1,c.emit("error",c))},a.complete&&a.src&&(this.isLoading=!1,a.onload=null,a.onerror=null,a.width&&a.height?(this._sourceLoaded(),b&&this.emit("loaded",this)):b&&this.emit("error",this))}},d.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},d.prototype.destroy=function(){this.imageUrl?(delete e.BaseTextureCache[this.imageUrl],delete e.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete e.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},d.prototype.dispose=function(){this.emit("dispose",this)},d.prototype.updateSourceImage=function(a){this.source.src=a,this.loadSource(this.source)},d.fromImage=function(a,b,c){var f=e.BaseTextureCache[a];if(!f){var g=new Image;void 0===b&&0!==a.indexOf("data:")&&(g.crossOrigin=h(a)),f=new d(g,c),f.imageUrl=a,g.src=a,e.BaseTextureCache[a]=f,f.resolution=e.getResolutionOfUrl(a)}return f},d.fromCanvas=function(a,b){a._pixiId||(a._pixiId="canvas_"+e.uid());var c=e.BaseTextureCache[a._pixiId];return c||(c=new d(a,b),e.BaseTextureCache[a._pixiId]=c),c}},{"../const":78,"../utils":151,"../utils/determineCrossOrigin":150,"bit-twiddle":1,eventemitter3:3}],143:[function(a,b,c){function d(a,b){if(this.legacyRenderer=null,!(a instanceof e)){var c=arguments[1],d=arguments[2],g=arguments[3]||0,h=arguments[4]||1;console.warn("v4 RenderTexture now expects a new BaseRenderTexture. Please use RenderTexture.create("+c+", "+d+")"),this.legacyRenderer=arguments[0],b=null,a=new e(c,d,g,h)}f.call(this,a,b),this.valid=!0,this._updateUvs()}var e=a("./BaseRenderTexture"),f=a("./Texture");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.resize=function(a,b,c){this.valid=a>0&&b>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=b,c||this.baseTexture.resize(a,b),this._updateUvs()},d.create=function(a,b,c,f){return new d(new e(a,b,c,f))}},{"./BaseRenderTexture":141,"./Texture":144}],144:[function(a,b,c){function d(a,b,c,e,f){if(h.call(this),this.noFrame=!1,b||(this.noFrame=!0,b=new i.Rectangle(0,0,1,1)),a instanceof d&&(a=a.baseTexture),this.baseTexture=a,this._frame=b,this.trim=e,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.orig=c||b,this._rotate=+(f||0),f===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";a.hasLoaded?(this.noFrame&&(b=new i.Rectangle(0,0,a.width,a.height),a.on("update",this.onBaseTextureUpdated,this)),this.frame=b):a.once("loaded",this.onBaseTextureLoaded,this),this._updateID=0}var e=a("./BaseTexture"),f=a("./VideoBaseTexture"),g=a("./TextureUvs"),h=a("eventemitter3"),i=a("../math"),j=a("../utils");d.prototype=Object.create(h.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{frame:{get:function(){return this._frame},set:function(a){if(this._frame=a,this.noFrame=!1,a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=a),this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(a){this._rotate=a,this.valid&&this._updateUvs()}},width:{get:function(){return this.orig?this.orig.width:0}},height:{get:function(){return this.orig?this.orig.height:0}}}),d.prototype.update=function(){this.baseTexture.update()},d.prototype.onBaseTextureLoaded=function(a){this._updateID++,this.noFrame?this.frame=new i.Rectangle(0,0,a.width,a.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},d.prototype.onBaseTextureUpdated=function(a){this._updateID++,this._frame.width=a.width,this._frame.height=a.height,this.emit("update",this)},d.prototype.destroy=function(a){this.baseTexture&&(a&&(j.TextureCache[this.baseTexture.imageUrl]&&delete j.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},d.prototype.clone=function(){return new d(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},d.prototype._updateUvs=function(){this._uvs||(this._uvs=new g),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},d.fromImage=function(a,b,c){var f=j.TextureCache[a];return f||(f=new d(e.fromImage(a,b,c)),j.TextureCache[a]=f),f},d.fromFrame=function(a){var b=j.TextureCache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return b},d.fromCanvas=function(a,b){return new d(e.fromCanvas(a,b))},d.fromVideo=function(a,b){return"string"==typeof a?d.fromVideoUrl(a,b):new d(f.fromVideo(a,b))},d.fromVideoUrl=function(a,b){return new d(f.fromUrl(a,b))},d.from=function(a){if("string"==typeof a){var b=j.TextureCache[a];if(!b){var c=null!==a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return c?d.fromVideoUrl(a):d.fromImage(a)}return b}return a instanceof HTMLCanvasElement?d.fromCanvas(a):a instanceof HTMLVideoElement?d.fromVideo(a):a instanceof e?new d(e):void 0},d.addTextureToCache=function(a,b){j.TextureCache[b]=a},d.removeTextureFromCache=function(a){var b=j.TextureCache[a];return delete j.TextureCache[a],delete j.BaseTextureCache[a],b},d.EMPTY=new d(new e),d.EMPTY.destroy=function(){},d.EMPTY.on=function(){},d.EMPTY.once=function(){},d.EMPTY.emit=function(){}},{"../math":102,"../utils":151,"./BaseTexture":142,"./TextureUvs":145,"./VideoBaseTexture":146,eventemitter3:3}],145:[function(a,b,c){function d(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}b.exports=d;var e=a("../math/GroupD8");d.prototype.set=function(a,b,c){var d=b.width,f=b.height;if(c){var g=a.width/2/d,h=a.height/2/f,i=a.x/d+g,j=a.y/f+h;c=e.add(c,e.NW),this.x0=i+g*e.uX(c),this.y0=j+h*e.uY(c),c=e.add(c,2),this.x1=i+g*e.uX(c),this.y1=j+h*e.uY(c),c=e.add(c,2),this.x2=i+g*e.uX(c),this.y2=j+h*e.uY(c),c=e.add(c,2),this.x3=i+g*e.uX(c),this.y3=j+h*e.uY(c)}else this.x0=a.x/d,this.y0=a.y/f,this.x1=(a.x+a.width)/d,this.y1=a.y/f,this.x2=(a.x+a.width)/d,this.y2=(a.y+a.height)/f,this.x3=a.x/d,this.y3=(a.y+a.height)/f;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535}},{"../math/GroupD8":98}],146:[function(a,b,c){function d(a,b){if(!a)throw new Error("No video source element specified.");(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0),f.call(this,a,b),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),a.complete||(a.addEventListener("canplay",this._onCanPlay),a.addEventListener("canplaythrough",this._onCanPlay),a.addEventListener("play",this._onPlayStart.bind(this)),a.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function e(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");return c.src=a,c.type=b,c}var f=a("./BaseTexture"),g=a("../utils");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,d.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},d.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},d.prototype._onPlayStop=function(){this.autoUpdate=!1},d.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},d.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete g.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),f.prototype.destroy.call(this)},d.fromVideo=function(a,b){a._pixiId||(a._pixiId="video_"+g.uid());var c=g.BaseTextureCache[a._pixiId];return c||(c=new d(a,b),g.BaseTextureCache[a._pixiId]=c),c},d.fromUrl=function(a,b){var c=document.createElement("video");if(Array.isArray(a))for(var f=0;f<a.length;++f)c.appendChild(e(a[f].src||a[f],a[f].mime));else c.appendChild(e(a.src||a,a.mime));return c.load(),c.play(),d.fromVideo(c,b)},d.fromUrls=d.fromUrl},{"../utils":151,"./BaseTexture":142}],147:[function(a,b,c){function d(){var a=this;this._tick=function(b){a._requestId=null,a.started&&(a.update(b),a.started&&null===a._requestId&&a._emitter.listeners(g,!0)&&(a._requestId=requestAnimationFrame(a._tick)))},this._emitter=new f,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/e.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var e=a("../const"),f=a("eventemitter3"),g="tick";Object.defineProperties(d.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(a){var b=Math.min(Math.max(0,a)/1e3,e.TARGET_FPMS);this._maxElapsedMS=1/b}}}),d.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(g,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},d.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},d.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},d.prototype.add=function(a,b){return this._emitter.on(g,a,b),this._startIfPossible(),this},d.prototype.addOnce=function(a,b){return this._emitter.once(g,a,b),this._startIfPossible(),this},d.prototype.remove=function(a,b){return this._emitter.off(g,a,b),this._emitter.listeners(g,!0)||this._cancelIfNeeded(),this},d.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},d.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},d.prototype.update=function(a){var b;a=a||performance.now(),a>this.lastTime?(b=this.elapsedMS=a-this.lastTime,b>this._maxElapsedMS&&(b=this._maxElapsedMS),this.deltaTime=b*e.TARGET_FPMS*this.speed,this._emitter.emit(g,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=a},b.exports=d},{"../const":78,eventemitter3:3}],148:[function(a,b,c){var d=a("./Ticker"),e=new d;e.autoStart=!0,b.exports={shared:e,Ticker:d}},{"./Ticker":147}],149:[function(a,b,c){var d=function(a){for(var b=6*a,c=new Uint16Array(b),d=0,e=0;b>d;d+=6,e+=4)c[d+0]=e+0,c[d+1]=e+1,c[d+2]=e+2,c[d+3]=e+0,c[d+4]=e+2,c[d+5]=e+3;return c};b.exports=d},{}],150:[function(a,b,c){var d,e=a("url"),f=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location,d||(d=document.createElement("a")),d.href=a,a=e.parse(d.href);var c=!a.port&&""===b.port||a.port===b.port;return a.hostname===b.hostname&&c&&a.protocol===b.protocol?"":"anonymous"};b.exports=f},{url:28}],151:[function(a,b,c){var d=a("../const"),e=b.exports={_uid:0,_saidHello:!1,EventEmitter:a("eventemitter3"),pluginTarget:a("./pluginTarget"),uid:function(){return++e._uid},hex2rgb:function(a,b){return b=b||[],b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b},hex2string:function(a){return a=a.toString(16),a="000000".substr(0,6-a.length)+a,"#"+a},rgb2hex:function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},getResolutionOfUrl:function(a){var b=d.RETINA_PREFIX.exec(a);return b?parseFloat(b[1]):1},sayHello:function(a){if(!e._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["\n %c %c %c Pixi.js "+d.VERSION+" -  "+a+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,b)}else window.console&&window.console.log("Pixi.js "+d.VERSION+" - "+a+" - http://www.pixijs.com/");e._saidHello=!0}},isWebGLSupported:function(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a),d=!(!c||!c.getContextAttributes().stencil);if(c){var e=c.getExtension("WEBGL_lose_context");e&&e.loseContext()}return c=null,d}catch(a){return!1}},sign:function(a){return a?0>a?-1:1:0},removeItems:function(a,b,c){var d=a.length;if(!(b>=d||0===c)){c=b+c>d?d-b:c;for(var e=b,f=d-c;f>e;++e)a[e]=a[e+c];a.length=f}},TextureCache:{},BaseTextureCache:{}}},{"../const":78,"./pluginTarget":153,eventemitter3:3}],152:[function(a,b,c){var d=a("ismobilejs"),e=function(a){return d.tablet||d.phone?2:a};b.exports=e},{ismobilejs:4}],153:[function(a,b,c){function d(a){a.__plugins={},a.registerPlugin=function(b,c){a.__plugins[b]=c},a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var b in a.__plugins)this.plugins[b]=new a.__plugins[b](this)},a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}b.exports={mixin:function(a){d(a)}}},{}],154:[function(a,b,c){function d(a){var b=(new Error).stack;"undefined"==typeof b?console.warn("Deprecation Warning: ",a):(b=b.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a),console.warn(b),console.groupEnd()):(console.warn("Deprecation Warning: ",a),console.warn(b)))}var e=a("./core"),f=a("./mesh"),g=a("./particles"),h=a("./extras"),i=a("./filters");e.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},e.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(e,{Stage:{get:function(){return d("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return d("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return d("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),f.Mesh}},Rope:{get:function(){return d("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),f.Rope}},ParticleContainer:{get:function(){return d("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),g.ParticleContainer}},MovieClip:{get:function(){return d("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),h.MovieClip}},TilingSprite:{get:function(){return d("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),h.TilingSprite}},BitmapText:{get:function(){return d("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),h.BitmapText}},blendModes:{get:function(){return d("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return d("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return d("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return d("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return d("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return d("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return d("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}}}),e.DisplayObject.prototype.generateTexture=function(a,b,c){return d("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),a.generateTexture(this,b,c)},e.Graphics.prototype.generateTexture=function(a,b){return d("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(a,b)},e.RenderTexture.prototype.render=function(a,b,c,e){this.legacyRenderer.render(a,this,c,b,!e),d("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(a){return d("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(a)},e.RenderTexture.prototype.getBase64=function(a){return d("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(a)},e.RenderTexture.prototype.getCanvas=function(a){return d("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(a)},e.RenderTexture.prototype.getPixels=function(a){return d("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(a)},e.Sprite.prototype.setTexture=function(a){this.texture=a,d("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},h.BitmapText.prototype.setText=function(a){this.text=a,d("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},e.Text.prototype.setText=function(a){this.text=a,d("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.prototype.setStyle=function(a){this.style=a,d("setStyle is now deprecated, please use the style property, e.g : myText.style = style;");
},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){d("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on");var a="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+a+" "+this._fontFamily},set:function(a){d("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),a.indexOf("italic")>1?this._fontStyle="italic":a.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",a.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var b,c=a.split(" "),e=-1;for(this._fontSize=26,b=0;b<c.length;++b)if(c[b].match(/(px|pt|em|%)/)){e=b,this._fontSize=c[b];break}for(this._fontWeight="normal",b=0;e>b;++b)if(c[b].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=c[b];break}if(e>-1&&e<c.length-1){for(this._fontFamily="",b=e+1;b<c.length;++b)this._fontFamily+=c[b]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(a){this.frame=a,d("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(i,{AbstractFilter:{get:function(){return d("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return d("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}}}),e.utils.uuid=function(){return d("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return d("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply}},{"./core":97,"./extras":164,"./filters":175,"./mesh":191,"./particles":194}],155:[function(a,b,c){function d(a){this.renderer=a,a.extract=this}var e=a("../../core"),f=new e.Rectangle;d.prototype.constructor=d,b.exports=d,d.prototype.image=function(a){var b=new Image;return b.src=this.base64(a),b},d.prototype.base64=function(a){return this.canvas(a).toDataURL()},d.prototype.canvas=function(a){var b,c,d,g,h=this.renderer;a&&(g=a instanceof e.RenderTexture?a:h.generateTexture(a)),g?(b=g.baseTexture._canvasRenderTarget.context,c=g.baseTexture._canvasRenderTarget.resolution,d=g.frame):(b=h.rootContext,c=h.rootResolution,d=f,d.width=this.renderer.width,d.height=this.renderer.height);var i=d.width*c,j=d.height*c,k=new e.CanvasRenderTarget(i,j),l=b.getImageData(d.x*c,d.y*c,i,j);return k.context.putImageData(l,0,0),k.canvas},d.prototype.pixels=function(a){var b,c,d,g,h=this.renderer;return a&&(g=a instanceof e.RenderTexture?a:h.generateTexture(a)),g?(b=g.baseTexture._canvasRenderTarget.context,c=g.baseTexture._canvasRenderTarget.resolution,d=g.frame):(b=h.rootContext,c=h.rootResolution,d=f,d.width=h.width,d.height=h.height),b.getImageData(0,0,d.width*c,d.height*c).data},d.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.CanvasRenderer.registerPlugin("extract",d)},{"../../core":97}],156:[function(a,b,c){b.exports={webGL:a("./webgl/WebGLExtract"),canvas:a("./canvas/CanvasExtract")}},{"./canvas/CanvasExtract":155,"./webgl/WebGLExtract":157}],157:[function(a,b,c){function d(a){this.renderer=a,a.extract=this}var e=a("../../core"),f=new e.Rectangle;d.prototype.constructor=d,b.exports=d,d.prototype.image=function(a){var b=new Image;return b.src=this.base64(a),b},d.prototype.base64=function(a){return this.canvas(a).toDataURL()},d.prototype.canvas=function(a){var b,c,d,g,h=this.renderer,i=!1;a&&(g=a instanceof e.RenderTexture?a:this.renderer.generateTexture(a)),g?(b=g.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],c=b.resolution,d=g.frame,i=!1):(b=this.renderer.rootRenderTarget,c=b.resolution,i=!0,d=f,d.width=b.size.width,d.height=b.size.height);var j=d.width*c,k=d.height*c,l=new e.CanvasRenderTarget(j,k);if(b){h.bindRenderTarget(b);var m=new Uint8Array(4*j*k),n=h.gl;n.readPixels(d.x*c,d.y*c,j,k,n.RGBA,n.UNSIGNED_BYTE,m);var o=l.context.getImageData(0,0,j,k);o.data.set(m),l.context.putImageData(o,0,0),i&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-k))}return l.canvas},d.prototype.pixels=function(a){var b,c,d,g,h=this.renderer;a&&(g=a instanceof e.RenderTexture?a:this.renderer.generateTexture(a)),g?(b=g.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],c=b.resolution,d=g.frame):(b=this.renderer.rootRenderTarget,c=b.resolution,d=f,d.width=b.size.width,d.height=b.size.height);var i=d.width*c,j=d.height*c,k=new Uint8Array(4*i*j);if(b){h.bindRenderTarget(b);var l=h.gl;l.readPixels(d.x*c,d.y*c,i,j,l.RGBA,l.UNSIGNED_BYTE,k)}return k},d.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.WebGLRenderer.registerPlugin("extract",d)},{"../../core":97}],158:[function(a,b,c){function d(a,b){e.Container.call(this),b=b||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==b.tint?b.tint:16777215,align:b.align||"left",name:null,size:0},this.font=b.font,this._text=a,this.maxWidth=0,this.maxLineHeight=0,this._anchor=new f(this.makeDirty,this,0,0),this.dirty=!1,this.updateText()}var e=a("../core"),f=a("../core/math/ObservablePoint");d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{tint:{get:function(){return this._font.tint},set:function(a){this._font.tint="number"==typeof a&&a>=0?a:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(a){this._font.align=a||"left",this.dirty=!0}},anchor:{get:function(){return this._anchor},set:function(a){"number"==typeof a?this._anchor.set(a):this._anchor.copy(a)}},font:{get:function(){return this._font},set:function(a){a&&("string"==typeof a?(a=a.split(" "),this._font.name=1===a.length?a[0]:a.slice(1).join(" "),this._font.size=a.length>=2?parseInt(a[0],10):d.fonts[this._font.name].size):(this._font.name=a.name,this._font.size="number"==typeof a.size?a.size:parseInt(a.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(a){a=a.toString()||" ",this._text!==a&&(this._text=a,this.dirty=!0)}}}),d.prototype.updateText=function(){for(var a=d.fonts[this._font.name],b=new e.Point,c=null,f=[],g=0,h=0,i=[],j=0,k=this._font.size/a.size,l=-1,m=0,n=0,o=0;o<this.text.length;o++){var p=this.text.charCodeAt(o);if(/(\s)/.test(this.text.charAt(o))&&(l=o,m=g),/(?:\r\n|\r|\n)/.test(this.text.charAt(o)))i.push(g),h=Math.max(h,g),j++,b.x=0,b.y+=a.lineHeight,c=null;else if(-1!==l&&this.maxWidth>0&&b.x*k>this.maxWidth)e.utils.removeItems(f,l,o-l),o=l,l=-1,i.push(m),h=Math.max(h,m),j++,b.x=0,b.y+=a.lineHeight,c=null;else{var q=a.chars[p];q&&(c&&q.kerning[c]&&(b.x+=q.kerning[c]),f.push({texture:q.texture,line:j,charCode:p,position:new e.Point(b.x+q.xOffset,b.y+q.yOffset)}),g=b.x+(q.texture.width+q.xOffset),b.x+=q.xAdvance,n=Math.max(n,q.yOffset+q.texture.height),c=p)}}i.push(g),h=Math.max(h,g);var r=[];for(o=0;j>=o;o++){var s=0;"right"===this._font.align?s=h-i[o]:"center"===this._font.align&&(s=(h-i[o])/2),r.push(s)}var t=f.length,u=this.tint;for(o=0;t>o;o++){var v=this._glyphs[o];v?v.texture=f[o].texture:(v=new e.Sprite(f[o].texture),this._glyphs.push(v)),v.position.x=(f[o].position.x+r[f[o].line])*k,v.position.y=f[o].position.y*k,v.scale.x=v.scale.y=k,v.tint=u,v.parent||this.addChild(v)}for(o=t;o<this._glyphs.length;++o)this.removeChild(this._glyphs[o]);if(this.textWidth=h*k,this.textHeight=(b.y+a.lineHeight)*k,0!==this.anchor.x||0!==this.anchor.y)for(o=0;t>o;o++)this._glyphs[o].x-=this.textWidth*this.anchor.x,this._glyphs[o].y-=this.textHeight*this.anchor.y;this.maxLineHeight=n*k},d.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},d.prototype.getLocalBounds=function(){return this.validate(),e.Container.prototype.getLocalBounds.call(this)},d.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},d.prototype.makeDirty=function(){this.dirty=!0},d.fonts={}},{"../core":97,"../core/math/ObservablePoint":100}],159:[function(a,b,c){function d(a){e.Sprite.call(this,a[0]instanceof e.Texture?a[0]:a[0].texture),this._textures=null,this._durations=null,this.textures=a,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var e=a("../core");d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(a){if(a[0]instanceof e.Texture)this._textures=a,this._durations=null;else{this._textures=[],this._durations=[];for(var b=0;b<a.length;b++)this._textures.push(a[b].texture),this._durations.push(a[b].time)}}},currentFrame:{get:function(){var a=Math.floor(this._currentTime)%this._textures.length;return 0>a&&(a+=this._textures.length),a}}}),d.prototype.stop=function(){this.playing&&(this.playing=!1,e.ticker.shared.remove(this.update,this))},d.prototype.play=function(){this.playing||(this.playing=!0,e.ticker.shared.add(this.update,this))},d.prototype.gotoAndStop=function(a){this.stop(),this._currentTime=a,this._texture=this._textures[this.currentFrame],this._textureID=-1},d.prototype.gotoAndPlay=function(a){this._currentTime=a,this.play()},d.prototype.update=function(a){var b=this.animationSpeed*a;if(null!==this._durations){var c=this._currentTime%1*this._durations[this.currentFrame];for(c+=b/60*1e3;0>c;)this._currentTime--,c+=this._durations[this.currentFrame];var d=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);c>=this._durations[this.currentFrame];)c-=this._durations[this.currentFrame]*d,this._currentTime+=d;this._currentTime+=c/this._durations[this.currentFrame]}else this._currentTime+=b;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):(this._texture=this._textures[this.currentFrame],this._textureID=-1)},d.prototype.destroy=function(){this.stop(),e.Sprite.prototype.destroy.call(this)},d.fromFrames=function(a){for(var b=[],c=0;c<a.length;++c)b.push(e.Texture.fromFrame(a[c]));return new d(b)},d.fromImages=function(a){for(var b=[],c=0;c<a.length;++c)b.push(e.Texture.fromImage(a[c]));return new d(b)}},{"../core":97}],160:[function(a,b,c){function d(a,b,c){e.Sprite.call(this,a),this.tileScale=new e.Point(1,1),this.tilePosition=new e.Point(0,0),this._width=b||100,this._height=c||100,this._uvs=new e.TextureUvs,this._canvasPattern=null,this._glDatas=[]}var e=a("../core"),f=new e.Point,g=a("../core/textures/Texture"),h=a("../core/sprites/canvas/CanvasTinter"),i=a("./webgl/TilingShader"),j=new Float32Array(4);d.prototype=Object.create(e.Sprite.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this._width},set:function(a){this._width=a}},height:{get:function(){return this._height},set:function(a){this._height=a}}}),d.prototype._onTextureUpdate=function(){},d.prototype._renderWebGL=function(a){var b=this._texture;if(b&&b._uvs){a.flush();var c=a.gl,d=this._glDatas[a.CONTEXT_UID];d||(d={shader:new i(c),quad:new e.Quad(c)},this._glDatas[a.CONTEXT_UID]=d,d.quad.initVao(d.shader));var f=d.quad.vertices;f[0]=f[6]=this._width*-this.anchor.x,f[1]=f[3]=this._height*-this.anchor.y,f[2]=f[4]=this._width*(1-this.anchor.x),f[5]=f[7]=this._height*(1-this.anchor.y),d.quad.upload(),a.bindShader(d.shader);var g=b._uvs,h=b._frame.width,k=b._frame.height,l=b.baseTexture.width,m=b.baseTexture.height,n=d.shader.uniforms.uPixelSize;n[0]=1/l,n[1]=1/m,d.shader.uniforms.uPixelSize=n;var o=d.shader.uniforms.uFrame;o[0]=g.x0,o[1]=g.y0,o[2]=g.x1-g.x0,o[3]=g.y2-g.y0,d.shader.uniforms.uFrame=o;var p=d.shader.uniforms.uTransform;p[0]=this.tilePosition.x%(h*this.tileScale.x)/this._width,p[1]=this.tilePosition.y%(k*this.tileScale.y)/this._height,p[2]=l/this._width*this.tileScale.x,p[3]=m/this._height*this.tileScale.y,d.shader.uniforms.uTransform=p,d.shader.uniforms.translationMatrix=this.worldTransform.toArray(!0);var q=j;e.utils.hex2rgb(this.tint,q),q[3]=this.worldAlpha,d.shader.uniforms.uColor=q,a.bindTexture(this._texture,0),a.state.setBlendMode(this.blendMode),d.quad.draw()}},d.prototype._renderCanvas=function(a){var b=this._texture;if(b.baseTexture.hasLoaded){var c=a.context,d=this.worldTransform,f=a.resolution,g=b.baseTexture,i=this.tilePosition.x/this.tileScale.x%b._frame.width,j=this.tilePosition.y/this.tileScale.y%b._frame.height;if(!this._canvasPattern){var k=new e.CanvasRenderTarget(b._frame.width,b._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=h.getTintedTexture(this,this.tint)),k.context.drawImage(this.tintedTexture,0,0)):k.context.drawImage(g.source,-b._frame.x,-b._frame.y),this._canvasPattern=k.context.createPattern(k.canvas,"repeat")}c.globalAlpha=this.worldAlpha,c.setTransform(d.a*f,d.b*f,d.c*f,d.d*f,d.tx*f,d.ty*f),c.scale(this.tileScale.x,this.tileScale.y),c.translate(i+this.anchor.x*-this._width,j+this.anchor.y*-this._height);var l=a.blendModes[this.blendMode];l!==a.context.globalCompositeOperation&&(c.globalCompositeOperation=l),c.fillStyle=this._canvasPattern,c.fillRect(-i,-j,this._width/this.tileScale.x,this._height/this.tileScale.y)}},d.prototype.getBounds=function(){var a,b,c,d,e=this._width,f=this._height,g=e*(1-this.anchor.x),h=e*-this.anchor.x,i=f*(1-this.anchor.y),j=f*-this.anchor.y,k=this.worldTransform,l=k.a,m=k.b,n=k.c,o=k.d,p=k.tx,q=k.ty,r=l*h+n*j+p,s=o*j+m*h+q,t=l*g+n*j+p,u=o*j+m*g+q,v=l*g+n*i+p,w=o*i+m*g+q,x=l*h+n*i+p,y=o*i+m*h+q;a=r,a=a>t?t:a,a=a>v?v:a,a=a>x?x:a,c=s,c=c>u?u:c,c=c>w?w:c,c=c>y?y:c,b=r,b=t>b?t:b,b=v>b?v:b,b=x>b?x:b,d=s,d=u>d?u:d,d=w>d?w:d,d=y>d?y:d;var z=this._bounds;return z.x=a,z.width=b-a,z.y=c,z.height=d-c,this._currentBounds=z,z},d.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,f);var b,c=this._width,d=this._height,e=-c*this.anchor.x;return f.x>e&&f.x<e+c&&(b=-d*this.anchor.y,f.y>b&&f.y<b+d)},d.prototype.destroy=function(){e.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},d.from=function(a,b,c){return new d(g.from(a),b,c)},d.fromFrame=function(a,b,c){var f=e.utils.TextureCache[a];if(!f)throw new Error('The frameId "'+a+'" does not exist in the texture cache '+this);return new d(f,b,c)},d.fromImage=function(a,b,c,f,g){return new d(e.Texture.fromImage(a,f,g),b,c)}},{"../core":97,"../core/sprites/canvas/CanvasTinter":135,"../core/textures/Texture":144,"./webgl/TilingShader":165}],161:[function(a,b,c){var d=a("../core"),e=d.DisplayObject,f=new d.Matrix;e.prototype._cacheAsBitmap=!1,e.prototype._cacheData=!1;var g=function(){this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(e.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){if(this._cacheAsBitmap!==a){this._cacheAsBitmap=a;var b;a?(this._cacheData||(this._cacheData=new g),b=this._cacheData,b.originalRenderWebGL=this.renderWebGL,b.originalRenderCanvas=this.renderCanvas,b.originalUpdateTransform=this.updateTransform,b.originalGetBounds=this.getBounds,b.originalDestroy=this.destroy,b.originalContainsPoint=this.containsPoint,b.originalMask=this._mask,b.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(b=this._cacheData,b.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=b.originalRenderWebGL,this.renderCanvas=b.originalRenderCanvas,this.getBounds=b.originalGetBounds,this.destroy=b.originalDestroy,this.updateTransform=b.originalUpdateTransform,this.containsPoint=b.originalContainsPoint,this._mask=b.originalMask,this.filterArea=b.originalFilterArea)}}}}),e.prototype._renderCachedWebGL=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(a))},e.prototype._initCachedDisplayObject=function(a){if(!this._cacheData||!this._cacheData.sprite){a.currentRenderer.flush();var b=this.getLocalBounds().clone();if(this._filters){var c=this._filters[0].padding;b.x-=c,b.y-=c,b.width+=2*c,b.height+=2*c}var e=a._activeRenderTarget,g=a.filterManager.filterStack,h=d.RenderTexture.create(0|b.width,0|b.height),i=f;i.tx=-b.x,i.ty=-b.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,a.render(this,h,!0,i,!0),a.bindRenderTarget(e),a.filterManager.filterStack=g,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._mask=null,this.filterArea=null;var j=new d.Sprite(h);j.transform.worldTransform=this.transform.worldTransform,j.anchor.x=-(b.x/b.width),j.anchor.y=-(b.y/b.height),this._cacheData.sprite=j,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=j.containsPoint.bind(j)}},e.prototype._renderCachedCanvas=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(a))},e.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.getLocalBounds(),c=a.context,e=new d.RenderTexture.create(0|b.width,0|b.height),g=f;this.transform.worldTransform.copy(g),g.invert(),g.tx-=b.x,g.ty-=b.y,this.renderCanvas=this._cacheData.originalRenderCanvas,a.render(this,e,!0,g,!1),a.context=c,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._mask=null,this.filterArea=null;var h=new d.Sprite(e);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(b.x/b.width),h.anchor.y=-(b.y/b.height),this.updateTransform(),this._cacheData.sprite=h,this.containsPoint=h.containsPoint.bind(h)}},e.prototype._getCachedBounds=function(){return this._cacheData.sprite._currentBounds=null,this._cacheData.sprite.getBounds()},e.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},e.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this.destroy()}},{"../core":97}],162:[function(a,b,c){var d=a("../core");d.DisplayObject.prototype.name=null,d.Container.prototype.getChildByName=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b].name===a)return this.children[b];return null}},{"../core":97}],163:[function(a,b,c){var d=a("../core");d.DisplayObject.prototype.getGlobalPosition=function(a){return a=a||new d.Point,this.parent?(this.displayObjectUpdateTransform(),a.x=this.worldTransform.tx,a.y=this.worldTransform.ty):(a.x=this.position.x,a.y=this.position.y),a}},{"../core":97}],164:[function(a,b,c){a("./cacheAsBitmap"),a("./getChildByName"),a("./getGlobalPosition"),b.exports={MovieClip:a("./MovieClip"),TilingSprite:a("./TilingSprite"),BitmapText:a("./BitmapText")}},{"./BitmapText":158,"./MovieClip":159,"./TilingSprite":160,"./cacheAsBitmap":161,"./getChildByName":162,"./getGlobalPosition":163}],165:[function(a,b,c){function d(a){e.call(this,a,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nuniform vec4 uFrame;\nuniform vec4 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vec2 coord = aTextureCoord;\n    coord -= uTransform.xy;\n    coord /= uTransform.zw;\n    vTextureCoord = coord;\n}\n","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform vec4 uFrame;\nuniform vec2 uPixelSize;\n\nvoid main(void)\n{\n\n   \tvec2 coord = mod(vTextureCoord, uFrame.zw);\n   \tcoord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);\n   \tcoord += uFrame.xy;\n\n   \tvec4 sample = texture2D(uSampler, coord);\n  \tvec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n   \tgl_FragColor = sample * color ;\n}\n")}var e=a("../../core/Shader");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{"../../core/Shader":77}],166:[function(a,b,c){function d(a,b,c){e.Filter.call(this),this.blurXFilter=new f,this.blurYFilter=new g,this.resolution=1,this.padding=0,this.resolution=c||1,this.quality=b||4,this.blur=a||8}var e=a("../../core"),f=a("./BlurXFilter"),g=a("./BlurYFilter");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c){var d=a.getRenderTarget(!0);this.blurXFilter.apply(a,b,d,!0),this.blurYFilter.apply(a,d,c,!1),a.returnRenderTarget(d)},Object.defineProperties(d.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}},quality:{get:function(){return this.blurXFilter.quality},set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a}},blurX:{get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}},blurY:{get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurYFilter.strength),Math.abs(this.blurYFilter.strength))}}})},{"../../core":97,"./BlurXFilter":167,"./BlurYFilter":168}],167:[function(a,b,c){function d(a,b,c){var d=f(5,!0),h=g(5);e.Filter.call(this,d,h),this.resolution=c||1,this._quality=0,this.quality=b||4,this.strength=a||8,this.firstRun=!0}var e=a("../../core"),f=a("./generateBlurVertSource"),g=a("./generateBlurFragSource"),h=a("./getMaxBlurKernelSize");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,i=h(e);this.vertexSrc=f(i,!0),this.fragmentSrc=g(i),this.firstRun=!1}if(this.uniforms.strength=1/c.size.width*(c.size.width/b.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var j=a.getRenderTarget(!0),k=b,l=j,m=0;m<this.passes-1;m++){a.applyFilter(this,k,l,!0);var n=l;l=k,k=n}a.applyFilter(this,k,c,d),a.returnRenderTarget(j)}},Object.defineProperties(d.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}})},{"../../core":97,"./generateBlurFragSource":169,"./generateBlurVertSource":170,"./getMaxBlurKernelSize":171}],168:[function(a,b,c){function d(a,b,c){var d=f(5,!1),h=g(5);e.Filter.call(this,d,h),this.resolution=c||1,this._quality=0,this.quality=b||4,this.strength=a||8,this.firstRun=!0}var e=a("../../core"),f=a("./generateBlurVertSource"),g=a("./generateBlurFragSource"),h=a("./getMaxBlurKernelSize");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,i=h(e);this.vertexSrc=f(i,!1),this.fragmentSrc=g(i),this.firstRun=!1}if(this.uniforms.strength=1/c.size.height*(c.size.height/b.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var j=a.getRenderTarget(!0),k=b,l=j,m=0;m<this.passes-1;m++){a.applyFilter(this,k,l,!0);var n=l;l=k,k=n}a.applyFilter(this,k,c,d),a.returnRenderTarget(j)}},Object.defineProperties(d.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},quality:{get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}})},{"../../core":97,"./generateBlurFragSource":169,"./generateBlurVertSource":170,"./getMaxBlurKernelSize":171}],169:[function(a,b,c){var d={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},e=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","\tgl_FragColor = vec4(0.0);","\t%blur%","}"].join("\n"),f=function(a){for(var b,c=d[a],f=c.length,g=e,h="",i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",j=0;a>j;j++){var k=i.replace("%index%",j);b=j,j>=f&&(b=a-j-1),k=k.replace("%value%",c[b]),h+=k,h+="\n"}return g=g.replace("%blur%",h),g=g.replace("%size%",a)};b.exports=f},{}],170:[function(a,b,c){var d=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n"),e=function(a,b){var c,e,f=Math.ceil(a/2),g=d,h="";c=b?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var i=0;a>i;i++){var j=c.replace("%index%",i);e=i,i>=f&&(e=a-i-1),j=j.replace("%sampleIndex%",i-(f-1)+".0"),h+=j,h+="\n"}return g=g.replace("%blur%",h),g=g.replace("%size%",a)};b.exports=e},{}],171:[function(a,b,c){var d=function(a){for(var b=a.getParameter(a.MAX_VARYING_VECTORS),c=15;c>b;)c-=2;return c};b.exports=d},{}],172:[function(a,b,c){function d(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4] * c.a;\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9] * c.a;\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14] * c.a;\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19] * c.a;\n\n//    gl_FragColor = vec4(m[0]);\n}\n"),this.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype._loadMatrix=function(a,b){b=!!b;var c=a;b&&(this._multiply(c,this.uniforms.m,a),c=this._colorMatrix(c)),this.uniforms.m=c},d.prototype._multiply=function(a,b,c){return a[0]=b[0]*c[0]+b[1]*c[5]+b[2]*c[10]+b[3]*c[15],a[1]=b[0]*c[1]+b[1]*c[6]+b[2]*c[11]+b[3]*c[16],a[2]=b[0]*c[2]+b[1]*c[7]+b[2]*c[12]+b[3]*c[17],a[3]=b[0]*c[3]+b[1]*c[8]+b[2]*c[13]+b[3]*c[18],a[4]=b[0]*c[4]+b[1]*c[9]+b[2]*c[14]+b[3]*c[19],a[5]=b[5]*c[0]+b[6]*c[5]+b[7]*c[10]+b[8]*c[15],a[6]=b[5]*c[1]+b[6]*c[6]+b[7]*c[11]+b[8]*c[16],a[7]=b[5]*c[2]+b[6]*c[7]+b[7]*c[12]+b[8]*c[17],a[8]=b[5]*c[3]+b[6]*c[8]+b[7]*c[13]+b[8]*c[18],a[9]=b[5]*c[4]+b[6]*c[9]+b[7]*c[14]+b[8]*c[19],a[10]=b[10]*c[0]+b[11]*c[5]+b[12]*c[10]+b[13]*c[15],a[11]=b[10]*c[1]+b[11]*c[6]+b[12]*c[11]+b[13]*c[16],a[12]=b[10]*c[2]+b[11]*c[7]+b[12]*c[12]+b[13]*c[17],a[13]=b[10]*c[3]+b[11]*c[8]+b[12]*c[13]+b[13]*c[18],a[14]=b[10]*c[4]+b[11]*c[9]+b[12]*c[14]+b[13]*c[19],a[15]=b[15]*c[0]+b[16]*c[5]+b[17]*c[10]+b[18]*c[15],a[16]=b[15]*c[1]+b[16]*c[6]+b[17]*c[11]+b[18]*c[16],a[17]=b[15]*c[2]+b[16]*c[7]+b[17]*c[12]+b[18]*c[17],a[18]=b[15]*c[3]+b[16]*c[8]+b[17]*c[13]+b[18]*c[18],a[19]=b[15]*c[4]+b[16]*c[9]+b[17]*c[14]+b[18]*c[19],a},d.prototype._colorMatrix=function(a){var b=new Float32Array(a);return b[4]/=255,b[9]/=255,b[14]/=255,b[19]/=255,b},d.prototype.brightness=function(a,b){var c=[a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},d.prototype.greyscale=function(a,b){var c=[a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},d.prototype.grayscale=d.prototype.greyscale,d.prototype.blackAndWhite=function(a){var b=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.hue=function(a,b){a=(a||0)/180*Math.PI;var c=Math.cos(a),d=Math.sin(a),e=Math.sqrt,f=1/3,g=e(f),h=c+(1-c)*f,i=f*(1-c)-g*d,j=f*(1-c)+g*d,k=f*(1-c)+g*d,l=c+f*(1-c),m=f*(1-c)-g*d,n=f*(1-c)-g*d,o=f*(1-c)+g*d,p=c+f*(1-c),q=[h,i,j,0,0,k,l,m,0,0,n,o,p,0,0,0,0,0,1,0];this._loadMatrix(q,b)},d.prototype.contrast=function(a,b){var c=(a||0)+1,d=-128*(c-1),e=[c,0,0,0,d,0,c,0,0,d,0,0,c,0,d,0,0,0,1,0];this._loadMatrix(e,b)},d.prototype.saturate=function(a,b){var c=2*(a||0)/3+1,d=(c-1)*-.5,e=[c,d,d,0,0,d,c,d,0,0,d,d,c,0,0,0,0,0,1,0];this._loadMatrix(e,b)},d.prototype.desaturate=function(){this.saturate(-1)},d.prototype.negative=function(a){var b=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.sepia=function(a){var b=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.technicolor=function(a){var b=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.polaroid=function(a){var b=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.toBGR=function(a){var b=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.kodachrome=function(a){var b=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.browni=function(a){var b=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.vintage=function(a){var b=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.colorTone=function(a,b,c,d,e){a=a||.2,b=b||.15,c=c||16770432,d=d||3375104;var f=(c>>16&255)/255,g=(c>>8&255)/255,h=(255&c)/255,i=(d>>16&255)/255,j=(d>>8&255)/255,k=(255&d)/255,l=[.3,.59,.11,0,0,f,g,h,a,0,i,j,k,b,0,f-i,g-j,h-k,0,0];
this._loadMatrix(l,e)},d.prototype.night=function(a,b){a=a||.1;var c=[-2*a,-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},d.prototype.predator=function(a,b){var c=[11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0];this._loadMatrix(c,b)},d.prototype.lsd=function(a){var b=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(b,a)},d.prototype.reset=function(){var a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(a,!1)},Object.defineProperties(d.prototype,{matrix:{get:function(){return this.uniforms.m},set:function(a){this.uniforms.m=a}}})},{"../../core":97}],173:[function(a,b,c){function d(a,b){var c=new e.Matrix;a.renderable=!1,e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"),this.maskSprite=a,this.maskMatrix=c,this.uniforms.mapSampler=a.texture,this.uniforms.filterMatrix=c.toArray(!0),this.uniforms.scale={x:1,y:1},null!==b&&void 0!==b||(b=20),this.scale=new e.Point(b,b)}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.apply=function(a,b,c){var d=1/c.destinationFrame.width*(c.size.width/b.size.width);this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*d,this.uniforms.scale.y=this.scale.y*d,a.applyFilter(this,b,c)},Object.defineProperties(d.prototype,{map:{get:function(){return this.uniforms.mapSampler},set:function(a){this.uniforms.mapSampler=a}}})},{"../../core":97}],174:[function(a,b,c){function d(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'#define GLSLIFY 1\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n  \tvec2 fragCoord = vTextureCoord * filterArea.xy;\n\n  \tvec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n  \tgl_FragColor = color;\n}\n')}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d},{"../../core":97}],175:[function(a,b,c){b.exports={FXAAFilter:a("./fxaa/FXAAFilter"),NoiseFilter:a("./noise/NoiseFilter"),DisplacementFilter:a("./displacement/DisplacementFilter"),BlurFilter:a("./blur/BlurFilter"),BlurXFilter:a("./blur/BlurXFilter"),BlurYFilter:a("./blur/BlurYFilter"),ColorMatrixFilter:a("./colormatrix/ColorMatrixFilter"),VoidFilter:a("./void/VoidFilter")}},{"./blur/BlurFilter":166,"./blur/BlurXFilter":167,"./blur/BlurYFilter":168,"./colormatrix/ColorMatrixFilter":172,"./displacement/DisplacementFilter":173,"./fxaa/FXAAFilter":174,"./noise/NoiseFilter":176,"./void/VoidFilter":177}],176:[function(a,b,c){function d(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n"),this.noise=.5}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{noise:{get:function(){return this.uniforms.noise},set:function(a){this.uniforms.noise=a}}})},{"../../core":97}],177:[function(a,b,c){function d(){e.Filter.call(this,"#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","#define GLSLIFY 1\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"),this.glShaderKey="void"}var e=a("../../core");d.prototype=Object.create(e.Filter.prototype),d.prototype.constructor=d,b.exports=d},{"../../core":97}],178:[function(a,b,c){function d(){this.global=new e.Point,this.target=null,this.originalEvent=null}var e=a("../core");d.prototype.constructor=d,b.exports=d,d.prototype.getLocalPosition=function(a,b,c){return a.worldTransform.applyInverse(c||this.global,b)}},{"../core":97}],179:[function(a,b,c){function d(a,b){g.call(this),b=b||{},this.renderer=a,this.autoPreventDefault=void 0===b.autoPreventDefault||b.autoPreventDefault,this.interactionFrequency=b.interactionFrequency||10,this.mouse=new f,this.mouse.global.set(-999999),this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.defaultCursorStyle="inherit",this.currentCursorStyle="inherit",this._tempPoint=new e.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var e=a("../core"),f=a("./InteractionData"),g=a("eventemitter3");Object.assign(e.DisplayObject.prototype,a("./interactiveTarget")),d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setTargetElement=function(a,b){this.removeEvents(),this.interactionDOMElement=a,this.resolution=b||1,this.addEvents()},d.prototype.addEvents=function(){this.interactionDOMElement&&(e.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},d.prototype.removeEvents=function(){this.interactionDOMElement&&(e.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},d.prototype.update=function(a){if(this._deltaTime+=a,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},d.prototype.dispatchEvent=function(a,b,c){c.stopped||(c.target=a,c.type=b,a.emit(b,c),a[b]&&a[b](c))},d.prototype.mapPositionToPoint=function(a,b,c){var d;d=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},a.x=(b-d.left)*(this.interactionDOMElement.width/d.width)/this.resolution,a.y=(c-d.top)*(this.interactionDOMElement.height/d.height)/this.resolution},d.prototype.processInteractive=function(a,b,c,d,e){if(!b||!b.visible)return!1;var f=!1,g=e=b.interactive||e;if(b.hitArea&&(g=!1),d&&b._mask&&(b._mask.containsPoint(a)||(d=!1)),d&&b.filterArea&&(b.filterArea.contains(a.x,a.y)||(d=!1)),b.interactiveChildren)for(var h=b.children,i=h.length-1;i>=0;i--){var j=h[i];if(this.processInteractive(a,j,c,d,g)){if(!j.parent)continue;f=!0,g=!1,d=!1}}return e&&(d&&!f&&(b.hitArea?(b.worldTransform.applyInverse(a,this._tempPoint),f=b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):b.containsPoint&&(f=b.containsPoint(a))),b.interactive&&c(b,f)),f},d.prototype.onMouseDown=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0);var b=2===a.button||3===a.which;this.emit(b?"rightdown":"mousedown",this.eventData)},d.prototype.processMouseDown=function(a,b){var c=this.mouse.originalEvent,d=2===c.button||3===c.which;b&&(a[d?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(a,d?"rightdown":"mousedown",this.eventData))},d.prototype.onMouseUp=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0);var b=2===a.button||3===a.which;this.emit(b?"rightup":"mouseup",this.eventData)},d.prototype.processMouseUp=function(a,b){var c=this.mouse.originalEvent,d=2===c.button||3===c.which,e=d?"_isRightDown":"_isLeftDown";b?(this.dispatchEvent(a,d?"rightup":"mouseup",this.eventData),a[e]&&(a[e]=!1,this.dispatchEvent(a,d?"rightclick":"click",this.eventData))):a[e]&&(a[e]=!1,this.dispatchEvent(a,d?"rightupoutside":"mouseupoutside",this.eventData))},d.prototype.onMouseMove=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.didMove=!0,this.cursor=this.defaultCursorStyle,this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.emit("mousemove",this.eventData),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},d.prototype.processMouseMove=function(a,b){this.processMouseOverOut(a,b),this.moveWhenInside&&!b||this.dispatchEvent(a,"mousemove",this.eventData)},d.prototype.onMouseOut=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.interactionDOMElement.style.cursor=this.defaultCursorStyle,this.mapPositionToPoint(this.mouse.global,a.clientX,a.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1),this.emit("mouseout",this.eventData)},d.prototype.processMouseOverOut=function(a,b){b?(a._over||(a._over=!0,this.dispatchEvent(a,"mouseover",this.eventData)),a.buttonMode&&(this.cursor=a.defaultCursor)):a._over&&(a._over=!1,this.dispatchEvent(a,"mouseout",this.eventData))},d.prototype.onMouseOver=function(a){this.mouse.originalEvent=a,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.emit("mouseover",this.eventData)},d.prototype.onTouchStart=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,d=0;c>d;d++){var e=b[d],f=this.getTouchData(e);f.originalEvent=a,this.eventData.data=f,this.eventData.stopped=!1,this.processInteractive(f.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.emit("touchstart",this.eventData),this.returnTouchData(f)}},d.prototype.processTouchStart=function(a,b){b&&(a._touchDown=!0,this.dispatchEvent(a,"touchstart",this.eventData))},d.prototype.onTouchEnd=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,d=0;c>d;d++){var e=b[d],f=this.getTouchData(e);f.originalEvent=a,this.eventData.data=f,this.eventData.stopped=!1,this.processInteractive(f.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.emit("touchend",this.eventData),this.returnTouchData(f)}},d.prototype.processTouchEnd=function(a,b){b?(this.dispatchEvent(a,"touchend",this.eventData),a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"tap",this.eventData))):a._touchDown&&(a._touchDown=!1,this.dispatchEvent(a,"touchendoutside",this.eventData))},d.prototype.onTouchMove=function(a){this.autoPreventDefault&&a.preventDefault();for(var b=a.changedTouches,c=b.length,d=0;c>d;d++){var e=b[d],f=this.getTouchData(e);f.originalEvent=a,this.eventData.data=f,this.eventData.stopped=!1,this.processInteractive(f.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.emit("touchmove",this.eventData),this.returnTouchData(f)}},d.prototype.processTouchMove=function(a,b){this.moveWhenInside&&!b||this.dispatchEvent(a,"touchmove",this.eventData)},d.prototype.getTouchData=function(a){var b=this.interactiveDataPool.pop();return b||(b=new f),b.identifier=a.identifier,this.mapPositionToPoint(b.global,a.clientX,a.clientY),navigator.isCocoonJS&&(b.global.x=b.global.x/this.resolution,b.global.y=b.global.y/this.resolution),a.globalX=b.global.x,a.globalY=b.global.y,b},d.prototype.returnTouchData=function(a){this.interactiveDataPool.push(a)},d.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onMouseOver=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},e.WebGLRenderer.registerPlugin("interaction",d),e.CanvasRenderer.registerPlugin("interaction",d)},{"../core":97,"./InteractionData":178,"./interactiveTarget":181,eventemitter3:3}],180:[function(a,b,c){b.exports={InteractionData:a("./InteractionData"),InteractionManager:a("./InteractionManager"),interactiveTarget:a("./interactiveTarget")}},{"./InteractionData":178,"./InteractionManager":179,"./interactiveTarget":181}],181:[function(a,b,c){var d={interactive:!1,interactiveChildren:!0,hitArea:null,buttonMode:!1,defaultCursor:"pointer",_over:!1,_isLeftDown:!1,_isRightDown:!1,_touchDown:!1};b.exports=d},{}],182:[function(a,b,c){function d(a,b){var c={},d=a.data.getElementsByTagName("info")[0],e=a.data.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=parseInt(d.getAttribute("size"),10),c.lineHeight=parseInt(e.getAttribute("lineHeight"),10),c.chars={};for(var h=a.data.getElementsByTagName("char"),i=0;i<h.length;i++){var j=parseInt(h[i].getAttribute("id"),10),k=new f.Rectangle(parseInt(h[i].getAttribute("x"),10)+b.frame.x,parseInt(h[i].getAttribute("y"),10)+b.frame.y,parseInt(h[i].getAttribute("width"),10),parseInt(h[i].getAttribute("height"),10));c.chars[j]={xOffset:parseInt(h[i].getAttribute("xoffset"),10),yOffset:parseInt(h[i].getAttribute("yoffset"),10),xAdvance:parseInt(h[i].getAttribute("xadvance"),10),kerning:{},texture:new f.Texture(b.baseTexture,k)}}var l=a.data.getElementsByTagName("kerning");for(i=0;i<l.length;i++){var m=parseInt(l[i].getAttribute("first"),10),n=parseInt(l[i].getAttribute("second"),10),o=parseInt(l[i].getAttribute("amount"),10);c.chars[n]&&(c.chars[n].kerning[m]=o)}a.bitmapFont=c,g.BitmapText.fonts[c.font]=c}var e=a("resource-loader").Resource,f=a("../core"),g=a("../extras"),h=a("path");b.exports=function(){return function(a,b){if(!a.data||!a.isXml)return b();if(0===a.data.getElementsByTagName("page").length||0===a.data.getElementsByTagName("info").length||null===a.data.getElementsByTagName("info")[0].getAttribute("face"))return b();var c=a.isDataUrl?"":h.dirname(a.url);a.isDataUrl&&("."===c&&(c=""),this.baseUrl&&c&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(c+="/"),c=c.replace(this.baseUrl,""))),c&&"/"!==c.charAt(c.length-1)&&(c+="/");var g=c+a.data.getElementsByTagName("page")[0].getAttribute("file");if(f.utils.TextureCache[g])d(a,f.utils.TextureCache[g]),b();else{var i={crossOrigin:a.crossOrigin,loadType:e.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata};this.add(a.name+"_image",g,i,function(c){d(a,c.texture),b()})}}}},{"../core":97,"../extras":164,path:22,"resource-loader":71}],183:[function(a,b,c){b.exports={Loader:a("./loader"),bitmapFontParser:a("./bitmapFontParser"),spritesheetParser:a("./spritesheetParser"),textureParser:a("./textureParser"),Resource:a("resource-loader").Resource}},{"./bitmapFontParser":182,"./loader":184,"./spritesheetParser":185,"./textureParser":186,"resource-loader":71}],184:[function(a,b,c){function d(a,b){e.call(this,a,b);for(var c=0;c<d._pixiMiddleware.length;++c)this.use(d._pixiMiddleware[c]())}var e=a("resource-loader"),f=a("./textureParser"),g=a("./spritesheetParser"),h=a("./bitmapFontParser");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d._pixiMiddleware=[e.middleware.parsing.blob,f,g,h],d.addPixiMiddleware=function(a){d._pixiMiddleware.push(a)};var i=e.Resource;i.setExtensionXhrType("fnt",i.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":182,"./spritesheetParser":185,"./textureParser":186,"resource-loader":71}],185:[function(a,b,c){var d=a("resource-loader").Resource,e=a("path"),f=a("../core"),g=1e3;b.exports=function(){return function(a,b){var c,h=a.name+"_image";if(!a.data||!a.isJson||!a.data.frames||this.resources[h])return b();var i={crossOrigin:a.crossOrigin,loadType:d.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata};c=a.isDataUrl?a.data.meta.image:e.dirname(a.url.replace(this.baseUrl,""))+"/"+a.data.meta.image,this.add(h,c,i,function(c){function d(b,d){for(var e=b;d>e-b&&e<k.length;){var g=k[e],h=j[g].frame;if(h){var i=null,m=null,n=new f.Rectangle(0,0,j[g].sourceSize.w/l,j[g].sourceSize.h/l);i=j[g].rotated?new f.Rectangle(h.x/l,h.y/l,h.h/l,h.w/l):new f.Rectangle(h.x/l,h.y/l,h.w/l,h.h/l),j[g].trimmed&&(m=new f.Rectangle(j[g].spriteSourceSize.x/l,j[g].spriteSourceSize.y/l,j[g].spriteSourceSize.w/l,j[g].spriteSourceSize.h/l)),a.textures[g]=new f.Texture(c.texture.baseTexture,i,n,m,j[g].rotated?2:0),f.utils.TextureCache[g]=a.textures[g]}e++}}function e(){return m*g<k.length}function h(a){d(m*g,g),m++,setTimeout(a,0)}function i(){h(function(){e()?i():b()})}a.textures={};var j=a.data.frames,k=Object.keys(j),l=f.utils.getResolutionOfUrl(a.url),m=0;k.length<=g?(d(0,g),b()):i()})}}},{"../core":97,path:22,"resource-loader":71}],186:[function(a,b,c){var d=a("../core");b.exports=function(){return function(a,b){if(a.data&&a.isImage){var c=new d.BaseTexture(a.data,null,d.utils.getResolutionOfUrl(a.url));c.imageUrl=a.url,a.texture=new d.Texture(c),d.utils.BaseTextureCache[a.url]=c,d.utils.TextureCache[a.url]=a.texture}b()}}},{"../core":97}],187:[function(a,b,c){function d(a,b,c,f,g){e.Container.call(this),this._texture=null,this.uvs=c||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=b||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=f||new Uint16Array([0,1,3,2]),this.dirty=0,this.indexDirty=0,this.blendMode=e.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=g||d.DRAW_MODES.TRIANGLE_MESH,this.texture=a,this.shader=null,this.tintRgb=new Float32Array([1,1,1]),this._glDatas=[]}var e=a("../core"),f=a("pixi-gl-core"),g=a("./webgl/MeshShader"),h=new e.Point,i=new e.Polygon;d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{texture:{get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}},tint:{get:function(){return e.utils.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=e.utils.hex2rgb(a,this.tintRgb)}}}),d.prototype._renderWebGL=function(a){a.flush();var b=a.gl,c=this._glDatas[a.CONTEXT_UID];c||(c={shader:new g(b),vertexBuffer:f.GLBuffer.createVertexBuffer(b,this.vertices,b.STREAM_DRAW),uvBuffer:f.GLBuffer.createVertexBuffer(b,this.uvs,b.STREAM_DRAW),indexBuffer:f.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW),vao:new f.VertexArrayObject(b),dirty:this.dirty,indexDirty:this.indexDirty},c.vao=new f.VertexArrayObject(b).addIndex(c.indexBuffer).addAttribute(c.vertexBuffer,c.shader.attributes.aVertexPosition,b.FLOAT,!1,8,0).addAttribute(c.uvBuffer,c.shader.attributes.aTextureCoord,b.FLOAT,!1,8,0),this._glDatas[a.CONTEXT_UID]=c),this.dirty!==c.dirty&&(c.dirty=this.dirty,c.uvBuffer.upload()),this.indexDirty!==c.indexDirty&&(c.indexDirty=this.indexDirty,c.indexBuffer.upload()),c.vertexBuffer.upload(),a.bindShader(c.shader),a.bindTexture(this._texture,0),a.state.setBlendMode(this.blendMode),c.shader.uniforms.translationMatrix=this.worldTransform.toArray(!0),c.shader.uniforms.alpha=this.worldAlpha,c.shader.uniforms.tint=this.tintRgb;var e=this.drawMode===d.DRAW_MODES.TRIANGLE_MESH?b.TRIANGLE_STRIP:b.TRIANGLES;c.vao.bind().draw(e,this.indices.length).unbind()},d.prototype._renderCanvas=function(a){var b=a.context,c=this.worldTransform,e=a.resolution;a.roundPixels?b.setTransform(c.a*e,c.b*e,c.c*e,c.d*e,c.tx*e|0,c.ty*e|0):b.setTransform(c.a*e,c.b*e,c.c*e,c.d*e,c.tx*e,c.ty*e),this.drawMode===d.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(b):this._renderCanvasTriangles(b)},d.prototype._renderCanvasTriangleMesh=function(a){for(var b=this.vertices,c=this.uvs,d=b.length/2,e=0;d-2>e;e++){var f=2*e;this._renderCanvasDrawTriangle(a,b,c,f,f+2,f+4)}},d.prototype._renderCanvasTriangles=function(a){for(var b=this.vertices,c=this.uvs,d=this.indices,e=d.length,f=0;e>f;f+=3){var g=2*d[f],h=2*d[f+1],i=2*d[f+2];this._renderCanvasDrawTriangle(a,b,c,g,h,i)}},d.prototype._renderCanvasDrawTriangle=function(a,b,c,d,e,f){var g=this._texture.baseTexture,h=g.source,i=g.width,j=g.height,k=b[d],l=b[e],m=b[f],n=b[d+1],o=b[e+1],p=b[f+1],q=c[d]*g.width,r=c[e]*g.width,s=c[f]*g.width,t=c[d+1]*g.height,u=c[e+1]*g.height,v=c[f+1]*g.height;if(this.canvasPadding>0){var w=this.canvasPadding/this.worldTransform.a,x=this.canvasPadding/this.worldTransform.d,y=(k+l+m)/3,z=(n+o+p)/3,A=k-y,B=n-z,C=Math.sqrt(A*A+B*B);k=y+A/C*(C+w),n=z+B/C*(C+x),A=l-y,B=o-z,C=Math.sqrt(A*A+B*B),l=y+A/C*(C+w),o=z+B/C*(C+x),A=m-y,B=p-z,C=Math.sqrt(A*A+B*B),m=y+A/C*(C+w),p=z+B/C*(C+x)}a.save(),a.beginPath(),a.moveTo(k,n),a.lineTo(l,o),a.lineTo(m,p),a.closePath(),a.clip();var D=q*u+t*s+r*v-u*s-t*r-q*v,E=k*u+t*m+l*v-u*m-t*l-k*v,F=q*l+k*s+r*m-l*s-k*r-q*m,G=q*u*m+t*l*s+k*r*v-k*u*s-t*r*m-q*l*v,H=n*u+t*p+o*v-u*p-t*o-n*v,I=q*o+n*s+r*p-o*s-n*r-q*p,J=q*u*p+t*o*s+n*r*v-n*u*s-t*r*p-q*o*v;a.transform(E/D,H/D,F/D,I/D,G/D,J/D),a.drawImage(h,0,0,i*g.resolution,j*g.resolution,0,0,i,j),a.restore()},d.prototype.renderMeshFlat=function(a){var b=this.context,c=a.vertices,d=c.length/2;b.beginPath();for(var e=1;d-2>e;e++){var f=2*e,g=c[f],h=c[f+2],i=c[f+4],j=c[f+1],k=c[f+3],l=c[f+5];b.moveTo(g,j),b.lineTo(h,k),b.lineTo(i,l)}b.fillStyle="#FF0000",b.fill(),b.closePath()},d.prototype._onTextureUpdate=function(){},d.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},d.prototype.containsPoint=function(a){if(!this.getBounds().contains(a.x,a.y))return!1;this.worldTransform.applyInverse(a,h);for(var b=this.vertices,c=i.points,e=this.indices,f=this.indices.length,g=this.drawMode===d.DRAW_MODES.TRIANGLES?3:1,j=0;f>j+2;j+=g){var k=2*e[j],l=2*e[j+1],m=2*e[j+2];if(c[0]=b[k],c[1]=b[k+1],c[2]=b[l],c[3]=b[l+1],c[4]=b[m],c[5]=b[m+1],i.contains(h.x,h.y))return!0}return!1},d.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":97,"./webgl/MeshShader":192,"pixi-gl-core":12}],188:[function(a,b,c){function d(a,b,c,d,g){f.call(this,a,4,4);var h=this.uvs;h[6]=h[14]=h[22]=h[30]=1,h[25]=h[27]=h[29]=h[31]=1,this._origWidth=a.width,this._origHeight=a.height,this._uvw=1/this._origWidth,this._uvh=1/this._origHeight,this.width=a.width,this.height=a.height,h[2]=h[10]=h[18]=h[26]=this._uvw*b,h[4]=h[12]=h[20]=h[28]=1-this._uvw*d,h[9]=h[11]=h[13]=h[15]=this._uvh*c,h[17]=h[19]=h[21]=h[23]=1-this._uvh*g,
this.leftWidth="undefined"!=typeof b?b:e,this.rightWidth="undefined"!=typeof d?d:e,this.topHeight="undefined"!=typeof c?c:e,this.bottomHeight="undefined"!=typeof g?g:e}var e=10,f=a("./Plane");d.prototype=Object.create(f.prototype),d.prototype.constructor=d,b.exports=d,Object.defineProperties(d.prototype,{width:{get:function(){return this._width},set:function(a){this._width=a,this.updateVerticalVertices()}},height:{get:function(){return this._height},set:function(a){this._height=a,this.updateHorizontalVertices()}},leftWidth:{get:function(){return this._leftWidth},set:function(a){this._leftWidth=a;var b=this.uvs,c=this.vertices;b[2]=b[10]=b[18]=b[26]=this._uvw*a,c[2]=c[10]=c[18]=c[26]=a,this.dirty=!0}},rightWidth:{get:function(){return this._rightWidth},set:function(a){this._rightWidth=a;var b=this.uvs,c=this.vertices;b[4]=b[12]=b[20]=b[28]=1-this._uvw*a,c[4]=c[12]=c[20]=c[28]=this._width-a,this.dirty=!0}},topHeight:{get:function(){return this._topHeight},set:function(a){this._topHeight=a;var b=this.uvs,c=this.vertices;b[9]=b[11]=b[13]=b[15]=this._uvh*a,c[9]=c[11]=c[13]=c[15]=a,this.dirty=!0}},bottomHeight:{get:function(){return this._bottomHeight},set:function(a){this._bottomHeight=a;var b=this.uvs,c=this.vertices;b[17]=b[19]=b[21]=b[23]=1-this._uvh*a,c[17]=c[19]=c[21]=c[23]=this._height-a,this.dirty=!0}}}),d.prototype.updateHorizontalVertices=function(){var a=this.vertices;a[9]=a[11]=a[13]=a[15]=this._topHeight,a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight,a[25]=a[27]=a[29]=a[31]=this._height},d.prototype.updateVerticalVertices=function(){var a=this.vertices;a[2]=a[10]=a[18]=a[26]=this._leftWidth,a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth,a[6]=a[14]=a[22]=a[30]=this._width},d.prototype._renderCanvas=function(a){var b=a.context;b.globalAlpha=this.worldAlpha;var c=this.worldTransform,d=a.resolution;a.roundPixels?b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d|0,c.ty*d|0):b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d,c.ty*d);var e=this._texture.baseTexture,f=e.source,g=e.width,h=e.height;this.drawSegment(b,f,g,h,0,1,10,11),this.drawSegment(b,f,g,h,2,3,12,13),this.drawSegment(b,f,g,h,4,5,14,15),this.drawSegment(b,f,g,h,8,9,18,19),this.drawSegment(b,f,g,h,10,11,20,21),this.drawSegment(b,f,g,h,12,13,22,23),this.drawSegment(b,f,g,h,16,17,26,27),this.drawSegment(b,f,g,h,18,19,28,29),this.drawSegment(b,f,g,h,20,21,30,31)},d.prototype.drawSegment=function(a,b,c,d,e,f,g,h){var i=this.uvs,j=this.vertices,k=(i[g]-i[e])*c,l=(i[h]-i[f])*d,m=j[g]-j[e],n=j[h]-j[f];1>k&&(k=1),1>l&&(l=1),1>m&&(m=1),1>n&&(n=1),a.drawImage(b,i[e]*c,i[f]*d,k,l,j[e],j[f],m,n)}},{"./Plane":189}],189:[function(a,b,c){function d(a,b,c){e.call(this,a),this._ready=!0,this.verticesX=b||10,this.verticesY=c||10,this.drawMode=e.DRAW_MODES.TRIANGLES,this.refresh()}var e=a("./Mesh");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.refresh=function(){var a=this.verticesX*this.verticesY,b=[],c=[],d=[],e=[],f=this.texture,g=this.verticesX-1,h=this.verticesY-1,i=0,j=f.width/g,k=f.height/h;for(i=0;a>i;i++){var l=i%this.verticesX,m=i/this.verticesX|0;b.push(l*j,m*k),d.push(f._uvs.x0+(f._uvs.x1-f._uvs.x0)*(l/(this.verticesX-1)),f._uvs.y0+(f._uvs.y3-f._uvs.y0)*(m/(this.verticesY-1)))}var n=g*h;for(i=0;n>i;i++){var o=i%g,p=i/g|0,q=p*this.verticesX+o,r=p*this.verticesX+o+1,s=(p+1)*this.verticesX+o,t=(p+1)*this.verticesX+o+1;e.push(q,r,s),e.push(r,t,s)}this.vertices=new Float32Array(b),this.uvs=new Float32Array(d),this.colors=new Float32Array(c),this.indices=new Uint16Array(e),this.indexDirty=!0},d.prototype._onTextureUpdate=function(){e.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":187}],190:[function(a,b,c){function d(a,b){e.call(this,a),this.points=b,this.vertices=new Float32Array(4*b.length),this.uvs=new Float32Array(4*b.length),this.colors=new Float32Array(2*b.length),this.indices=new Uint16Array(2*b.length),this._ready=!0,this.refresh()}var e=a("./Mesh"),f=a("../core");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.refresh=function(){var a=this.points;if(!(a.length<1)&&this._texture._uvs){var b=this.uvs,c=this.indices,d=this.colors,e=this._texture._uvs,g=new f.Point(e.x0,e.y0),h=new f.Point(e.x2-e.x0,e.y2-e.y0);b[0]=0+g.x,b[1]=0+g.y,b[2]=0+g.x,b[3]=1*h.y+g.y,d[0]=1,d[1]=1,c[0]=0,c[1]=1;for(var i,j,k,l=a.length,m=1;l>m;m++)i=a[m],j=4*m,k=m/(l-1),b[j]=k*h.x+g.x,b[j+1]=0+g.y,b[j+2]=k*h.x+g.x,b[j+3]=1*h.y+g.y,j=2*m,d[j]=1,d[j+1]=1,j=2*m,c[j]=j,c[j+1]=j+1;this.dirty=!0,this.indexDirty=!0}},d.prototype._onTextureUpdate=function(){e.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},d.prototype.updateTransform=function(){var a=this.points;if(!(a.length<1)){for(var b,c,d,e,f,g,h=a[0],i=0,j=0,k=this.vertices,l=a.length,m=0;l>m;m++)c=a[m],d=4*m,b=m<a.length-1?a[m+1]:c,j=-(b.x-h.x),i=b.y-h.y,e=10*(1-m/(l-1)),e>1&&(e=1),f=Math.sqrt(i*i+j*j),g=this._texture.height/2,i/=f,j/=f,i*=g,j*=g,k[d]=c.x+i,k[d+1]=c.y+j,k[d+2]=c.x-i,k[d+3]=c.y-j,h=c;this.containerUpdateTransform()}}},{"../core":97,"./Mesh":187}],191:[function(a,b,c){b.exports={Mesh:a("./Mesh"),Plane:a("./Plane"),NineSlicePlane:a("./NineSlicePlane"),Rope:a("./Rope"),MeshShader:a("./webgl/MeshShader")}},{"./Mesh":187,"./NineSlicePlane":188,"./Plane":189,"./Rope":190,"./webgl/MeshShader":192}],192:[function(a,b,c){function d(a){e.call(this,a,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["varying vec2 vTextureCoord;","uniform float alpha;","uniform vec3 tint;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);","}"].join("\n"))}var e=a("../../core/Shader");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{"../../core/Shader":77}],193:[function(a,b,c){function d(a,b,c){e.Container.call(this),c=c||15e3,a=a||15e3;var d=16384;c>d&&(c=d),c>a&&(c=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=a,this._batchSize=c,this._glBuffers=[],this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=e.BLEND_MODES.NORMAL,this.roundPixels=!0,this.baseTexture=null,this.setProperties(b)}var e=a("../core");d.prototype=Object.create(e.Container.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])},d.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},d.prototype.renderWebGL=function(a){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){this.onChildrenChange(0)},this)),a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},d.prototype.onChildrenChange=function(a){var b=Math.floor(a/this._batchSize);b<this._bufferToUpdate&&(this._bufferToUpdate=b)},d.prototype.renderCanvas=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var b=a.context,c=this.worldTransform,d=!0,e=0,f=0,g=0,h=0,i=a.blendModes[this.blendMode];i!==b.globalCompositeOperation&&(b.globalCompositeOperation=i),b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var j=0;j<this.children.length;++j){var k=this.children[j];if(k.visible){var l=k.texture.frame;if(b.globalAlpha=this.worldAlpha*k.alpha,k.rotation%(2*Math.PI)===0)d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx*a.resolution,c.ty*a.resolution),d=!1),e=k.anchor.x*(-l.width*k.scale.x)+k.position.x+.5,f=k.anchor.y*(-l.height*k.scale.y)+k.position.y+.5,g=l.width*k.scale.x,h=l.height*k.scale.y;else{d||(d=!0),k.displayObjectUpdateTransform();var m=k.worldTransform;a.roundPixels?b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution|0,m.ty*a.resolution|0):b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution,m.ty*a.resolution),e=k.anchor.x*-l.width+.5,f=k.anchor.y*-l.height+.5,g=l.width,h=l.height}var n=k.texture.baseTexture.resolution;b.drawImage(k.texture.baseTexture.source,l.x*n,l.y*n,l.width*n,l.height*n,e*n,f*n,g*n,h*n)}}}},d.prototype.destroy=function(){if(e.Container.prototype.destroy.apply(this,arguments),this._buffers)for(var a=0;a<this._buffers.length;++a)this._buffers[a].destroy();this._properties=null,this._buffers=null}},{"../core":97}],194:[function(a,b,c){b.exports={ParticleContainer:a("./ParticleContainer"),ParticleRenderer:a("./webgl/ParticleRenderer")}},{"./ParticleContainer":193,"./webgl/ParticleRenderer":196}],195:[function(a,b,c){function d(a,b,c,d){this.gl=a,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=d,this.dynamicProperties=[],this.staticProperties=[];for(var e=0;e<b.length;e++){var f=b[e];f={attribute:f.attribute,size:f.size,uploadFunction:f.uploadFunction,offset:f.offset},c[e]?this.dynamicProperties.push(f):this.staticProperties.push(f)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}var e=a("pixi-gl-core"),f=a("../../core/utils/createIndicesForQuads");d.prototype.constructor=d,b.exports=d,d.prototype.initBuffers=function(){var a,b,c=this.gl,d=0;for(this.indices=f(this.size),this.indexBuffer=e.GLBuffer.createIndexBuffer(c,this.indices,c.STATIC_DRAW),this.dynamicStride=0,a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],b.offset=d,d+=b.size,this.dynamicStride+=b.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=e.GLBuffer.createVertexBuffer(c,this.dynamicData,c.STREAM_DRAW);var g=0;for(this.staticStride=0,a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],b.offset=g,g+=b.size,this.staticStride+=b.size;for(this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=e.GLBuffer.createVertexBuffer(c,this.staticData,c.STATIC_DRAW),this.vao=new e.VertexArrayObject(c).addIndex(this.indexBuffer),a=0;a<this.dynamicProperties.length;a++)b=this.dynamicProperties[a],this.vao.addAttribute(this.dynamicBuffer,b.attribute,c.FLOAT,!1,4*this.dynamicStride,4*b.offset);for(a=0;a<this.staticProperties.length;a++)b=this.staticProperties[a],this.vao.addAttribute(this.staticBuffer,b.attribute,c.FLOAT,!1,4*this.staticStride,4*b.offset)},d.prototype.uploadDynamic=function(a,b,c){for(var d=0;d<this.dynamicProperties.length;d++){var e=this.dynamicProperties[d];e.uploadFunction(a,b,c,this.dynamicData,this.dynamicStride,e.offset)}this.dynamicBuffer.upload()},d.prototype.uploadStatic=function(a,b,c){for(var d=0;d<this.staticProperties.length;d++){var e=this.staticProperties[d];e.uploadFunction(a,b,c,this.staticData,this.staticStride,e.offset)}this.staticBuffer.upload()},d.prototype.bind=function(){this.vao.bind()},d.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()}},{"../../core/utils/createIndicesForQuads":149,"pixi-gl-core":12}],196:[function(a,b,c){function d(a){e.ObjectRenderer.call(this,a),this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new e.Matrix,this.CONTEXT_UID=0}var e=a("../../core"),f=a("./ParticleShader"),g=a("./ParticleBuffer");d.prototype=Object.create(e.ObjectRenderer.prototype),d.prototype.constructor=d,b.exports=d,e.WebGLRenderer.registerPlugin("particle",d),d.prototype.onContextChange=function(){var a=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new f(a),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},d.prototype.start=function(){this.renderer.bindShader(this.shader)},d.prototype.render=function(a){var b=a.children,c=b.length,d=a._maxSize,e=a._batchSize;if(0!==c){c>d&&(c=d);var f=a._glBuffers[this.renderer.CONTEXT_UID];f||(f=a._glBuffers[this.renderer.CONTEXT_UID]=this.generateBuffers(a)),this.renderer.setBlendMode(a.blendMode);var g=this.renderer.gl,h=a.worldTransform.copy(this.tempMatrix);h.prepend(this.renderer._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=h.toArray(!0),this.shader.uniforms.uAlpha=a.worldAlpha;var i=b[0]._texture.baseTexture;this.renderer.bindTexture(i);for(var j=0,k=0;c>j;j+=e,k+=1){var l=c-j;l>e&&(l=e);var m=f[k];m.uploadDynamic(b,j,l),a._bufferToUpdate===k&&(m.uploadStatic(b,j,l),a._bufferToUpdate=k+1),m.vao.bind().draw(g.TRIANGLES,6*l).unbind()}}},d.prototype.generateBuffers=function(a){var b,c=this.renderer.gl,d=[],e=a._maxSize,f=a._batchSize,h=a._properties;for(b=0;e>b;b+=f)d.push(new g(c,this.properties,h,f));return d},d.prototype.uploadVertices=function(a,b,c,d,e,f){for(var g,h,i,j,k,l,m,n,o,p,q=0;c>q;q++)g=a[b+q],h=g._texture,k=g.scale.x,l=g.scale.y,i=h.trim,j=h.orig,i?(n=i.x-g.anchor.x*j.width,m=n+i.width,p=i.y-g.anchor.y*j.height,o=p+i.height):(m=j.width*(1-g.anchor.x),n=j.width*-g.anchor.x,o=j.height*(1-g.anchor.y),p=j.height*-g.anchor.y),d[f]=n*k,d[f+1]=p*l,d[f+e]=m*k,d[f+e+1]=p*l,d[f+2*e]=m*k,d[f+2*e+1]=o*l,d[f+3*e]=n*k,d[f+3*e+1]=o*l,f+=4*e},d.prototype.uploadPosition=function(a,b,c,d,e,f){for(var g=0;c>g;g++){var h=a[b+g].position;d[f]=h.x,d[f+1]=h.y,d[f+e]=h.x,d[f+e+1]=h.y,d[f+2*e]=h.x,d[f+2*e+1]=h.y,d[f+3*e]=h.x,d[f+3*e+1]=h.y,f+=4*e}},d.prototype.uploadRotation=function(a,b,c,d,e,f){for(var g=0;c>g;g++){var h=a[b+g].rotation;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},d.prototype.uploadUvs=function(a,b,c,d,e,f){for(var g=0;c>g;g++){var h=a[b+g]._texture._uvs;h?(d[f]=h.x0,d[f+1]=h.y0,d[f+e]=h.x1,d[f+e+1]=h.y1,d[f+2*e]=h.x2,d[f+2*e+1]=h.y2,d[f+3*e]=h.x3,d[f+3*e+1]=h.y3,f+=4*e):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0,f+=4*e)}},d.prototype.uploadAlpha=function(a,b,c,d,e,f){for(var g=0;c>g;g++){var h=a[b+g].alpha;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},d.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.ObjectRenderer.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../core":97,"./ParticleBuffer":195,"./ParticleShader":197}],197:[function(a,b,c){function d(a){e.call(this,a,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"))}var e=a("../../core/Shader");d.prototype=Object.create(e.prototype),d.prototype.constructor=d,b.exports=d},{"../../core/Shader":77}],198:[function(a,b,c){Math.sign||(Math.sign=function(a){return a=+a,0===a||isNaN(a)?a:a>0?1:-1})},{}],199:[function(a,b,c){Object.assign||(Object.assign=a("object-assign"))},{"object-assign":5}],200:[function(a,b,c){a("./Object.assign"),a("./requestAnimationFrame"),a("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":198,"./Object.assign":199,"./requestAnimationFrame":201}],201:[function(a,b,c){(function(a){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!a.performance||!a.performance.now){var b=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-b}}for(var c=Date.now(),d=["ms","moz","webkit","o"],e=0;e<d.length&&!a.requestAnimationFrame;++e)a.requestAnimationFrame=a[d[e]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d[e]+"CancelAnimationFrame"]||a[d[e]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(a){if("function"!=typeof a)throw new TypeError(a+"is not a function");var b=Date.now(),d=16+c-b;return 0>d&&(d=0),c=b,setTimeout(function(){c=Date.now(),a(performance.now())},d)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],202:[function(a,b,c){function d(){}var e=a("../../core");d.prototype.constructor=d,b.exports=d,d.prototype.upload=function(a,b){"function"==typeof a&&(b=a,a=null),b()},d.prototype.register=function(){return this},d.prototype.add=function(){return this},d.prototype.destroy=function(){},e.CanvasRenderer.registerPlugin("prepare",d)},{"../../core":97}],203:[function(a,b,c){b.exports={webGL:a("./webgl/WebGLPrepare"),canvas:a("./canvas/CanvasPrepare")}},{"./canvas/CanvasPrepare":202,"./webgl/WebGLPrepare":204}],204:[function(a,b,c){function d(a){this.renderer=a,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.register(g,e).register(h,f)}function e(a,b){return b instanceof i.BaseTexture&&(a.textureManager.updateTexture(b),!0)}function f(a,b){return b instanceof i.Graphics&&(a.plugins.graphics.updateGraphics(b),!0)}function g(a,b){if(a instanceof i.BaseTexture)return-1===b.indexOf(a)&&b.push(a),!0;if(a._texture&&a._texture instanceof i.Texture){var c=a._texture.baseTexture;return-1===b.indexOf(c)&&b.push(c),!0}return!1}function h(a,b){return a instanceof i.Graphics&&(b.push(a),!0)}var i=a("../../core"),j=i.ticker.shared;d.UPLOADS_PER_FRAME=4,d.prototype.constructor=d,b.exports=d,d.prototype.upload=function(a,b){"function"==typeof a&&(b=a,a=null),a&&this.add(a),this.queue.length?(this.numLeft=d.UPLOADS_PER_FRAME,this.completes.push(b),this.ticking||(this.ticking=!0,j.add(this.tick,this))):b()},d.prototype.tick=function(){for(var a,b;this.queue.length&&this.numLeft>0;){var c=this.queue[0],e=!1;for(a=0,b=this.uploadHooks.length;b>a;a++)if(this.uploadHooks[a](this.renderer,c)){this.numLeft--,this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)this.numLeft=d.UPLOADS_PER_FRAME;else{this.ticking=!1,j.remove(this.tick,this);var f=this.completes.slice(0);for(this.completes.length=0,a=0,b=f.length;b>a;a++)f[a]()}},d.prototype.register=function(a,b){return a&&this.addHooks.push(a),b&&this.uploadHooks.push(b),this},d.prototype.add=function(a){var b,c;for(b=0,c=this.addHooks.length;c>b&&!this.addHooks[b](a,this.queue);b++);if(a instanceof i.Container)for(b=a.children.length-1;b>=0;b--)this.add(a.children[b]);return this},d.prototype.destroy=function(){this.ticking&&j.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null},i.WebGLRenderer.registerPlugin("prepare",d)},{"../../core":97}],205:[function(a,b,c){(function(c){a("./polyfill");var d=b.exports=a("./core");d.extras=a("./extras"),d.filters=a("./filters"),d.interaction=a("./interaction"),d.loaders=a("./loaders"),d.mesh=a("./mesh"),d.particles=a("./particles"),d.accessibility=a("./accessibility"),d.extract=a("./extract"),d.prepare=a("./prepare"),d.loader=new d.loaders.Loader,Object.assign(d,a("./deprecation")),c.PIXI=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":76,"./core":97,"./deprecation":154,"./extract":156,"./extras":164,"./filters":175,"./interaction":180,"./loaders":183,"./mesh":191,"./particles":194,"./polyfill":200,"./prepare":203}]},{},[205])(205)});var VirtualScroll=function(a){var c,f,g,l,b={},d=[],e=!1,h=2,i=15,j=120,k=1,m="onwheel"in a,n="onmousewheel"in a,o="ontouchstart"in a,p=navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,q=!!window.navigator.msPointerEnabled,r="onkeydown"in a,s=navigator.userAgent.indexOf("Firefox")>-1,t={y:0,x:0,deltaX:0,deltaY:0,originalEvent:null};b.on=function(a){e||A(),d.push(a),c=d.length},b.options=function(a){j=a.keyStep||120,i=a.firefoxMult||15,h=a.touchMult||2,k=a.mouseMult||1},b.off=function(a){d.splice(a,1),c=d.length,c<=0&&B()};var u=function(a){t.x+=t.deltaX,t.y+=t.deltaY,t.originalEvent=a;for(var b=0;b<c;b++)d[b](t)},v=function(a){t.deltaX=a.wheelDeltaX||a.deltaX*-1,t.deltaY=a.wheelDeltaY||a.deltaY*-1,Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(t.deltaY=t.deltaX),s&&1==a.deltaMode&&(t.deltaX*=i,t.deltaY*=i),t.deltaX*=k,t.deltaY*=k,u(a)},w=function(a){t.deltaX=a.wheelDeltaX?a.wheelDeltaX:0,t.deltaY=a.wheelDeltaY?a.wheelDeltaY:a.wheelDelta,u(a)},x=function(a){var b=a.targetTouches?a.targetTouches[0]:a;f=b.pageX,g=b.pageY},y=function(a){var b=a.targetTouches?a.targetTouches[0]:a;t.deltaX=(b.pageX-f)*h,t.deltaY=(b.pageY-g)*h,Math.abs(t.deltaX)>Math.abs(t.deltaY)&&(t.deltaY=t.deltaX),f=b.pageX,g=b.pageY,u(a)},z=function(a){switch(t.deltaX=t.deltaY=0,a.keyCode){case 37:t.deltaX=-j;break;case 39:t.deltaX=j;break;case 38:t.deltaY=j;break;case 40:t.deltaY=-j}u(a)},A=function(){m&&a.addEventListener("wheel",v),n&&a.addEventListener("mousewheel",w),o&&(a.addEventListener("touchstart",x),a.addEventListener("touchmove",y)),q&&p&&(l=a.body.style.msTouchAction,a.body.style.msTouchAction="none",a.addEventListener("MSPointerDown",x,!0),a.addEventListener("MSPointerMove",y,!0)),r&&a.addEventListener("keydown",z),e=!0},B=function(){m&&a.removeEventListener("wheel",v),n&&a.removeEventListener("mousewheel",w),o&&(a.removeEventListener("touchstart",x),a.removeEventListener("touchmove",y)),q&&p&&(a.body.style.msTouchAction=l,a.removeEventListener("MSPointerDown",x,!0),a.removeEventListener("MSPointerMove",y,!0)),r&&a.removeEventListener("keydown",z),e=!1};return b}(document);!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function i(b){var c=b||window.event,g=d.call(arguments,1),i=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(c),b.type="mousewheel","detail"in c&&(m=c.detail*-1),"wheelDelta"in c&&(m=c.wheelDelta),"wheelDeltaY"in c&&(m=c.wheelDeltaY),"wheelDeltaX"in c&&(l=c.wheelDeltaX*-1),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(l=m*-1,m=0),i=0===m?l:m,"deltaY"in c&&(m=c.deltaY*-1,i=m),"deltaX"in c&&(l=c.deltaX,0===m&&(i=l*-1)),0!==m||0!==l){if(1===c.deltaMode){var q=a.data(this,"mousewheel-line-height");i*=q,m*=q,l*=q}else if(2===c.deltaMode){var r=a.data(this,"mousewheel-page-height");i*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||n<f)&&(f=n,k(c,n)&&(f/=40)),k(c,n)&&(i/=40,l/=40,m/=40),i=Math[i>=1?"floor":"ceil"](i/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),h.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,g.unshift(b,i,l,m),e&&clearTimeout(e),e=setTimeout(j,200),(a.event.dispatch||a.event.handle).apply(this,g)}}function j(){f=null}function k(a,b){return h.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice;if(a.event.fixHooks)for(var g=b.length;g;)a.event.fixHooks[b[--g]]=a.event.mouseHooks;var h=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var b=c.length;b;)this.addEventListener(c[--b],i,!1);else this.onmousewheel=i;a.data(this,"mousewheel-line-height",h.getLineHeight(this)),a.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var b=c.length;b;)this.removeEventListener(c[--b],i,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){if(navigator.userAgent.match(/Macintosh/)){var b=navigator.userAgent.indexOf("Chrome")>-1,c=navigator.userAgent.indexOf("Safari")>-1,d=navigator.userAgent.indexOf("Firefox")>-1;(b||c||d)&&a(window).on("mousewheel",function(b){var c,d;c=b.deltaX<0&&0===a(b.target).parents().filter(function(){return a(this).scrollLeft()>0}).length,d=b.deltaY>0&&0===!a(b.target).parents().filter(function(){return a(this).scrollTop()>0}).length,c&&b.preventDefault()})}}(jQuery);var currentMousePos={x:-1,y:-1};$(document).mousemove(function(a){currentMousePos.x=a.pageX,currentMousePos.y=a.pageY});var is_safari=!1,is_chrome=!1,ua=navigator.userAgent.toLowerCase();ua.indexOf("safari")!=-1&&(ua.indexOf("chrome")>-1?is_chrome=!0:is_safari=!0),document.addEventListener("touchmove",function(a){currentMousePos.x=a.pageX,currentMousePos.y=a.pageY},{passive:!0}),window.addEventListener("orientationchange",function(){window.location.href=window.location.href},!1);var random,x1,y1,x2,y2,x3,y3,first_load=!0,le_num_projets,la_progression,a_clique,siv,siv2,page_actuelle="",go_to,transition_en_cours=!1,premier=!0,effet_3D=!0,step,liste_clients=!0,retour_projet=0,num_declancheur=0,depart=!0,premier_slide,nombre_animations,projet_a_projet=!1,projet_a_projets=!1,element_apres,navigateur=!1,dernier_num_pro,ultime_calcul,le_lien,cest_bon=!1,anti_saut=!0,marge_haut=0,difference=0,is_clicked=!1,click_start_drag=!0,marge_left,pourcent_drag,pourcent_drag2,pourcent_scroll,current_value=0,scroll=new Smooth({native:!1,preload:!0,section:document.querySelector(".vs-section"),direction:"horizontal"}),counter={var:scroll.vars.target};history.pushState({},"",location),$(document).ready(function(){function b(a){0==first_load&&TweenMax.to("#progress_bar",.5,{scaleX:a.progress,ease:Linear.easeNone}),la_progression=a.progress}function c(a){TweenMax.to("#progress_bar",.5,{opacity:0,onComplete:function(){TweenMax.to("#progress_bar",0,{opacity:1,scaleX:0})}}),TweenMax.to("#scroll_down",.5,{opacity:1,ease:Power3.easeInOut})}function o(){$("#temp").addClass("antiflou").css("opacity","1"),TweenMax.to(".slide_main",0,{scale:1,ease:Power2.easeInOut}),TweenMax.to(".slide_back_1, .slide_back_2, #inner_pager",0,{opacity:1,ease:Power3.easeInOut}),TweenMax.to(".inner_s2",.5,{scale:"0.8",delay:.5,ease:Power1.easeInOut}),TweenMax.to(".inner_main",.5,{scale:"0.8",delay:.6,ease:Power1.easeInOut}),TweenMax.to(".inner_h2",.5,{scale:"0.8",delay:.7,ease:Power1.easeInOut}),TweenMax.to(".inner_s1",.5,{scale:"0.8",delay:.8,ease:Power1.easeInOut}),TweenMax.to("#temp",.5,{opacity:"0",delay:.8,ease:Power1.easeInOut}),$("#open_menu").hasClass("open")||($("#temp").addClass("direct antiflou").css("opacity","1")),transition_en_cours=!0,clearInterval(siv),$("#slider").hide()}function p(){TweenMax.to("#multilangue",.2,{opacity:0,onComplete:function(){TweenMax.to("#multilangue",0,{opacity:0}),$("#multilangue").hide()}}),$("#open_menu").toggleClass("open"),$("#main").removeClass("flou"),TweenMax.to("nav > div",.5,{x:"-100%",ease:Power3.easeInOut}),TweenMax.to("nav",.5,{x:"100%",ease:Power3.easeInOut,onComplete:function(){TweenMax.to(".l1, .l3",.3,{scaleX:"1",ease:Power3.easeInOut}),TweenMax.to(".l2",.3,{scaleX:"1",ease:Power3.easeInOut}),TweenMax.to("nav",0,{x:"-100%"}),TweenMax.to("nav > div",0,{x:"0%"}),TweenMax.to(".inner_item_menu",0,{x:"-250px"}),TweenMax.to(".item_menu",0,{x:"100%"}),$("#inner_drag").toggleClass("z8")}}),$("#contact")[0]&&(TweenMax.to("#bon_logo_b",0,{opacity:0,delay:.3}),TweenMax.to("#bon_logo_n",0,{opacity:1,delay:.3}),setTimeout(function(){$("canvas").addClass("difference"),$("#bon_logo_b").removeClass("current"),$("#bon_logo_n").addClass("current")},300))}function q(){$("#slider")[0]&&0==premier&&(effet_3D=!0,TweenMax.to(".inner_s2, .inner_main, .inner_h2, .inner_s1",0,{scale:"1"}),$("body").css("background","#000"),TweenMax.to("#pager, #pager2",1,{opacity:"1",delay:.3,ease:Power1.easeInOut}),s(),clearInterval(siv),siv=setInterval(function(){s()},5800)),$("#inner_projets")[0]&&(marge_haut=$(".le_projet_num_0").offset().top,difference=$(".le_projet_num_2").offset().top-$(".le_projet_num_1").offset().top,E(),0==premier&&1==projet_a_projets?($("body").addClass("rapide"),setTimeout(function(){$("body").removeClass("rapide")},800),setTimeout(function(){M(retour_projet-1),scroll.off(onscroll)},200),setTimeout(function(){$("#temp_retour_projet").hide(),effet_3D=!0,TweenMax.to(".linner_h2:eq("+element_apres+")",0,{x:"80px"}),TweenMax.to("#temp_retour_projet .img_projet_single",0,{scale:1.35}),TweenMax.to("#tous_projets",0,{x:"0vw",opacity:1}),$(".inner_h3:eq("+element_apres+"), .linner_h2:eq("+element_apres+")").css("opacity","0"),TweenMax.to(".num_projet, .trait2, #inner_drag",0,{opacity:"0"}),TweenMax.to(".num_projet, .trait2, #inner_drag, .inner_h3:eq("+element_apres+"), .linner_h2:eq("+element_apres+")",.5,{opacity:"1"}),scroll.on(onscroll),anti_saut=!1},300)):anti_saut=!1),($(".agence")[0]||$("#single-projet")[0])&&(clearInterval(siv2),siv2=setInterval(function(){TweenMax.to(".scroll_down2 .le_point, .scroll_down2 .fleche_down",.5,{y:"56px",opacity:0,ease:Power2.easeInOut,onComplete:function(){TweenMax.to(".scroll_down2 .le_point, .scroll_down2 .fleche_down",0,{y:"0px",onComplete:function(){TweenMax.to(".scroll_down2 .le_point, .scroll_down2 .fleche_down",.5,{opacity:1,delay:.2})}})}})},5e3),window.innerWidth<=768&&($(".inner_img_agence").css("opacity",0),setTimeout(function(){$(".inner_img_agence").css("opacity",1),cest_bon=!0},2e3))),$(".agence")[0]&&0==premier&&($(".inner_img_agence").addClass("pasvu"),window.innerWidth>450&&setTimeout(function(){Q(),liste_clients=!1},300),$("body").css("background","#000")),$("#single-projet")[0]&&(1==la_progression&&TweenMax.to("#scroll_down",.5,{opacity:1,ease:Power3.easeInOut}),dernier_num_pro=$("#single-projet").attr("data-retour"),$("body, #volet, #masque_projet").css("background",$("#single-projet").attr("data-color")),0==premier&&1==projet_a_projet&&TweenMax.to("#volet",1,{x:"100%",ease:Power2.easeOut,onComplete:function(){TweenMax.to("#volet",0,{x:"-100%"})}}),z(),A(),0==premier&&(scroll.off(onscroll),setTimeout(function(){$("#temp_img").removeClass("yolo"),scroll.on(onscroll)},500)),nombre_animations=$(".declancheur2").length),$("#contact")[0]&&N()}function r(){random=Math.floor(4*Math.random()+1),1==random?(x1="20px",y1="-10px",x2="-10px",y2="-10px",x3="30px",y3="10px"):2==random?(x1="-10px",y1="30px",x2="-40px",y2="-20px",x3="0px",y3="-20px"):3==random?(x1="20px",
y1="20px",x2="-40px",y2="0px",x3="0px",y3="-30px"):4==random&&(x1="0px",y1="-20px",x2="40px",y2="20px",x3="-10px",y3="30px"),TweenMax.to(".a_slide.current .slide_main",5,{x:x1,y:y1,ease:Power1.easeInOut}),TweenMax.to(".a_slide.current .slide_back_1",5,{x:x2,y:y2,ease:Power1.easeInOut}),TweenMax.to(".a_slide.current .slide_back_2",5,{x:x3,y:y3,ease:Power1.easeInOut})}function s(){$(".inner_h2").addClass("temp"),TweenMax.to(".a_slide.current .inner_s2",1.5,{y:"-100%",ease:Power2.easeInOut}),TweenMax.to(".a_slide.current .inner_main",1.5,{y:"-100%",delay:.1,ease:Power2.easeInOut}),TweenMax.to(".a_slide.current .inner_h2",1.5,{y:"-100%",delay:.2,ease:Power2.easeInOut}),TweenMax.to(".a_slide.current .inner_s1",1.5,{y:"-100%",delay:.3,ease:Power2.easeInOut}),$(".a_slide.current").next("div").length?(TweenMax.to($(".a_slide.current").next().find(".inner_s2"),1.5,{y:"-100%",delay:.5,ease:Power2.easeInOut}),TweenMax.to($(".a_slide.current").next().find(".inner_main"),1.5,{y:"-100%",delay:.6,ease:Power2.easeInOut}),TweenMax.to($(".a_slide.current").next().find(".inner_h2"),1.5,{y:"-100%",delay:.7,ease:Power3.easeInOut}),TweenMax.to($(".a_slide.current").next().find(".inner_s1"),1.5,{y:"-100%",delay:.8,ease:Power2.easeInOut,onComplete:function(){u(),$(".inner_h2").removeClass("temp")}})):(TweenMax.to($("#temp .a_slide").first("div").find(".inner_s2"),1.5,{y:"-100%",delay:.5,ease:Power2.easeInOut}),TweenMax.to($("#temp .a_slide").first("div").find(".inner_main"),1.5,{y:"-100%",delay:.6,ease:Power2.easeInOut}),TweenMax.to($("#temp .a_slide").first("div").find(".inner_h2"),1.5,{y:"-100%",delay:.7,ease:Power3.easeInOut}),TweenMax.to($("#temp .a_slide").first("div").find(".inner_s1"),1.5,{y:"-100%",delay:.8,ease:Power2.easeInOut}),TweenMax.to($("#slider .a_slide").first("div").find(".inner_s2"),1.5,{y:"-100%",delay:.5,ease:Power2.easeInOut}),TweenMax.to($("#slider .a_slide").first("div").find(".inner_main"),1.5,{y:"-100%",delay:.6,ease:Power2.easeInOut}),TweenMax.to($("#slider .a_slide").first("div").find(".inner_h2"),1.5,{y:"-100%",delay:.7,ease:Power3.easeInOut}),TweenMax.to($("#slider .a_slide").first("div").find(".inner_s1"),1.5,{y:"-100%",delay:.8,ease:Power2.easeInOut,onComplete:function(){u(),$(".inner_h2").removeClass("temp")}})),w()}function t(){$(".inner_h2").addClass("temp"),TweenMax.to(".a_slide.current .inner_s2",1.5,{y:"100%",delay:.3,ease:Power2.easeInOut}),TweenMax.to(".a_slide.current .inner_main",1.5,{y:"100%",delay:.2,ease:Power2.easeInOut}),TweenMax.to(".a_slide.current .inner_h2",1.5,{y:"100%",delay:.1,ease:Power2.easeInOut}),TweenMax.to(".a_slide.current .inner_s1",1.5,{y:"100%",ease:Power2.easeInOut}),TweenMax.to(".a_slide.pas_current",0,{y:"-100%"}),$(".a_slide.current").prev("div").length?(TweenMax.to($(".a_slide.current").prev().find(".inner_s2"),1.5,{y:"100%",delay:.8,ease:Power2.easeInOut,onComplete:function(){v(),$(".inner_h2").removeClass("temp")}}),TweenMax.to($(".a_slide.current").prev().find(".inner_main"),1.5,{y:"100%",delay:.7,ease:Power2.easeInOut}),TweenMax.to($(".a_slide.current").prev().find(".inner_h2"),1.5,{y:"100%",delay:.6,ease:Power3.easeInOut}),TweenMax.to($(".a_slide.current").prev().find(".inner_s1"),1.5,{y:"100%",delay:.5,ease:Power2.easeInOut})):(TweenMax.to($("#temp .a_slide").last("div").find(".inner_s2"),1.5,{y:"100%",delay:.8,ease:Power2.easeInOut}),TweenMax.to($("#temp .a_slide").last("div").find(".inner_main"),1.5,{y:"100%",delay:.7,ease:Power2.easeInOut}),TweenMax.to($("#temp .a_slide").last("div").find(".inner_h2"),1.5,{y:"100%",delay:.6,ease:Power3.easeInOut}),TweenMax.to($("#temp .a_slide").last("div").find(".inner_s1"),1.5,{y:"100%",delay:.5,ease:Power2.easeInOut}),TweenMax.to($("#slider .a_slide").last("div").find(".inner_s2"),1.5,{y:"100%",delay:.8,ease:Power2.easeInOut,onComplete:function(){v(),$(".inner_h2").removeClass("temp")}}),TweenMax.to($("#slider .a_slide").last("div").find(".inner_main"),1.5,{y:"100%",delay:.7,ease:Power2.easeInOut}),TweenMax.to($("#slider .a_slide").last("div").find(".inner_h2"),1.5,{y:"100%",delay:.6,ease:Power3.easeInOut}),TweenMax.to($("#slider .a_slide").last("div").find(".inner_s1"),1.5,{y:"100%",delay:.5,ease:Power2.easeInOut})),x()}function u(){1==premier_slide&&($(".current_none").addClass("pas_current"),premier_slide=!1),$(".current_none").removeClass("current_none"),$(".a_slide.current").next("div").length?$(".a_slide.current").removeClass("current").addClass("pas_current").next("div").addClass("current").removeClass("pas_current"):($(".a_slide.current").removeClass("current").addClass("pas_current"),$("#slider .a_slide").first("div").addClass("current").removeClass("pas_current"),$("#temp .a_slide").first("div").addClass("current").removeClass("pas_current")),TweenMax.to(".a_slide.current, .a_slide.current .inner_s2, .a_slide.current .inner_main, .a_slide.pas_current .inner_s2, .a_slide.pas_current .inner_main, .a_slide.current .inner_s1, .a_slide.pas_current .inner_s1, .a_slide.current .inner_h2, .a_slide.pas_current .inner_h2",0,{y:"0%",ease:Power3.easeInOut}),TweenMax.to(".a_slide.pas_current",0,{y:"100%",ease:Power3.easeInOut}),TweenMax.to(".a_slide.pas_current .slide_main, .a_slide.pas_current .slide_back_1, .a_slide.pas_current .slide_back_2",0,{y:"0",x:"0",ease:Power3.easeInOut}),r()}function v(){$(".current_none").removeClass("current_none"),$(".a_slide.current").prev("div").length?$(".a_slide.current").removeClass("current").addClass("pas_current").prev("div").addClass("current").removeClass("pas_current"):($(".a_slide.current").removeClass("current").addClass("pas_current"),$("#slider .a_slide").last("div").addClass("current").removeClass("pas_current"),$("#temp .a_slide").last("div").addClass("current").removeClass("pas_current")),TweenMax.to(".a_slide.current, .a_slide.current .inner_s2, .a_slide.current .inner_main, .a_slide.current .inner_s1, .a_slide.pas_current .inner_s2, .a_slide.pas_current .inner_main, .a_slide.pas_current .inner_s1, .a_slide.current .inner_h2, .a_slide.pas_current .inner_h2",0,{y:"0%",ease:Power3.easeInOut}),TweenMax.to(".a_slide.pas_current",0,{y:"100%",ease:Power3.easeInOut}),TweenMax.to(".a_slide.pas_current .slide_main, .a_slide.pas_current .slide_back_1, .a_slide.pas_current .slide_back_2",0,{y:"0",x:"0",ease:Power3.easeInOut}),r()}function w(){setTimeout(function(){$("#pager .current, #pager2 .current").next().length?$("#pager .current, #pager2 .current").removeClass("current").next().addClass("current"):$("#pager div:first-child, #pager2 div:first-child").addClass("current").siblings().removeClass("current")},1e3)}function x(){setTimeout(function(){$("#pager .current, #pager2 .current").prev().length?$("#pager .current, #pager2 .current").removeClass("current").prev().addClass("current"):$("#pager div:last-child, #pager2 div:last-child").addClass("current").siblings().removeClass("current")},1e3)}function y(){$(".planete").hover(function(){$("#nom_central_child").html($(this).attr("data-nom")),TweenMax.to(".cercle",.2,{opacity:"0",ease:Power3.easeInOut}),TweenMax.to($(this).find("div"),.2,{backgroundColor:$(this).attr("data-color"),ease:Power3.easeInOut}),TweenMax.to("#nom_central_child",.2,{opacity:"1",ease:Power3.easeInOut}),TweenMax.to("#trait_fond div",.2,{x:"0%",ease:Power3.easeInOut}),TweenMax.to("#trait_fond div",0,{backgroundColor:$(this).attr("data-color")})},function(){TweenMax.to(".cercle",.2,{opacity:"1",ease:Power3.easeInOut}),TweenMax.to($(this).find("div"),.2,{backgroundColor:"#FFFFFF",ease:Power3.easeInOut}),TweenMax.to("#nom_central_child",.2,{opacity:"0",ease:Power3.easeInOut}),TweenMax.to("#trait_fond div",.2,{x:"100%",ease:Power3.easeInOut,onComplete:function(){TweenMax.to("#trait_fond div",0,{x:"-101%"})}})})}function z(){$(".quitter_projet").hover(function(){window.innerWidth>450&&(TweenMax.to($(this).find(".croix"),.3,{scaleX:"0.5",y:"-5px",ease:Power3.easeOut}),TweenMax.to($(this).find(".first"),.3,{x:"-5px",ease:Power3.easeOut}),TweenMax.to($(this).find(".last"),.3,{x:"5px",ease:Power3.easeOut,onComplete:function(){$("a.quitter_projet").is(":hover")&&($(".tige").addClass("oui"),TweenMax.to("#footer_single > a div.tige",.3,{scaleY:"1",ease:Power3.easeOut}))}}))},function(){$(".tige").hasClass("oui")?($(".tige").removeClass("oui"),TweenMax.to("#footer_single > a div.tige",.3,{scaleY:"0",ease:Power3.easeInOut,onComplete:function(){TweenMax.to($(".quitter_projet").find(".croix"),.3,{scaleX:"1",y:"0px",ease:Power3.easeOut}),TweenMax.to($(".quitter_projet").find(".first"),.3,{x:"0px",ease:Power3.easeOut}),TweenMax.to($(".quitter_projet").find(".last"),.3,{x:"0px",ease:Power3.easeOut})}})):(TweenMax.to($(".quitter_projet").find(".croix"),.3,{scaleX:"1",y:"0px",ease:Power3.easeOut}),TweenMax.to($(".quitter_projet").find(".first"),.3,{x:"0px",ease:Power3.easeOut}),TweenMax.to($(".quitter_projet").find(".last"),.3,{x:"0px",ease:Power3.easeOut}))})}function A(){$(".next").hover(function(){TweenMax.to($(this).find(".fond2"),.2,{x:"100%",ease:Power3.easeOut}),TweenMax.to($(this).find(".fond2 div"),.2,{x:"-100%",ease:Power3.easeOut})},function(){TweenMax.to($(this).find(".fond2, .fond2 div"),.2,{x:"0%",ease:Power3.easeOut})}),$(".prev").hover(function(){TweenMax.to($(this).find(".fond2"),.2,{x:"-100%",ease:Power3.easeOut}),TweenMax.to($(this).find(".fond2 div"),.2,{x:"100%",ease:Power3.easeOut})},function(){TweenMax.to($(this).find(".fond2, .fond2 div"),.2,{x:"0%",ease:Power3.easeOut})})}function B(a,b,c){var d=$(".vs-section").offset().left;setTimeout(function(){var e=$(".vs-section").offset().left;d==e?C(a,b,c):B(a,b,c)},30)}function C(a,b,c){TweenMax.to(a,1,{scale:1.35,rotationY:0,rotationX:0,delay:.5,ease:Power2.easeInOut,onComplete:function(){$("#temp_img").addClass("yolo"),$("#temp_img").attr("style","background:url("+$(a).attr("data-img")+") 50% 50%;"),k.load(b+" #main>*",m)}}),TweenMax.to($(".un_projet:eq("+c+")").siblings(),.5,{opacity:0,delay:.5,ease:Power2.easeInOut}),TweenMax.to(".trait2, .num_projet",.5,{opacity:0,delay:.5,ease:Power2.easeInOut}),TweenMax.to("#inner_drag",.5,{y:"100%",delay:.5,ease:Power2.easeInOut}),TweenMax.to(".linner_h2 h2, .inner_h3 h3",.5,{y:"-100%",delay:.5,ease:Power2.easeInOut}),window.innerWidth>768&&K(c)}function D(){if(raf=requestAnimationFrame(D),$("#single-projet")[0]&&0==premier&&$("#masque_projet").hide(),$(".un_projet").each(function(){($(this).offset().left<=window.innerWidth/2&&$(this).offset().left>0&&window.innerWidth>768||$(this).offset().top<=window.innerHeight/2&&$(this).offset().top>0&&window.innerWidth<=768)&&($(this).addClass("la").siblings().removeClass("la"),0==is_clicked&&($("body, #point_drag").css("background",$(this).attr("data-color")),$("#mot_drag, #mot_drag2").css("color",$(this).attr("data-color")),$("#fleche_g").css("border-color","transparent "+$(this).attr("data-color")+" transparent transparent"),$("#fleche_d").css("border-color","transparent transparent transparent "+$(this).attr("data-color")),$("#fleche_g2").css("border-color","transparent transparent "+$(this).attr("data-color")+" transparent"),$("#fleche_d2").css("border-color",$(this).attr("data-color")+" transparent transparent transparent")))}),void 0!=num_declancheur&&$(".declancheur").each(function(){$(this).offset().top<=window.innerHeight+window.innerHeight/2&&!$(this).hasClass("deja_joue")&&($(this).addClass("deja_joue").addClass("declan_"+num_declancheur),I("declan_"+num_declancheur),num_declancheur++)}),1==cest_bon&&$(".declancheur2").each(function(){$(this).offset().top<=window.innerHeight&&!$(this).hasClass("deja_joue")&&($(this).addClass("deja_joue"),TweenMax.to($(this).find(".ligne_trans_1 > div.pas_rempli > div"),.5,{scaleX:"0",ease:Power2.easeIn}),TweenMax.to($(this).find(".ligne_trans_2 > div.pas_rempli > div"),.5,{scaleX:"0",delay:.1,ease:Power2.easeIn}),TweenMax.to($(this).find(".ligne_trans_3 > div.pas_rempli > div"),.5,{scaleX:"0",delay:.2,ease:Power2.easeIn}),TweenMax.to($(this).find(".ligne_trans_4 > div.pas_rempli > div"),.5,{scaleX:"0",delay:.3,ease:Power2.easeIn}),TweenMax.to($(this).find(".ligne_trans_5 > div.pas_rempli > div"),.5,{scaleX:"0",delay:.4,ease:Power2.easeIn}))}),1==effet_3D&&window.innerWidth>768&&0==is_safari){var a=100*currentMousePos.x/$(window).innerWidth()*4/100;a-=2;var b=100*currentMousePos.y/$(window).innerHeight()*4/100;b-=2,TweenMax.to(".img_projet",1,{rotationY:a}),TweenMax.to(".img_projet",1,{rotationX:b})}if(1==is_clicked&&(counter={var:scroll.vars.target},1==click_start_drag?(marge_left=window.innerWidth>768?currentMousePos.x-$("#drag").offset().left:currentMousePos.y-$("#drag2").offset().top,click_start_drag=!1):window.innerWidth>768?currentMousePos.x-marge_left-50>=0&&currentMousePos.x-marge_left-50<=$("#inner_drag").width()-$("#drag").width()?TweenMax.to("#drag",.5,{x:currentMousePos.x-marge_left-50}):currentMousePos.x-marge_left-50<0?TweenMax.to("#drag",.5,{x:0}):TweenMax.to("#drag",.5,{x:$("#inner_drag").width()-$("#drag").width()}):currentMousePos.y-marge_left-50>=0&&currentMousePos.y-marge_left-50<=$("#inner_drag2").height()-$("#drag2").height()?TweenMax.to("#drag2",.5,{y:currentMousePos.y-marge_left-50}):currentMousePos.y-marge_left-50<0?TweenMax.to("#drag2",.5,{y:0}):TweenMax.to("#drag2",.5,{y:$("#inner_drag2").height()-$("#drag2").height()}),window.innerWidth>768?(pourcent_drag=100*($("#drag").offset().left-50)/($("#inner_drag").width()-$("#drag").width()),H(),TweenMax.to(counter,.5,{var:pourcent_drag/100*($(".vs-section").width()-window.innerWidth),onUpdate:function(){scroll.vars.current=counter.var,scroll.vars.target=scroll.vars.current}}),ultime_calcul=pourcent_drag/100*$("#content_liste_projets").width()-pourcent_drag/100*60,TweenMax.to("#content_liste_projets",.5,{x:"-"+ultime_calcul+"px"})):(pourcent_drag=100*($("#drag2").offset().top-50)/($("#inner_drag2").height()-$("#drag2").height()),H(),TweenMax.to(counter,.5,{var:pourcent_drag/100*($(".vs-section").height()-window.innerHeight+.05*window.innerHeight+(.5*window.innerHeight-.2*window.innerWidth)),onUpdate:function(){scroll.vars.current=counter.var,scroll.vars.target=scroll.vars.current}}),ultime_calcul=pourcent_drag/100*$("#content_liste_projets").height()-pourcent_drag/100*50,TweenMax.to("#content_liste_projets",.5,{y:"-"+ultime_calcul+"px"}))),null!=scroll&&$("#inner_projets")[0]&&window.innerWidth>768)for(F=0;F<le_num_projets;F++)1==anti_saut?TweenMax.to(".un_projet .linner_h2:eq("+F+")",0,{x:+(parseInt(scroll.vars.current)-F*($(".un_projet").width()+(window.innerWidth-.92*window.innerHeight)/2))*-.1+"px",ease:Power2.easeOut}):TweenMax.to(".un_projet .linner_h2:eq("+F+")",2,{x:+(parseInt(scroll.vars.current)-F*($(".un_projet").width()+(window.innerWidth-.92*window.innerHeight)/2))*-.1+"px",ease:Power2.easeOut});if($("#single-projet")[0]&&0!=nombre_animations)for(F=0;F<nombre_animations;F++)TweenMax.to(".declancheur2:eq("+F+") .step1",2,{y:-.15*(window.innerHeight/2-$(".declancheur2:eq("+F+") .repere").offset().top)+"px",ease:Power2.easeOut}),TweenMax.to(".declancheur2:eq("+F+") .step2",2,{y:-.2*(window.innerHeight/2-$(".declancheur2:eq("+F+") .repere").offset().top)+"px",ease:Power2.easeOut}),TweenMax.to(".declancheur2:eq("+F+") .step3",2,{y:-.1*(window.innerHeight/2-$(".declancheur2:eq("+F+") .repere").offset().top)+"px",ease:Power2.easeOut}),TweenMax.to(".declancheur2:eq("+F+") .step4",2,{y:-.3*(window.innerHeight/2-$(".declancheur2:eq("+F+") .repere").offset().top)+"px",ease:Power2.easeOut}),TweenMax.to(".declancheur2:eq("+F+") .step1_v",2,{x:.15*(window.innerHeight/2-$(".declancheur2:eq("+F+") .repere").offset().top)+"px",ease:Power2.easeOut}),TweenMax.to(".declancheur2:eq("+F+") .step2_v",2,{x:.2*(window.innerHeight/2-$(".declancheur2:eq("+F+") .repere").offset().top)+"px",ease:Power2.easeOut}),TweenMax.to(".declancheur2:eq("+F+") .step3_v",2,{x:.3*(window.innerHeight/2-$(".declancheur2:eq("+F+") .repere").offset().top)+"px",ease:Power2.easeOut}),TweenMax.to(".declancheur2:eq("+F+") .step4_v",2,{x:.1*(window.innerHeight/2-$(".declancheur2:eq("+F+") .repere").offset().top)+"px",ease:Power2.easeOut});$("#inner_projets")[0]&&(le_num_projets=$(".un_projet").length,window.innerWidth>768&&$("#inner_projets").css("width",le_num_projets*$(".un_projet").width()+(le_num_projets+1)*(window.innerWidth-.92*window.innerHeight)/2)),i.x-=current_value,i.y-=current_value,f.filters=[j],e.render(f)}function E(){$("#drag").mouseup(function(){$("#mot_drag, #point_drag").removeClass("hide"),J()}).mousedown(function(){is_clicked=!0,$("#mot_drag, #point_drag").addClass("hide"),$("#liste_projets, #inner_content_liste_projets").show(),TweenMax.to("#liste_projets",.2,{opacity:"0.94",ease:Power3.easeInOut,onComplete:function(){$("#liste_projets").addClass("transi_05")}}),TweenMax.to("#inner_content_liste_projets",.2,{opacity:"1",ease:Power3.easeInOut})}),$("body").mouseup(function(){1==is_clicked&&J()}),$("#drag2").mouseup(function(){J()}).mousedown(function(){is_clicked=!0,$("#liste_projets, #inner_content_liste_projets").show(),TweenMax.to("#liste_projets",.2,{opacity:"0.94",ease:Power3.easeInOut,onComplete:function(){$("#liste_projets").addClass("transi_05")}}),TweenMax.to("#inner_content_liste_projets",.2,{opacity:"1",ease:Power3.easeInOut})}),$("#drag2, #drag").bind("touchstart",function(a){is_clicked=!0,$("#liste_projets, #inner_content_liste_projets").show(),TweenMax.to("#liste_projets",.2,{opacity:"0.94",ease:Power3.easeInOut,onComplete:function(){$("#liste_projets").addClass("transi_05")}}),TweenMax.to("#inner_content_liste_projets",.2,{opacity:"1",ease:Power3.easeInOut})}),$("#drag2, #drag").bind("touchend",function(a){J()})}function H(){for(F=0;F<le_num_projets;F++)pourcent_drag>=F*(100/le_num_projets)&&pourcent_drag<=(F+1)*(100/le_num_projets)?(G=F,$("#content_liste_projets > div:eq("+F+") .nom_liste").hasClass("deja_joue")||(TweenMax.to("#content_liste_projets > div:eq("+F+") .nom_liste",0,{x:"-100px",opacity:"0",onComplete:function(){$(".nom_liste").removeClass("deja_joue"),$("#content_liste_projets > div:eq("+F+") .nom_liste").addClass("deja_joue"),TweenMax.to("#content_liste_projets > div:eq("+F+") .nom_liste",.3,{x:"0px",opacity:"1",ease:Power3.easeInOut})}}),$("#content_liste_projets > div:eq("+F+")").addClass("current").siblings().removeClass("current"),$("#liste_projets, #point_drag, body").css("background",$("#content_liste_projets > div:eq("+F+")").attr("data-color")),$("#fleche_g").css("border-color","transparent "+$("#content_liste_projets > div:eq("+F+")").attr("data-color")+" transparent transparent"),$("#fleche_d").css("border-color","transparent transparent transparent "+$("#content_liste_projets > div:eq("+F+")").attr("data-color")),$("#fleche_g2").css("border-color","transparent transparent "+$("#content_liste_projets > div:eq("+F+")").attr("data-color")+" transparent"),$("#fleche_d2").css("border-color",$("#content_liste_projets > div:eq("+F+")").attr("data-color")+" transparent transparent transparent"),$("#mot_drag, #mot_drag2").css("color",$("#content_liste_projets > div:eq("+F+")").attr("data-color")))):$("#content_liste_projets > div:eq("+F+") .nom_liste").hasClass("deja_joue")||TweenMax.to("#content_liste_projets > div:eq("+F+") .nom_liste",.3,{opacity:"0",x:"-100px"})}function I(a){TweenMax.to("."+a+", ."+a+" > div.step1, ."+a+" > div.step1_v",1.5,{opacity:"1",ease:Power3.easeInOut}),TweenMax.to("."+a+" > div.step2, ."+a+" > div.step2_v",1.5,{opacity:"1",delay:.2,ease:Power3.easeInOut}),TweenMax.to("."+a+" > div.step3, ."+a+" > div.step3_v",1.5,{opacity:"1",delay:.4,ease:Power3.easeInOut}),TweenMax.to("."+a+" > div.step4, ."+a+" > div.step4_v",1.5,{opacity:"1",delay:.6,ease:Power3.easeInOut})}function J(){is_clicked=!1,TweenMax.to("#liste_projets, #inner_content_liste_projets",.2,{opacity:"0",ease:Power3.easeInOut,onComplete:function(){$("#liste_projets, #inner_content_liste_projets").hide(),$("#liste_projets").removeClass("transi_05")}}),$("#mot_drag, #point_drag").removeClass("hide"),document.getSelection().removeAllRanges(),click_start_drag=!0,window.innerWidth>768?K(G):L(G)}function K(a){counter={var:scroll.vars.target},TweenMax.to(counter,1,{var:a*((window.innerWidth-.92*window.innerHeight)/2+$(".un_projet").width()),onUpdate:function(){scroll.vars.current=counter.var,scroll.vars.target=scroll.vars.current},ease:Power3.easeInOut}),TweenMax.to($("#drag"),.5,{x:a*((window.innerWidth-.92*window.innerHeight)/2+$(".un_projet").width())/($(".vs-section").width()-window.innerWidth)*($("#inner_drag").width()-$("#drag").width()),ease:Power3.easeInOut})}function L(a){TweenMax.to(counter,1,{var:a*difference,onUpdate:function(){scroll.vars.current=counter.var,scroll.vars.target=scroll.vars.current},ease:Power3.easeInOut}),TweenMax.to($("#drag2"),.5,{y:parseInt(a/(le_num_projets-1)*($("#inner_drag2").height()-$("#drag2").height())),ease:Power3.easeInOut})}function M(a){counter={var:scroll.vars.target},TweenMax.to(counter,0,{var:a*((window.innerWidth-.92*window.innerHeight)/2+$(".un_projet").width()),onUpdate:function(){scroll.vars.current=counter.var,scroll.vars.target=scroll.vars.current},onComplete:function(){scroll.off(onscroll)}}),TweenMax.to($("#drag"),0,{x:a*((window.innerWidth-.92*window.innerHeight)/2+$(".un_projet").width())/($(".vs-section").width()-window.innerWidth+.2*window.innerWidth)*($("#inner_drag").width()-$("#drag").width()),ease:Power3.easeInOut})}function N(){TweenMax.to("#img1",20,{x:"-20%",ease:Power2.easeInOut,onComplete:function(){TweenMax.to("#img1",20,{x:"5%",ease:Power2.easeInOut})}}),TweenMax.to("#img2",20,{y:"-20%",ease:Power2.easeInOut,onComplete:function(){TweenMax.to("#img2",20,{y:"-60%",ease:Power2.easeInOut})}}),TweenMax.to("#img3",20,{x:"25%",ease:Power2.easeInOut,onComplete:function(){TweenMax.to("#img3",20,{x:"10%",ease:Power2.easeInOut,onComplete:function(){N()}})}})}function O(){depart=!1,$("#single-projet")[0]||(depart=!0),$("#contact")[0]?S():R(),TweenMax.to("#inner-single-projet",0,{y:"100%",opacity:"1"}),clearInterval(siv),setTimeout(function(){$("#slider")[0]&&(TweenMax.to("#pager, #pager2",1,{opacity:"1",delay:.3,ease:Power1.easeInOut}),s(),siv=setInterval(function(){s()},5800)),$(".agence")[0]&&(window.innerWidth>450&&Q(),liste_clients=!1),$("#single-projet")[0]&&window.innerWidth>450?TweenMax.to("#inner-single-projet",1.5,{y:"0%",ease:Power3.easeOut,delay:1,onComplete:function(){scroll.on(onscroll),depart=!0}}):$("#single-projet")[0]&&(TweenMax.to("#inner-single-projet",0,{y:"0%"}),depart=!0),TweenMax.to("#tous_projets",0,{x:"20vw"}),$(".num_projet, .trait2, .inner_h3, #inner_drag").css("opacity","0"),TweenMax.to(".un_projet .linner_h2",0,{x:"-20%"}),TweenMax.to("#tous_projets",1,{x:"0vw",opacity:1,delay:1,ease:Power3.easeInOut,onComplete:function(){TweenMax.to(".num_projet, .trait2, .inner_h3, #inner_drag",1.5,{opacity:"1",ease:Power1.easeOut})}}),TweenMax.to(".linner_h2",2.5,{x:"0%",delay:.3,ease:Power1.easeOut}),setTimeout(function(){TweenMax.to("#img1 > div, #img2 > div, #img3 > div, #img1 > div > div, #img2 > div > div, #img3 > div > div",.8,{x:"0%",ease:Power3.easeInOut,onComplete:function(){TweenMax.staggerTo(".contact_child",.8,{x:"0px",ease:Power3.easeInOut},.1),TweenMax.staggerTo(".contact_child > div",.8,{x:"0%",ease:Power3.easeInOut},.1),TweenMax.to(".c_fb",.8,{x:"0px",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".c_fb > div",.8,{x:"0%",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".c_it",.8,{x:"0px",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".c_it > div",.8,{x:"0%",delay:.3,ease:Power3.easeInOut})}})},1e3)},3e3),1==premier&&$("#single-projet")[0]&&window.innerWidth>450&&scroll.off(onscroll),premier=!1}function P(){7==step?(TweenMax.to(".vancou",1,{x:"-150px",delay:.9,ease:Power3.easeInOut,onComplete:function(){TweenMax.to("#map img, #la_phrase",.5,{x:"100%",ease:Power3.easeInOut}),TweenMax.to("#map",.5,{x:"-100%",ease:Power3.easeInOut,onComplete:function(){$("#page_5").show(),setTimeout(function(){y()},2e3),TweenMax.to("#working_with",.5,{x:"0px",ease:Power3.easeInOut}),TweenMax.to("#working_with div",.5,{x:"0%",ease:Power3.easeInOut}),TweenMax.to("#page_5",2,{opacity:"1",delay:.3,ease:Power3.easeInOut}),TweenMax.to("#cta_clients",.5,{x:"0px",delay:.3,ease:Power3.easeInOut}),TweenMax.to("#cta_clients #cta_child",.5,{x:"0%",delay:.3,ease:Power3.easeInOut}),window.innerWidth<=768&&($("#liste_clients_mob").show(),TweenMax.staggerTo("#liste_clients_mob > div > div",.5,{x:"0%",ease:Power3.easeInOut},.05),TweenMax.staggerTo("#liste_clients_mob > div > div > div",.5,{x:"0%",ease:Power3.easeInOut},.05))}})}}),TweenMax.to(".vancou > div",1,{x:"100%",delay:.9,ease:Power3.easeInOut}),TweenMax.to(".mexico",1,{x:"-150px",delay:.8,ease:Power3.easeInOut}),TweenMax.to(".mexico > div",1,{x:"100%",delay:.8,ease:Power3.easeInOut}),TweenMax.to(".fdf",1,{x:"-150px",delay:.7,ease:Power3.easeInOut}),TweenMax.to(".fdf > div",1,{x:"100%",delay:.7,ease:Power3.easeInOut}),TweenMax.to(".washington",1,{x:"-150px",delay:.6,ease:Power3.easeInOut}),TweenMax.to(".washington > div",1,{x:"100%",delay:.6,ease:Power3.easeInOut}),TweenMax.to(".nyc",1,{x:"-150px",delay:.5,ease:Power3.easeInOut}),TweenMax.to(".nyc > div",1,{x:"100%",delay:.5,ease:Power3.easeInOut}),TweenMax.to(".manaus",1,{x:"-150px",delay:.4,ease:Power3.easeInOut}),TweenMax.to(".manaus > div",1,{x:"100%",delay:.4,ease:Power3.easeInOut}),TweenMax.to(".barca",1,{x:"-150px",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".barca > div",1,{x:"100%",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".paris",1,{x:"-150px",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".paris > div",1,{x:"100%",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".dubai",1,{x:"-150px",delay:.1,ease:Power3.easeInOut}),TweenMax.to(".dubai > div",1,{x:"100%",delay:.1,ease:Power3.easeInOut}),TweenMax.to(".hk",1,{x:"-150px",ease:Power3.easeInOut}),TweenMax.to(".hk > div",1,{x:"100%",ease:Power3.easeInOut})):6==step?(TweenMax.to("#page_5",.8,{opacity:"0",ease:Power3.easeInOut,onComplete:function(){$("#page_5").hide()}}),TweenMax.to("#working_with",.5,{x:"-250px",ease:Power3.easeInOut}),TweenMax.to("#working_with div",.5,{x:"100%",ease:Power3.easeInOut}),TweenMax.to("#cta_clients",.5,{x:"-250px",delay:.3,ease:Power3.easeInOut}),TweenMax.to("#cta_clients #cta_child",.5,{x:"100%",delay:.3,ease:Power3.easeInOut,onComplete:function(){TweenMax.to(".ligne_trans_1 > div.pas_rempli > div",.5,{scaleX:"0",ease:Power2.easeOut}),TweenMax.to(".ligne_trans_2 > div.pas_rempli > div",.5,{scaleX:"0",delay:.1,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_3 > div.pas_rempli > div",.5,{scaleX:"0",delay:.2,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_4 > div.pas_rempli > div",.5,{scaleX:"0",delay:.3,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_5 > div.pas_rempli > div",.5,{scaleX:"0",delay:.4,ease:Power2.easeOut}),TweenMax.to(".paragraphe",.5,{x:"0px",y:"-50%",ease:Power3.easeOut}),TweenMax.to(".paragraphe div",.5,{x:"0%",ease:Power3.easeOut}),TweenMax.to(".ligne_trans > .ligne div",.5,{x:"0%",ease:Power3.easeOut})}}),TweenMax.to("#liste_clients_mob > div > div",.5,{x:"-100%",ease:Power3.easeInOut}),TweenMax.to("#liste_clients_mob > div > div > div",.5,{x:"100%",ease:Power3.easeInOut,onComplete:function(){$("#liste_clients_mob").hide()}}),TweenMax.to(".cercle",.2,{opacity:"1",ease:Power3.easeInOut}),TweenMax.to($(".planete").find("div"),.2,{backgroundColor:"#FFFFFF",ease:Power3.easeInOut}),TweenMax.to("#nom_central_child",.2,{opacity:"0",ease:Power3.easeInOut}),TweenMax.to("#trait_fond div",.2,{x:"100%",ease:Power3.easeInOut,onComplete:function(){TweenMax.to("#trait_fond div",0,{x:"-100%"})}})):step>1?(TweenMax.to(".paragraphe",.5,{x:"-316px",y:"-50%",ease:Power3.easeIn}),TweenMax.to(".paragraphe div",.5,{x:"102%",ease:Power3.easeIn}),TweenMax.to(".ligne_trans > .ligne div",.5,{x:"-100%",ease:Power3.easeIn}),TweenMax.to(".ligne_trans_1 > div.pas_rempli > div",.5,{scaleX:"1",ease:Power2.easeIn}),TweenMax.to(".ligne_trans_2 > div.pas_rempli > div",.5,{scaleX:"1",delay:.1,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_3 > div.pas_rempli > div",.5,{scaleX:"1",delay:.2,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_4 > div.pas_rempli > div",.5,{scaleX:"1",delay:.3,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_5 > div.pas_rempli > div",.5,{scaleX:"1",delay:.4,ease:Power2.easeIn,onComplete:function(){$(".img_agence_current").removeClass("img_agence_current").addClass("img_agence_hidden").prev(".inner_img_agence").addClass("img_agence_current").removeClass("img_agence_hidden"),TweenMax.to(".ligne_trans_1 > div.pas_rempli > div",.5,{scaleX:"0",ease:Power2.easeOut}),TweenMax.to(".ligne_trans_2 > div.pas_rempli > div",.5,{scaleX:"0",delay:.1,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_3 > div.pas_rempli > div",.5,{scaleX:"0",delay:.2,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_4 > div.pas_rempli > div",.5,{scaleX:"0",delay:.3,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_5 > div.pas_rempli > div",.5,{scaleX:"0",delay:.4,ease:Power2.easeOut}),TweenMax.to(".paragraphe",.5,{x:"0px",y:"-50%",ease:Power3.easeOut}),TweenMax.to(".paragraphe div",.5,{x:"0%",ease:Power3.easeOut}),TweenMax.to(".ligne_trans > .ligne div",.5,{x:"0%",ease:Power3.easeOut})}})):1==step&&(TweenMax.to(".paragraphe",.5,{x:"-316px",y:"-50%",ease:Power3.easeIn}),TweenMax.to(".paragraphe div",.5,{x:"102%",ease:Power3.easeIn}),TweenMax.to(".ligne_trans > .ligne div",.5,{x:"-100%",ease:Power3.easeIn}),TweenMax.to(".ligne_trans_1 > div.pas_rempli > div",.5,{scaleX:"1",ease:Power2.easeIn}),TweenMax.to(".ligne_trans_2 > div.pas_rempli > div",.5,{scaleX:"1",delay:.1,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_3 > div.pas_rempli > div",.5,{scaleX:"1",delay:.2,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_4 > div.pas_rempli > div",.5,{scaleX:"1",delay:.3,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_5 > div.pas_rempli > div",.5,{scaleX:"1",delay:.4,ease:Power2.easeIn,onComplete:function(){$(".inner_img_agence_5").addClass("img_agence_current").removeClass("img_agence_hidden").siblings(".inner_img_agence").removeClass("img_agence_current").addClass("img_agence_hidden"),TweenMax.to("#map, #map img, #la_phrase",.5,{x:"0%",ease:Power3.easeInOut}),TweenMax.staggerTo(".ville",1,{x:"0px",ease:Power3.easeInOut},.1),TweenMax.staggerTo(".ville > div",1,{x:"0%",ease:Power3.easeInOut},.1)}})),step>1?step--:step=7}function Q(){step<5?(TweenMax.to(".paragraphe",.5,{x:"-316px",y:"-50%",ease:Power3.easeIn}),TweenMax.to(".paragraphe div",.5,{x:"102%",ease:Power3.easeIn}),TweenMax.to(".ligne_trans > .ligne div",.5,{x:"-100%",ease:Power3.easeIn}),TweenMax.to(".ligne_trans_1 > div.pas_rempli > div",.5,{scaleX:"1",ease:Power2.easeIn}),TweenMax.to(".ligne_trans_2 > div.pas_rempli > div",.5,{scaleX:"1",delay:.1,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_3 > div.pas_rempli > div",.5,{scaleX:"1",delay:.2,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_4 > div.pas_rempli > div",.5,{scaleX:"1",delay:.3,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_5 > div.pas_rempli > div",.5,{scaleX:"1",delay:.4,ease:Power2.easeIn,onComplete:function(){$(".inner_img_agence").removeClass("pasvu"),$(".img_agence_current").removeClass("img_agence_current").addClass("img_agence_hidden").next(".inner_img_agence").addClass("img_agence_current").removeClass("img_agence_hidden"),TweenMax.to("#scroll_down",.5,{opacity:"1",ease:Power3.easeOut}),TweenMax.to(".ligne_trans_1 > div.pas_rempli > div",.5,{scaleX:"0",ease:Power2.easeOut}),TweenMax.to(".ligne_trans_2 > div.pas_rempli > div",.5,{scaleX:"0",delay:.1,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_3 > div.pas_rempli > div",.5,{scaleX:"0",delay:.2,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_4 > div.pas_rempli > div",.5,{scaleX:"0",delay:.3,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_5 > div.pas_rempli > div",.5,{scaleX:"0",delay:.4,ease:Power2.easeOut}),TweenMax.to(".paragraphe",.5,{x:"0px",y:"-50%",ease:Power3.easeOut}),TweenMax.to(".paragraphe div",.5,{x:"0%",ease:Power3.easeOut}),TweenMax.to(".ligne_trans > .ligne div",.5,{x:"0%",ease:Power3.easeOut})}})):5==step?(TweenMax.to(".paragraphe",.5,{x:"-316px",y:"-50%",ease:Power3.easeIn}),TweenMax.to(".paragraphe div",.5,{x:"102%",
ease:Power3.easeIn}),TweenMax.to(".ligne_trans > .ligne div",.5,{x:"-100%",ease:Power3.easeIn}),TweenMax.to(".ligne_trans_1 > div.pas_rempli > div",.5,{scaleX:"1",ease:Power2.easeIn}),TweenMax.to(".ligne_trans_2 > div.pas_rempli > div",.5,{scaleX:"1",delay:.1,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_3 > div.pas_rempli > div",.5,{scaleX:"1",delay:.2,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_4 > div.pas_rempli > div",.5,{scaleX:"1",delay:.3,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_5 > div.pas_rempli > div",.5,{scaleX:"1",delay:.4,ease:Power2.easeIn,onComplete:function(){$("#page_5").show(),setTimeout(function(){y()},2e3),TweenMax.to("#working_with",.5,{x:"0px",ease:Power3.easeInOut}),TweenMax.to("#working_with div",.5,{x:"0%",ease:Power3.easeInOut}),TweenMax.to("#page_5",2,{opacity:"1",delay:.3,ease:Power3.easeInOut}),TweenMax.to("#cta_clients",.5,{x:"0px",delay:.3,ease:Power3.easeInOut}),TweenMax.to("#cta_clients #cta_child",.5,{x:"0%",delay:.3,ease:Power3.easeInOut}),window.innerWidth<=768&&($("#liste_clients_mob").show(),TweenMax.staggerTo("#liste_clients_mob > div > div",.5,{x:"0%",ease:Power3.easeInOut},.05),TweenMax.staggerTo("#liste_clients_mob > div > div > div",.5,{x:"0%",ease:Power3.easeInOut},.05))}})):6==step?(TweenMax.to("#liste_clients_mob > div > div",.5,{x:"-100%",ease:Power3.easeInOut}),TweenMax.to("#liste_clients_mob > div > div > div",.5,{x:"100%",ease:Power3.easeInOut,onComplete:function(){$("#liste_clients_mob").hide()}}),TweenMax.to(".cercle",.2,{opacity:"1",ease:Power3.easeInOut}),TweenMax.to($(".planete").find("div"),.2,{backgroundColor:"#FFFFFF",ease:Power3.easeInOut}),TweenMax.to("#nom_central_child",.2,{opacity:"0",ease:Power3.easeInOut}),TweenMax.to("#trait_fond div",.2,{x:"100%",ease:Power3.easeInOut,onComplete:function(){TweenMax.to("#trait_fond div",0,{x:"-100%"})}}),TweenMax.to("#working_with",.5,{x:"-250px",ease:Power3.easeInOut}),TweenMax.to("#working_with div",.5,{x:"100%",ease:Power3.easeInOut}),TweenMax.to("#cta_clients",.5,{x:"-250px",delay:.3,ease:Power3.easeInOut}),TweenMax.to("#cta_clients #cta_child",.5,{x:"100%",delay:.3,ease:Power3.easeInOut,onComplete:function(){TweenMax.to("#map, #map img, #la_phrase",.5,{x:"0%",ease:Power3.easeInOut}),TweenMax.staggerTo(".ville",1,{x:"0px",ease:Power3.easeInOut},.1),TweenMax.staggerTo(".ville > div",1,{x:"0%",ease:Power3.easeInOut},.1)}}),TweenMax.to("#page_5",.8,{opacity:"0",ease:Power3.easeInOut,onComplete:function(){$("#page_5").hide()}})):7==step&&(TweenMax.to(".vancou",1,{x:"-150px",delay:.9,ease:Power3.easeInOut,onComplete:function(){TweenMax.to("#map img, #la_phrase",.5,{x:"100%",ease:Power3.easeInOut}),TweenMax.to("#map",.5,{x:"-100%",ease:Power3.easeInOut,onComplete:function(){$(".inner_img_agence_1").addClass("img_agence_current").removeClass("img_agence_hidden").siblings(".inner_img_agence").removeClass("img_agence_current").addClass("img_agence_hidden"),TweenMax.to(".ligne_trans_1 > div.pas_rempli > div",.5,{scaleX:"0",ease:Power2.easeOut}),TweenMax.to(".ligne_trans_2 > div.pas_rempli > div",.5,{scaleX:"0",delay:.1,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_3 > div.pas_rempli > div",.5,{scaleX:"0",delay:.2,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_4 > div.pas_rempli > div",.5,{scaleX:"0",delay:.3,ease:Power2.easeOut}),TweenMax.to(".ligne_trans_5 > div.pas_rempli > div",.5,{scaleX:"0",delay:.4,ease:Power2.easeOut}),TweenMax.to(".paragraphe",.5,{x:"0px",y:"-50%",ease:Power3.easeOut}),TweenMax.to(".paragraphe div",.5,{x:"0%",ease:Power3.easeOut}),TweenMax.to(".ligne_trans > .ligne div",.5,{x:"0%",ease:Power3.easeOut})}})}}),TweenMax.to(".vancou > div",1,{x:"100%",delay:.9,ease:Power3.easeInOut}),TweenMax.to(".mexico",1,{x:"-150px",delay:.8,ease:Power3.easeInOut}),TweenMax.to(".mexico > div",1,{x:"100%",delay:.8,ease:Power3.easeInOut}),TweenMax.to(".fdf",1,{x:"-150px",delay:.7,ease:Power3.easeInOut}),TweenMax.to(".fdf > div",1,{x:"100%",delay:.7,ease:Power3.easeInOut}),TweenMax.to(".washington",1,{x:"-150px",delay:.6,ease:Power3.easeInOut}),TweenMax.to(".washington > div",1,{x:"100%",delay:.6,ease:Power3.easeInOut}),TweenMax.to(".nyc",1,{x:"-150px",delay:.5,ease:Power3.easeInOut}),TweenMax.to(".nyc > div",1,{x:"100%",delay:.5,ease:Power3.easeInOut}),TweenMax.to(".manaus",1,{x:"-150px",delay:.4,ease:Power3.easeInOut}),TweenMax.to(".manaus > div",1,{x:"100%",delay:.4,ease:Power3.easeInOut}),TweenMax.to(".barca",1,{x:"-150px",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".barca > div",1,{x:"100%",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".paris",1,{x:"-150px",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".paris > div",1,{x:"100%",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".dubai",1,{x:"-150px",delay:.1,ease:Power3.easeInOut}),TweenMax.to(".dubai > div",1,{x:"100%",delay:.1,ease:Power3.easeInOut}),TweenMax.to(".hk",1,{x:"-150px",ease:Power3.easeInOut}),TweenMax.to(".hk > div",1,{x:"100%",ease:Power3.easeInOut})),step<7?step++:step=1}function R(){$("#bon_logo_b").addClass("current"),TweenMax.to("canvas",1,{opacity:1,delay:1}),current_value=1,TweenMax.to("canvas",1,{opacity:0,delay:3}),TweenMax.to("#inner_bon_logo img.current",1,{opacity:1,delay:2.7})}function S(){$("#open_menu").addClass("noir"),$("#bon_logo_n").addClass("current"),$("canvas").addClass("difference"),TweenMax.to("canvas",1,{opacity:1,delay:1}),current_value=1,TweenMax.to("canvas",1,{opacity:0,delay:3}),TweenMax.to("#inner_bon_logo img.current",1,{opacity:1,delay:2.7})}function T(){$("body").addClass("blanc"),setTimeout(function(){$("body").attr("style","")},500),$("#bon_logo_b").removeClass("current"),$("#bon_logo_n").addClass("current"),$("canvas").addClass("difference"),TweenMax.to("#bon_logo_b",.5,{opacity:0,onComplete:function(){TweenMax.to("#bon_logo_n",.5,{opacity:1})}}),setTimeout(function(){$("#open_menu").addClass("noir")},500)}function U(){$("#contact").css("background","none"),$("body").removeClass("blanc"),TweenMax.to("#bon_logo_n, #canvas",.5,{opacity:0,onComplete:function(){TweenMax.to("#bon_logo_b",.5,{opacity:1}),$("canvas").removeClass("difference"),$("#bon_logo_n").removeClass("current"),$("#bon_logo_b").addClass("current")}}),setTimeout(function(){$("#open_menu").removeClass("noir"),$("#open_menu").addClass("blanc"),setTimeout(function(){$("#open_menu").removeClass("blanc")},500)},500)}var a=new createjs.LoadQueue;for(a.on("progress",b),a.on("complete",c),ii=0;ii<tableau_preload.length;ii++)a.loadFile(tableau_preload[ii]);var d=document.getElementById("le_canvas"),e=PIXI.autoDetectRenderer(716,180,{view:d,transparent:!0});document.body.appendChild(e.view);var f=new PIXI.Container,g=PIXI.Texture.fromImage("/wp-content/themes/blackballoon/img/bon_logo_b.png"),h=new PIXI.Sprite(g),i=PIXI.Sprite.fromImage("/wp-content/themes/blackballoon/img/brouillard.png");i.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT;var j=new PIXI.filters.DisplacementFilter(i);i.scale.y=.3,i.scale.x=.3,f.addChild(i),f.addChild(h),D(),document.querySelector("#inner_bon_logo").onmouseover=function(){0!=$("canvas").css("opacity")&&TweenMax.to("canvas",0,{delay:.3,opacity:1}),TweenMax.to("canvas",.5,{opacity:1,ease:Linear.easeNone}),TweenMax.to("#inner_bon_logo img.current",.5,{delay:.3,opacity:0,ease:Linear.easeNone}),counter={var:0},TweenMax.to(counter,1,{var:1,onUpdate:function(){current_value=counter.var}})},document.querySelector("#inner_bon_logo").onmouseout=function(){0!=$("#inner_bon_logo img.current").css("opacity")&&TweenMax.to("#inner_bon_logo img.current",0,{delay:.3,opacity:1}),TweenMax.to("#inner_bon_logo img.current",.5,{opacity:1,ease:Linear.easeNone}),TweenMax.to("canvas",.5,{delay:.3,opacity:0,ease:Linear.easeNone}),counter={var:1},TweenMax.to(counter,1,{var:0,onUpdate:function(){current_value=counter.var}})},String.prototype.decodeHTML=function(){return $("<div>",{html:""+this}).html()};var k=$("#main"),l=function(){a_clique=!1,$(".un_projet").removeClass("cursor"),$("#main").removeClass("long").css("opacity","1"),$("#temp").removeClass("direct"),anti_saut=!0,nombre_animations=0,cest_bon=!1,premier_slide=!0,step=0,clearInterval(siv),$("#temp > div").removeClass("current"),$("#temp > div").addClass("pas_current"),$("#temp > last").addClass("current_none"),$("#single-projet")[0]||TweenMax.to("#volet",0,{x:"-100%"}),1==transition_en_cours&&(transition_en_cours=!1,TweenMax.to("#tous_projets",0,{x:"20vw"}),$(".num_projet, .trait2, .inner_h3, #inner_drag").css("opacity","0"),TweenMax.to(".un_projet .linner_h2",0,{x:"-20%",y:"0%"}),TweenMax.to(".linner_h2",2.5,{x:"0%",ease:Power1.easeOut}),TweenMax.to("#tous_projets",1,{x:"0vw",opacity:1,delay:.7,ease:Power1.easeInOut,onComplete:function(){TweenMax.to(".num_projet, .trait2, .inner_h3, #inner_drag",1.5,{opacity:"1",ease:Power1.easeOut})}}),TweenMax.to("#img1 > div, #img2 > div, #img3 > div, #img1 > div > div, #img2 > div > div, #img3 > div > div",.8,{x:"0%",ease:Power3.easeInOut,onComplete:function(){TweenMax.staggerTo(".contact_child",.8,{x:"0px",ease:Power3.easeInOut},.1),TweenMax.staggerTo(".contact_child > div",.8,{x:"0%",ease:Power3.easeInOut},.1),TweenMax.to(".c_fb",.8,{x:"0px",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".c_fb > div",.8,{x:"0%",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".c_it",.8,{x:"0px",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".c_it > div",.8,{x:"0%",delay:.3,ease:Power3.easeInOut})}})),q(),scroll.init(),""!=page_actuelle&&(go_to=page_actuelle),$("#slider")[0]?page_actuelle="home":$("#inner_projets")[0]?page_actuelle="projets":$("#single-projet")[0]?page_actuelle="projet":$(".agence")[0]?page_actuelle="agence":$("#contact")[0]&&(page_actuelle="contact",$("body").addClass("blanc"),setTimeout(function(){$("body").attr("style","")},500)),$("#inner_projets")[0]&&window.innerWidth>768?(scroll.destroy(),scroll=null,scroll=new Smooth({native:!1,preload:!0,section:document.querySelector(".vs-section"),direction:"horizontal"}),scroll.vs.options.mouseMultiplier=1):(scroll.destroy(),scroll=null,scroll=new Smooth({native:!1,preload:!0,section:document.querySelector(".vs-section")})),counter={var:scroll.vars.target},$("#single-projet")[0]?setTimeout(function(){scroll.init(),1==premier&&(setTimeout(function(){$("path, polygon").addClass("letter"),TweenMax.to("#open_menu .l1",.3,{x:"-50%",delay:3,ease:Power3.easeIn}),TweenMax.to("#open_menu .l1 div",.3,{x:"0%",delay:3,ease:Power3.easeIn}),TweenMax.to("#open_menu .l2",.3,{x:"-50%",delay:3.2,ease:Power3.easeIn}),TweenMax.to("#open_menu .l2 div",.3,{x:"0%",delay:3.2,ease:Power3.easeIn}),TweenMax.to("#open_menu .l3",.3,{x:"-50%",delay:3.4,ease:Power3.easeIn}),TweenMax.to("#open_menu .l3 div",.3,{x:"0%",delay:3.4,ease:Power3.easeIn})},1e3),O())},500):setTimeout(function(){scroll.init(),1==premier&&(setTimeout(function(){$("path, polygon").addClass("letter"),TweenMax.to("#open_menu .l1",.3,{x:"-50%",delay:3,ease:Power3.easeIn}),TweenMax.to("#open_menu .l1 div",.3,{x:"0%",delay:3,ease:Power3.easeIn}),TweenMax.to("#open_menu .l2",.3,{x:"-50%",delay:3.2,ease:Power3.easeIn}),TweenMax.to("#open_menu .l2 div",.3,{x:"0%",delay:3.2,ease:Power3.easeIn}),TweenMax.to("#open_menu .l3",.3,{x:"-50%",delay:3.4,ease:Power3.easeIn}),TweenMax.to("#open_menu .l3 div",.3,{x:"0%",delay:3.4,ease:Power3.easeIn})},1e3),O())},100)},m=function(a){document.title=a.match(/<title>(.*?)<\/title>/)[1].trim().decodeHTML(),$("body").attr("class","").addClass(a.match(/<body class="(.*?)">/)[1]),l()},n=function(a){if(go_to="blackballoon"==a.substr(a.lastIndexOf("/")+1)||"www.blackballoon.fr"==a.substr(a.lastIndexOf("/")+1)?"home":"lagence"==a.substr(a.lastIndexOf("/")+1)?"agence":"contact"==a.substr(a.lastIndexOf("/")+1)?"contact":"projets"==a.substr(a.lastIndexOf("/")+1)?"projets":"projet",window.innerWidth>768){if("home"==page_actuelle&&"agence"==go_to&&0==navigateur||"home"==page_actuelle&&"agence"==go_to&&1==navigateur)o(),$("#open_menu").hasClass("open")&&p(),k.load(a+" #main>*",m);else if("home"==page_actuelle&&"projets"==go_to&&0==navigateur||"home"==page_actuelle&&"projets"==go_to&&1==navigateur)projet_a_projets=!1,o(),$("#open_menu").hasClass("open")&&p(),k.load(a+" #main>*",m);else if("home"==page_actuelle&&"projet"==go_to&&0==navigateur||"home"==page_actuelle&&"projet"==go_to&&1==navigateur)a_clique=!0,projet_a_projet=!1,clearInterval(siv),TweenMax.to(".slide_main",.5,{x:"0",y:"0",ease:Power3.easeInOut,onComplete:function(){effet_3D=!1,TweenMax.to(".slide_main",1,{scale:1.35,rotationY:0,rotationX:0,ease:Power2.easeInOut,onComplete:function(){$("#temp_img").addClass("yolo"),$("#temp_img").attr("style","background:url("+$(".a_slide.current .slide_main").attr("data-photo")+") 50% 50%;"),k.load(a+" #main>*",m)}}),TweenMax.to(".slide_back_1, .slide_back_2, #inner_pager",.5,{opacity:0,ease:Power3.easeInOut}),TweenMax.to(".a_slide > div > a div h2",.5,{y:"-100%",ease:Power3.easeInOut})}});else if("home"==page_actuelle&&"contact"==go_to&&0==navigateur||"home"==page_actuelle&&"contact"==go_to&&1==navigateur)o(),$("#open_menu").hasClass("open")&&p(),setTimeout(function(){T()},800),setTimeout(function(){k.load(a+" #main>*",m)},1800);else if("projets"==page_actuelle&&"projet"==go_to&&0==navigateur||"projets"==page_actuelle&&"projet"==go_to&&1==navigateur){if(projet_a_projet=!1,transition_en_cours=!0,1==navigateur){effet_3D=!1;var b=window.location.href,c=dernier_num_pro-1,d=$(".un_projet:eq("+c+")").find(".img_projet");scroll.off(onscroll),B(d,b,c)}}else"projets"==page_actuelle&&"home"==go_to&&0==navigateur||"projets"==page_actuelle&&"agence"==go_to&&0==navigateur||"projets"==page_actuelle&&"home"==go_to&&1==navigateur||"projets"==page_actuelle&&"agence"==go_to&&1==navigateur?($("#open_menu").hasClass("open")&&p(),TweenMax.to(".num_projet, .trait2, .inner_h3, #inner_drag",.5,{opacity:0}),TweenMax.to(".un_projet .linner_h2",2.5,{x:"-20%",y:"0%",ease:Power1.easeOut}),TweenMax.to("#tous_projets",1,{x:"20vw",opacity:0,ease:Power1.easeInOut,onComplete:function(){k.load(a+" #main>*",m)}})):"projets"==page_actuelle&&"contact"==go_to&&0==navigateur||"projets"==page_actuelle&&"contact"==go_to&&1==navigateur?(transition_en_cours=!0,$("#open_menu").hasClass("open")&&p(),TweenMax.to(".num_projet, .trait2, .inner_h3, #inner_drag",.5,{opacity:0}),TweenMax.to(".un_projet .linner_h2",2.5,{x:"-20%",y:"0%",ease:Power1.easeOut}),TweenMax.to("#tous_projets",1,{x:"20vw",opacity:0,ease:Power1.easeInOut}),setTimeout(function(){T()},1e3),setTimeout(function(){k.load(a+" #main>*",m)},1800)):"projet"==page_actuelle&&"home"==go_to&&0==navigateur||"projet"==page_actuelle&&"agence"==go_to&&0==navigateur||"projet"==page_actuelle&&"home"==go_to&&1==navigateur||"projet"==page_actuelle&&"agence"==go_to&&1==navigateur?$("#open_menu").hasClass("open")?(p(),setTimeout(function(){$("#volet").css("background","#000000"),$("body").addClass("noir"),TweenMax.to("#volet",1,{x:"0%",backgroundColor:"#000000",ease:Power3.easeOut,onComplete:function(){k.load(a+" #main>*",m)}})},500)):($("#volet").css("background","#000000"),$("body").addClass("noir"),TweenMax.to("#volet",1,{x:"0%",backgroundColor:"#000000",ease:Power3.easeOut,onComplete:function(){k.load(a+" #main>*",m)}})):"projet"==page_actuelle&&"contact"==go_to&&0==navigateur||"projet"==page_actuelle&&"contact"==go_to&&1==navigateur?(transition_en_cours=!0,p(),setTimeout(function(){$("#volet").css("background",$("#single-projet").attr("data-color")),TweenMax.to("#volet",1,{x:"0%",backgroundColor:"#FFF",ease:Power3.easeOut,onComplete:function(){T(),setTimeout(function(){k.load(a+" #main>*",m)},1400)}})},500)):"projet"==page_actuelle&&"projet"==go_to&&0==navigateur||"projet"==page_actuelle&&"projet"==go_to&&1==navigateur?(projet_a_projet=!0,TweenMax.to("#volet",0,{backgroundColor:$("#single-projet").attr("data-color")}),$("body, #volet").css("background",$("#single-projet").attr("data-color")),transition_en_cours=!0,$("#open_menu").hasClass("open")&&p(),TweenMax.to("#volet",1,{x:"0%",ease:Power3.easeOut,onComplete:function(){setTimeout(function(){k.load(a+" #main>*",m)},1400)}})):"projet"==page_actuelle&&"projets"==go_to&&0==navigateur||"projet"==page_actuelle&&"projets"==go_to&&1==navigateur?($("#temp_img").attr("style","background:url("+$("#pour_data").attr("data-url")+") 50% 50%;"),retour_projet=$("#single-projet").attr("data-retour"),element_apres=parseInt(retour_projet)+1,projet_a_projets=!0,$("#open_menu").hasClass("open")&&p(),effet_3D=!1,$("#temp_retour_projet h2").html($("#single-projet h1").html()),$("#temp_retour_projet h3").html($("#single-projet h3").html()),$("#temp_retour_projet .img_projet_single").attr("style",$("#inner-single-projet .img_projet_single").attr("style")),$("#temp_retour_projet").css("background",$("#single-projet").attr("data-color")),TweenMax.to(".linner_h2",0,{y:"0%"}),TweenMax.to("#temp_retour_projet .linner_h2 h2, #temp_retour_projet .inner_h3 h3",0,{y:"-100%"}),counter={var:scroll.vars.target},TweenMax.to(counter,1,{ease:Power3.easeInOut,var:0,onUpdate:function(){scroll.vars.current=counter.var,scroll.vars.target=scroll.vars.current},onComplete:function(){scroll.destroy(),$("#temp_retour_projet").show(),$("#temp_img").addClass("yolo"),setTimeout(function(){$("#temp_img").removeClass("yolo")},500),TweenMax.to("#temp_retour_projet .linner_h2 h2, #temp_retour_projet .inner_h3 h3",.5,{y:"0%",delay:.5,ease:Power2.easeInOut}),TweenMax.to("#temp_retour_projet .img_projet_single",1,{scale:1,ease:Power2.easeInOut,delay:.5,onComplete:function(){}}),k.load(a+" #main>*",m)}})):"agence"==page_actuelle&&"home"==go_to&&0==navigateur||"agence"==page_actuelle&&"projets"==go_to&&0==navigateur||"agence"==page_actuelle&&"contact"==go_to&&0==navigateur||"agence"==page_actuelle&&"home"==go_to&&1==navigateur||"agence"==page_actuelle&&"projets"==go_to&&1==navigateur||"agence"==page_actuelle&&"contact"==go_to&&1==navigateur?(projet_a_projets=!1,transition_en_cours=!0,$("#open_menu").hasClass("open")&&p(),TweenMax.to(".paragraphe",.5,{x:"-316px",y:"-50%",ease:Power3.easeIn}),TweenMax.to(".paragraphe div",.5,{x:"102%",ease:Power3.easeIn}),TweenMax.to(".ligne_trans > .ligne div",.5,{x:"-100%",ease:Power3.easeIn}),TweenMax.to(".ligne_trans_1 > div.pas_rempli > div",.5,{scaleX:"1",ease:Power2.easeIn}),TweenMax.to(".ligne_trans_2 > div.pas_rempli > div",.5,{scaleX:"1",delay:.1,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_3 > div.pas_rempli > div",.5,{scaleX:"1",delay:.2,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_4 > div.pas_rempli > div",.5,{scaleX:"1",delay:.3,ease:Power2.easeIn}),TweenMax.to(".ligne_trans_5 > div.pas_rempli > div",.5,{scaleX:"1",delay:.4,ease:Power2.easeIn}),TweenMax.to("#scroll_down > div > div",.5,{y:"-100%",ease:Power3.easeInOut}),TweenMax.to(".le_point, .fleche_down",.5,{y:"-10px",opacity:"0",ease:Power3.easeInOut,onComplete:function(){$("#scroll_down").hide()}}),TweenMax.to(".vancou",1,{x:"-150px",delay:.9,ease:Power3.easeInOut,onComplete:function(){TweenMax.to("#map img",.5,{x:"100%",ease:Power3.easeInOut}),TweenMax.to("#map",.5,{x:"-100%",ease:Power3.easeInOut})}}),TweenMax.to(".vancou > div",1,{x:"100%",delay:.9,ease:Power3.easeInOut}),TweenMax.to(".mexico",1,{x:"-150px",delay:.8,ease:Power3.easeInOut}),TweenMax.to(".mexico > div",1,{x:"100%",delay:.8,ease:Power3.easeInOut}),TweenMax.to(".fdf",1,{x:"-150px",delay:.7,ease:Power3.easeInOut}),TweenMax.to(".fdf > div",1,{x:"100%",delay:.7,ease:Power3.easeInOut}),TweenMax.to(".washington",1,{x:"-150px",delay:.6,ease:Power3.easeInOut}),TweenMax.to(".washington > div",1,{x:"100%",delay:.6,ease:Power3.easeInOut}),TweenMax.to(".nyc",1,{x:"-150px",delay:.5,ease:Power3.easeInOut}),TweenMax.to(".nyc > div",1,{x:"100%",delay:.5,ease:Power3.easeInOut}),TweenMax.to(".manaus",1,{x:"-150px",delay:.4,ease:Power3.easeInOut}),TweenMax.to(".manaus > div",1,{x:"100%",delay:.4,ease:Power3.easeInOut}),TweenMax.to(".barca",1,{x:"-150px",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".barca > div",1,{x:"100%",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".paris",1,{x:"-150px",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".paris > div",1,{x:"100%",delay:.2,ease:Power3.easeInOut}),TweenMax.to(".dubai",1,{x:"-150px",delay:.1,ease:Power3.easeInOut}),TweenMax.to(".dubai > div",1,{x:"100%",delay:.1,ease:Power3.easeInOut}),TweenMax.to(".hk",1,{x:"-150px",ease:Power3.easeInOut}),TweenMax.to(".hk > div",1,{x:"100%",ease:Power3.easeInOut}),TweenMax.to("#working_with",.5,{x:"-250px",ease:Power3.easeInOut}),TweenMax.to("#working_with div",.5,{x:"100%",ease:Power3.easeInOut}),$(".inner_vs-section-a").hasClass("actif")?($(".inner_vs-section-a").removeClass("actif"),TweenMax.to(".vs-section-agence > div > div",.5,{x:"-100%",ease:Power3.easeInOut}),TweenMax.to(".vs-section-agence > div > div > div",.5,{x:"100%",ease:Power3.easeInOut}),TweenMax.to("#cta_child",.5,{x:"0%",ease:Power3.easeInOut,onComplete:function(){$("#cta_child2").hide(),$("#cta_clients").css("background","none"),TweenMax.to("#cta_clients",.5,{x:"-250px",ease:Power3.easeInOut}),TweenMax.to("#cta_clients #cta_child",.5,{x:"100%",ease:Power3.easeInOut})}})):(TweenMax.to("#cta_clients",.5,{x:"-250px",delay:.3,ease:Power3.easeInOut}),TweenMax.to("#cta_clients #cta_child",.5,{x:"100%",delay:.3,ease:Power3.easeInOut})),TweenMax.to("#page_5",.8,{opacity:"0",ease:Power3.easeInOut,onComplete:function(){$("#page_5").hide()}}),step<=6&&step>0?(setTimeout(function(){$(".inner_img_agence").hide(),"agence"==page_actuelle&&"contact"==go_to&&T()},1e3),setTimeout(function(){effet_3D=!0,k.load(a+" #main>*",m)},2e3)):7!=step&&0!=step||(setTimeout(function(){$(".inner_img_agence").hide()},2e3),setTimeout(function(){"agence"==page_actuelle&&"contact"==go_to&&T()},2500),setTimeout(function(){effet_3D=!0,k.load(a+" #main>*",m)},3500))):"contact"==page_actuelle&&"home"==go_to&&0==navigateur||"contact"==page_actuelle&&"projets"==go_to&&0==navigateur||"contact"==page_actuelle&&"agence"==go_to&&0==navigateur||"contact"==page_actuelle&&"home"==go_to&&1==navigateur||"contact"==page_actuelle&&"projets"==go_to&&1==navigateur||"contact"==page_actuelle&&"agence"==go_to&&1==navigateur?(projet_a_projets=!1,transition_en_cours=!0,$("#open_menu").hasClass("open")?(p(),setTimeout(function(){TweenMax.to("#img1 > div, #img2 > div, #img3 > div",.8,{x:"-102%",ease:Power3.easeInOut}),TweenMax.to("#img1 > div > div, #img2 > div > div, #img3 > div > div",.8,{x:"102%",ease:Power3.easeInOut}),TweenMax.to(".contact_child",.8,{x:"-300px",ease:Power3.easeInOut}),TweenMax.to(".contact_child > div",.8,{x:"100%",ease:Power3.easeInOut}),TweenMax.to(".c_fb",.8,{x:"-300px",ease:Power3.easeInOut}),TweenMax.to(".c_fb > div",.8,{x:"100%",ease:Power3.easeInOut}),TweenMax.to(".c_it",.8,{x:"-300px",ease:Power3.easeInOut}),TweenMax.to(".c_it > div",.8,{x:"100%",ease:Power3.easeInOut,onComplete:function(){setTimeout(function(){U()},500),setTimeout(function(){k.load(a+" #main>*",m)},1500)}})},500)):(TweenMax.to("#img1 > div, #img2 > div, #img3 > div",.8,{x:"-102%",ease:Power3.easeInOut}),TweenMax.to("#img1 > div > div, #img2 > div > div, #img3 > div > div",.8,{x:"102%",ease:Power3.easeInOut}),TweenMax.to(".contact_child",.8,{x:"-300px",ease:Power3.easeInOut}),TweenMax.to(".contact_child > div",.8,{x:"100%",ease:Power3.easeInOut}),TweenMax.to(".c_fb",.8,{x:"-300px",ease:Power3.easeInOut}),TweenMax.to(".c_fb > div",.8,{x:"100%",ease:Power3.easeInOut}),TweenMax.to(".c_it",.8,{x:"-300px",ease:Power3.easeInOut}),TweenMax.to(".c_it > div",.8,{x:"100%",ease:Power3.easeInOut,onComplete:function(){setTimeout(function(){U()},500),setTimeout(function(){k.load(a+" #main>*",m)},1500)}}))):"agence"==page_actuelle&&"agence"==go_to||"projets"==page_actuelle&&"projets"==go_to||"home"==page_actuelle&&"home"==go_to&&$("#open_menu").hasClass("open")?p():"contact"==page_actuelle&&"contact"==go_to?p():1==navigateur&&($("#main").addClass("long").css("opacity","0"),setTimeout(function(){k.load(a+" #main>*",m)},1e3));navigateur=!1}else"contact"==page_actuelle?setTimeout(function(){U()},500):"contact"==go_to&&setTimeout(function(){T()},500),transition_en_cours=!0,$("#open_menu").hasClass("open")&&p(),$("#main").addClass("long").css("opacity","0"),setTimeout(function(){k.load(a+" #main>*",m)},1e3)};l(),$(window).on("popstate",function(a){null!==a.originalEvent.state&&(navigateur=!0,n(location.href))}),$(".logo a").hover(function(){$(".letter10, .letter11").removeClass("hover_logo"),setTimeout(function(){$(".letter10, .letter11").addClass("hover_logo en_bas")},100),setTimeout(function(){},700)},function(){}),$(document).on("click","a, area",function(a){if(!$(this).hasClass("langue")){if(1==is_chrome)var b=le_lien;else var b=$(this).attr("href");if(void 0!=b&&(b.indexOf(document.domain)>-1||b.indexOf(":")===-1)){if(!$("#slider")[0])return history.pushState({},"",b),n(b),!1;if($("#open_menu").hasClass("open"))return history.pushState({},"",b),n(b),!1;if(!TweenMax.isTweening("#slider .is_tweening"))return history.pushState({},"",b),n(b),!1}}}),$(document).on("click","#pager > div, #pager2 > div",function(){var a=$(this).attr("data-num");$(".a_slide:nth-child("+a+")").hasClass("current")||TweenMax.isTweening(".is_tweening")||($(this).addClass("current").siblings().removeClass("current"),clearInterval(siv),siv=setInterval(function(){s()},5800),TweenMax.to(".a_slide.current .inner_s2",1.5,{y:"-100%",ease:Power2.easeInOut}),TweenMax.to(".a_slide.current .inner_main",1.5,{y:"-100%",delay:.1,ease:Power2.easeInOut}),TweenMax.to(".a_slide.current .inner_h2",1.5,{y:"-100%",delay:.2,ease:Power2.easeInOut}),TweenMax.to(".a_slide.current .inner_s1",1.5,{y:"-100%",delay:.3,ease:Power2.easeInOut}),TweenMax.to($(".a_slide:nth-child("+a+")").find(".inner_s2"),1.5,{y:"-100%",delay:.5,ease:Power2.easeInOut}),TweenMax.to($(".a_slide:nth-child("+a+")").find(".inner_main"),1.5,{y:"-100%",delay:.6,ease:Power2.easeInOut}),TweenMax.to($(".a_slide:nth-child("+a+")").find(".inner_h2"),1.5,{y:"-100%",delay:.7,ease:Power3.easeInOut}),TweenMax.to($(".a_slide:nth-child("+a+")").find(".inner_s1"),1.5,{y:"-100%",delay:.8,ease:Power2.easeInOut,onComplete:function(){$(".current_none").removeClass("current_none"),$(".a_slide.current").removeClass("current").addClass("pas_current"),$(".a_slide:nth-child("+a+")").addClass("current").removeClass("pas_current"),TweenMax.to(".a_slide.current, .a_slide.current .inner_s2, .a_slide.current .inner_main, .a_slide.current .inner_s1, .a_slide.pas_current .inner_s2, .a_slide.pas_current .inner_main, .a_slide.pas_current .inner_s1, .a_slide.current .inner_h2, .a_slide.pas_current .inner_h2",0,{y:"0%",ease:Power3.easeInOut}),TweenMax.to(".a_slide.pas_current",0,{y:"100%",ease:Power3.easeInOut}),TweenMax.to(".a_slide.pas_current .slide_main, .a_slide.pas_current .slide_back_1, .a_slide.pas_current .slide_back_2",0,{y:"0",x:"0",ease:Power3.easeInOut}),r()}}))}),$(document).on("click","#open_menu",function(){$("#inner_drag").hasClass("z8")||$("#inner_drag").toggleClass("z8"),$(this).toggleClass("open"),$(this).hasClass("open")?($("#multilangue").show(),$("#contact")[0]&&($("canvas").removeClass("difference"),$("#bon_logo_b").addClass("current"),$("#bon_logo_n").removeClass("current"),TweenMax.to("#bon_logo_n",0,{opacity:0,delay:.3}),TweenMax.to("#bon_logo_b",0,{opacity:1,delay:.3})),$("#main").addClass("flou"),TweenMax.to("nav",.5,{x:"0%",ease:Power3.easeInOut,onComplete:function(){TweenMax.to(".l1, .l3",.3,{scaleX:"1.2",ease:Power3.easeInOut}),TweenMax.to(".l2",.3,{scaleX:"0.8",ease:Power3.easeInOut})}}),TweenMax.to(".item4",.8,{x:"0px",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".item4 .item_menu",.8,{x:"0%",delay:.3,ease:Power3.easeInOut}),TweenMax.to(".item1",.8,{x:"0px",delay:.4,ease:Power3.easeInOut}),TweenMax.to(".item1 .item_menu",.8,{x:"0%",delay:.4,ease:Power3.easeInOut}),TweenMax.to(".item3",.8,{x:"0px",delay:.5,ease:Power3.easeInOut}),TweenMax.to(".item3 .item_menu",.8,{x:"0%",delay:.5,ease:Power3.easeInOut}),TweenMax.to(".item2",.8,{x:"0px",delay:.6,ease:Power3.easeInOut}),TweenMax.to(".item2 .item_menu",.8,{x:"0%",delay:.6,ease:Power3.easeInOut}),TweenMax.to("#multilangue",.2,{opacity:1,delay:1.4})):(TweenMax.to("#multilangue",.2,{opacity:0,onComplete:function(){TweenMax.to("#multilangue",0,{opacity:0}),$("#multilangue").hide()}}),$("#contact")[0]&&(TweenMax.to("#bon_logo_b",0,{opacity:0,delay:.3}),TweenMax.to("#bon_logo_n",0,{opacity:1,delay:.3}),$("canvas").addClass("difference"),$("#bon_logo_b").removeClass("current"),$("#bon_logo_n").addClass("current")),$("#main").removeClass("flou"),TweenMax.to("nav > div",.5,{x:"-100%",ease:Power3.easeInOut}),TweenMax.to("nav",.5,{x:"100%",ease:Power3.easeInOut,onComplete:function(){TweenMax.to(".l1, .l2, .l3",.3,{scaleX:"1",ease:Power3.easeInOut}),TweenMax.to("nav",0,{x:"-100%"}),TweenMax.to("nav > div",0,{x:"0%"}),TweenMax.to(".inner_item_menu",0,{x:"-250px"}),TweenMax.to(".item_menu",0,{x:"100%"}),$("#inner_drag").toggleClass("z8")}}))}),$(".langue").hover(function(){$(this).siblings().find("div").css("opacity","0")},function(){$(this).siblings().find("div").css("opacity","1")}),$(document).on("click","#cta_clients",function(){$(".inner_vs-section-a").hasClass("actif")?(TweenMax.to("#cta_child",.5,{x:"0%",ease:Power3.easeInOut,onComplete:function(){$("#cta_child2").hide(),$("#cta_clients").css("background","none")}}),TweenMax.to("#cta_child2",.5,{x:"-150px",ease:Power3.easeInOut}),liste_clients=!1,$(".inner_vs-section-a").removeClass("actif"),$("#page_5").show(),TweenMax.to(".vs-section-agence > div > div",.5,{x:"-100%",ease:Power3.easeInOut}),TweenMax.to(".vs-section-agence > div > div > div",.5,{x:"100%",ease:Power3.easeInOut,onComplete:function(){TweenMax.to(".inner_vs-section-a",0,{x:"100%"})}}),TweenMax.to("#page_5",2,{opacity:"1",delay:.3,ease:Power3.easeInOut})):($("#cta_clients").css("background","#FFF"),$("#cta_child2").show(),TweenMax.to("#cta_child",.5,{x:"100%",ease:Power3.easeInOut}),TweenMax.to("#cta_child2",.5,{x:"0px",ease:Power3.easeInOut}),liste_clients=!0,$(".inner_vs-section-a").addClass("actif"),TweenMax.to(".inner_vs-section-a",0,{x:"0%"}),scroll.vars.current=0,scroll.vars.target=0,TweenMax.to("#page_5",.5,{opacity:"0",ease:Power3.easeInOut,onComplete:function(){$("#page_5").hide(),TweenMax.staggerTo(".vs-section-agence > div > div",.5,{x:"0%",ease:Power3.easeInOut},.05),TweenMax.staggerTo(".vs-section-agence > div > div > div",.5,{x:"0%",ease:Power3.easeInOut},.05)}}),$("#working_with, #cta_clients").addClass("devant"))}),$(document).on("click",".tiers_large, #slider a",function(){var b=$(this).attr("data-imgs"),c=b.split(";");first_load=!1,a.removeAll();for(var d=0;d<c.length;d++)a.loadFile(c[d])}),$(document).on("click",".un_projet",function(){if(!$(this).hasClass("cursor")){$(".un_projet").addClass("cursor"),effet_3D=!1;var b=$(this).attr("data-url"),c=$(this).attr("data-num-projet"),d=$(this).find(".img_projet");scroll.off(onscroll),B(d,b,c);var e=$(this).attr("data-imgs"),f=e.split(";");first_load=!1,a.removeAll();for(var g=0;g<f.length;g++)a.loadFile(f[g])}});var F,V,G=0;VirtualScroll.on(function(a){V=scroll.vars.target/($(".vs-section").width()-window.innerWidth)*($("#inner_drag").width()-$("#drag").width()),TweenMax.to($("#drag"),.5,{x:V}),deplacement2=scroll.vars.target/($(".vs-section").height()-window.innerHeight+.05*window.innerHeight+(.5*window.innerHeight-.2*window.innerWidth))*($("#inner_drag2").height()-$("#drag2").height()),TweenMax.to($("#drag2"),.5,{y:deplacement2}),$("#slider")[0]&&0==a_clique&&(a.deltaY<0&&!TweenMax.isTweening(".is_tweening")?(clearInterval(siv),siv=setInterval(function(){s()},5800),s()):a.deltaY>0&&!TweenMax.isTweening(".is_tweening")&&(clearInterval(siv),siv=setInterval(function(){s()},5800),t())),$("#single-projet")[0]&&a.deltaY<0&&!TweenMax.isTweening("#scroll_down > div > div")&&!TweenMax.isTweening(".le_point")&&1==depart&&1==la_progression&&(TweenMax.to("#scroll_down > div > div",.5,{y:"-100%",ease:Power3.easeInOut}),TweenMax.to(".le_point, .fleche_down",.5,{y:"-10px",opacity:"0",ease:Power3.easeInOut,onComplete:function(){$("#scroll_down").hide()}})),0!=liste_clients||!$(".agence")[0]||TweenMax.isTweening(".ligne_trans > div > div")||TweenMax.isTweening(".planete")||TweenMax.isTweening(".cercle")||TweenMax.isTweening(".ville")||TweenMax.isTweening("#page_5")||TweenMax.isTweening("#cta_clients")||TweenMax.isTweening("#working_with")||TweenMax.isTweening("#liste_clients_mob > div > div")||TweenMax.isTweening("#map")||TweenMax.isTweening("#map img")||TweenMax.isTweening("#la_phrase")||0==a.deltaY||!(window.innerWidth>450)||(a.deltaY<0?Q():a.deltaY>0&&P());
},{passive:!0})}),1==is_chrome&&($("body").on("mouseover","a",function(a){le_lien=$(this).attr("href"),$(this).hasClass("langue")||$(this).removeAttr("href")}),$("body").on("mouseout","a",function(a){$(this).attr("href",le_lien)})),function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-88074686-1","auto"),ga("send","pageview");
